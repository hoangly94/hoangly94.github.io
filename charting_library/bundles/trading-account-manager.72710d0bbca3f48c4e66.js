(window.webpackJsonp=window.webpackJsonp||[]).push([["trading-account-manager"],{"040A":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 26" width="3" height="13" fill="currentColor"><circle cx="3" cy="3" r="3"/><circle cx="3" cy="13" r="3"/><circle cx="3" cy="23" r="3"/></svg>'},"0W35":function(t,e,s){"use strict";var i=s("q1tI"),n=s("17x9");class a extends i.PureComponent{constructor(){super(...arguments),this._subscriptions=new Set,this._getName=()=>this.props.name,this._getValues=()=>this.props.values,this._getOnChange=()=>this.props.onChange,this._subscribe=t=>{this._subscriptions.add(t)},this._unsubscribe=t=>{this._subscriptions.delete(t)}}getChildContext(){return{switchGroupContext:{getName:this._getName,getValues:this._getValues,getOnChange:this._getOnChange,subscribe:this._subscribe,unsubscribe:this._unsubscribe}}}render(){return this.props.children}componentDidUpdate(t){this._notify(this._getUpdates(this.props.values,t.values))}_notify(t){this._subscriptions.forEach(e=>e(t))}_getUpdates(t,e){return[...e,...t].filter(s=>e.includes(s)?!t.includes(s):t.includes(s))}}function r(t){var e;return(e=class extends i.PureComponent{constructor(){super(...arguments),this._onChange=t=>{this.context.switchGroupContext.getOnChange()(t)},this._onUpdate=t=>{t.includes(this.props.value)&&this.forceUpdate()}}componentDidMount(){this.context.switchGroupContext.subscribe(this._onUpdate)}render(){return i.createElement(t,Object.assign({},this.props,{name:this._getName(),onChange:this._onChange,checked:this._isChecked()}))}componentWillUnmount(){this.context.switchGroupContext.unsubscribe(this._onUpdate)}_getName(){return this.context.switchGroupContext.getName()}_isChecked(){return this.context.switchGroupContext.getValues().includes(this.props.value)}}).contextTypes={switchGroupContext:n.any.isRequired},e}a.childContextTypes={switchGroupContext:n.any.isRequired},s.d(e,"a",(function(){return a})),s.d(e,"b",(function(){return r}))},"0qWQ":function(t,e,s){t.exports={checkbox:"checkbox-3XCXBX0E"}},"14a3":function(t,e,s){"use strict";var i=s("3+Gi");s.d(e,"c",(function(){return i.a}));var n=s("JES+");s.d(e,"a",(function(){return n.AccountType})),s.d(e,"b",(function(){return n.DisconnectType}));s("25b6")},"1J84":function(t,e,s){"use strict";s.d(e,"a",(function(){return c}));var i=s("mrSG"),n=s("q1tI"),a=s("TSYQ"),r=s("N5tr"),o=s("fV0y"),l=s("0qWQ");function c(t){const{isDisabled:e,hint:s,label:c,isChecked:d,checkboxClassName:u,labelClassName:h,indeterminate:p}=t,_=Object(i.a)(t,["isDisabled","hint","label","isChecked","checkboxClassName","labelClassName","indeterminate"]);return n.createElement(r.b,Object.assign({},_,{isDisabled:e,shortcut:s,dontClosePopup:!0,labelRowClassName:h,label:n.createElement(o.a,{disabled:e,label:c,checked:d,indeterminate:p,className:a(l.checkbox,u)})}))}},"1Jm2":function(t,e,s){t.exports={wrapper:"wrapper-2bjb1nZR",logo:"logo-2bjb1nZR",info:"info-2bjb1nZR",title:"title-2bjb1nZR",description:"description-2bjb1nZR"}},"3+Gi":function(t,e,s){"use strict";var i
;s.d(e,"a",(function(){return i})),function(t){t[t.StopLoss=0]="StopLoss",t[t.TrailingStop=1]="TrailingStop"}(i||(i={}))},"6yro":function(t,e,s){t.exports={pageContainer:"pageContainer-L4BpQSm-"}},"8BmM":function(t,e,s){t.exports={menuButton:"menuButton-2sqtnTys",icon:"icon-2sqtnTys"}},"8nqC":function(t,e,s){"use strict";s("bSeV");var i=s("Eyy1"),n=s("txPx");Object(n.getLogger)("Common.InitData");const a=window.initData||{};var r;s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return c})),function(t){t[t.Medium=0]="Medium",t[t.Large=1]="Large"}(r||(r={}));class o{constructor(t){Object(i.assert)(""!==t,"S3 base url must be a non-empty string"),this._baseUrl=t}getSymbolLogoUrl(t,e){switch(Object(i.assert)(""!==t,"logo id must be a non-empty string"),e){case r.Medium:return this._baseUrl+(t+".svg");case r.Large:return this._baseUrl+(t+"--big.svg")}}getCountryFlagUrl(t,e){return this.getSymbolLogoUrl("country/"+t,e)}getCryptoLogoUrl(t,e){return this.getSymbolLogoUrl("crypto/"+t,e)}getProviderLogoUrl(t,e){return this.getSymbolLogoUrl("provider/"+t,e)}}let l;function c(){if(!l){const t=a,e=t.settings?t.settings.S3_LOGO_SERVICE_BASE_URL:"";l=new o(e)}return l}},BAjZ:function(t,e,s){t.exports={title:"title-20vH3OfT",relativePosition:"relativePosition-20vH3OfT"}},BhuR:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 9" width="9px" height="9px"><path d="M2 1L1 2l2.5 2.5L1 7l1 1 2.5-2.5L7 8l1-1-2.5-2.5L8 2 7 1 4.5 3.5z"/></svg>'},CRS4:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path d="M0 46l35-35 14 14-35 35H0zM39 7l6-6c5-5 19 9 14 14l-6 6z"/></svg>'},E9Pn:function(t,e,s){},F0Qt:function(t){t.exports=JSON.parse('{"wrapper":"wrapper-21v50zE8","input":"input-24iGIobO","box":"box-3574HVnv","icon":"icon-2jsUbtec","noOutline":"noOutline-3VoWuntz","intent-danger":"intent-danger-1Sr9dowC","check":"check-382c8Fu1","dot":"dot-3gRd-7Qt"}')},GeUm:function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));var i=s("q1tI"),n=s("TSYQ"),a=s("sHKj");function r(t){return i.createElement("div",{className:n(t.className,a.title)},t.children)}},HVfi:function(t,e,s){t.exports={wrapper:"wrapper-1IIH2rS_"}},Ib6K:function(t,e,s){t.exports={accountManager:"accountManager-2avCNzCz",topPanel:"topPanel-2avCNzCz",secondaryPanel:"secondaryPanel-2avCNzCz",content:"content-2avCNzCz",page:"page-2avCNzCz"}},Ipov:function(t,e,s){t.exports={wrapper:"wrapper-3tOVc1Mp"}},Jzno:function(t,e,s){t.exports={mobile:"screen and (max-width: 567px)"}},NluS:function(t,e,s){"use strict";function i(t){return"function"==typeof t?t():t}function n(){var t={};return t.promise=new Promise((function(e,s){t.resolve=e,t.reject=s})),t}t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=void 0,r=void 0,o=void 0,l=[];return function(){var d=i(e),u=(new Date).getTime(),h=!a||u-a>d;a=u;for(var p=arguments.length,_=Array(p),b=0;b<p;b++)_[b]=arguments[b]
;if(h&&s.leading)return s.accumulate?Promise.resolve(t.call(this,[_])).then((function(t){return t[0]})):Promise.resolve(t.call.apply(t,[this].concat(_)));if(r?clearTimeout(o):r=n(),l.push(_),o=setTimeout(c.bind(this),d),s.accumulate){var m=l.length-1;return r.promise.then((function(t){return t[m]}))}return r.promise};function c(){var e=r;clearTimeout(o),Promise.resolve(s.accumulate?t.call(this,l):t.apply(this,l[l.length-1])).then(e.resolve,e.reject),l=[],r=null}}},OOsH:function(t,e,s){t.exports={tableContainer:"tableContainer-1P_CMR4N",withScroll:"withScroll-1P_CMR4N",noScroll:"noScroll-1P_CMR4N",relativePosition:"relativePosition-1P_CMR4N"}},"P4l+":function(t,e,s){},UW4h:function(t,e,s){t.exports={counter:"counter-32gNL3M4",text:"text-32gNL3M4",count:"count-32gNL3M4",blue:"blue-32gNL3M4",grey:"grey-32gNL3M4",green:"green-32gNL3M4",orange:"orange-32gNL3M4",red:"red-32gNL3M4"}},YFtr:function(t,e,s){},Z4QD:function(t,e,s){"use strict";s.r(e);var i=s("q1tI"),n=s.n(i),a=s("YFKU"),r=s("TSYQ"),o=s.n(r),l=s("Eyy1"),c=s("qFKp"),d=s("82wv"),u=s("N5tr"),h=s("GeUm"),p=s("y/Hr");function _(t){const{currentAccount:e,accountsList:s,currentAccountUpdate:r}=t,[_,b]=Object(i.useState)(e);return Object(i.useEffect)(()=>(r.subscribe(null,m),()=>{r.unsubscribe(null,m)}),[r,s]),n.a.createElement(d.b,{isDrawer:c.CheckMobile.any(),content:n.a.createElement("span",{className:p.content},void 0!==_.currency?`${_.name} (${_.currency})`:_.name),className:p.dropdown},n.a.createElement(h.a,null,Object(a.t)("Accounts")),s.map(t=>{const e=_.id===t.id;return n.a.createElement(u.b,{labelClassName:p.labelWrapper,isActive:e,label:n.a.createElement("div",{className:p.label},n.a.createElement("div",{className:p.title},t.name),void 0!==t.currency&&n.a.createElement("div",{className:o()(p.currency,e&&p.activeCurrency)},"(",t.currency,")")),onClick:()=>t.callBack(),key:t.id})}));function m(t){b(Object(l.ensureDefined)(s.find(e=>e.id===t)))}}var b=s("HVfi");function m(t){const{brokerDropdownProps:e,accountDropdownProps:s}=t;return n.a.createElement("div",{className:b.wrapper},void 0!==e&&n.a.createElement(BrokerDropdown,Object.assign({},e)),n.a.createElement(_,Object.assign({},s)))}s.d(e,"AccountManagerHeaderDropdowns",(function(){return m}))},aJjg:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 9" width="11" height="9" fill="none"><path stroke-width="2" d="M0.999878 4L3.99988 7L9.99988 1"/></svg>'},drKH:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 9" width="9" height="9"><path fill="currentColor" d="M9 4.5A4.5 4.5 0 0 1 4.5 9 4.5 4.5 0 0 1 0 4.5 4.5 4.5 0 0 1 4.5 0 4.5 4.5 0 0 1 9 4.5z"/><path fill="#fff" d="M4.768 1.527c.131 0 .243.047.334.141a.444.444 0 0 1 .141.33.461.461 0 0 1-.14.339.455.455 0 0 1-.335.137.468.468 0 0 1-.471-.475c0-.132.045-.244.137-.335a.455.455 0 0 1 .334-.137zm-.42 5.946v-3.67h-.591V3.16h1.357v4.314z"/></svg>'},fV0y:function(t,e,s){"use strict";var i=s("mrSG"),n=s("q1tI"),a=s("TSYQ"),r=s("0W35"),o=s("vCF3"),l=s("qibD");s("E9Pn");class c extends n.PureComponent{
render(){const t=this.props,{inputClassName:e,labelClassName:s}=t,r=Object(i.a)(t,["inputClassName","labelClassName"]),c=a(this.props.className,l.checkbox,{[l.reverse]:Boolean(this.props.labelPositionReverse),[l.baseline]:Boolean(this.props.labelAlignBaseline)}),d=a(l.label,s,{[l.disabled]:this.props.disabled});let u=null;return this.props.label&&(u=n.createElement("span",{className:d,title:this.props.title},this.props.label)),n.createElement("label",{className:c},n.createElement(o.a,Object.assign({},r,{className:e})),u)}}c.defaultProps={value:"on"};Object(r.b)(c);s.d(e,"a",(function(){return c}))},hZEc:function(t,e,s){"use strict";function i(t,e){const s=e.parentNode;if(!s)return;const i=e.nextSibling;i?s.insertBefore(t,i):s.appendChild(t)}function n(t){const e=function t(e){if(3===e.nodeType&&e.data.trim())return e;if(e.childNodes)for(let s=e.childNodes.length;s--;){const i=t(e.childNodes[s]);if(i)return i}return null}(t);if(e){const t=e.data;if(e.parentNode&&e.parentNode.tagName&&"sup"===e.parentNode.tagName.toLowerCase())return;const s=/^([^]*)(\S)(\s*)$/.exec(t);if(s){e.data=s[1];const t=document.createElement("sup");t.textContent=s[2],i(t,e),s[3]&&i(document.createTextNode(s[3]),t)}}}s.d(e,"a",(function(){return n}))},lt86:function(t,e,s){"use strict";var i=s("rp+F"),n={createLabel:function(t,e,s){return i.create("label",$.extend(s,{html:e,for:t}))},unbindContextMenu:function(t){t.contextMenu((function(t){return!1}))},offsetX:function(t,e){return t.width()+e.pageX},offsetY:function(t,e){return t.height()+e.pageY},isElementInViewport:function(t){"function"==typeof jQuery&&t instanceof jQuery&&(t=t[0]);var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},isVisible:function(t,e){"function"==typeof jQuery&&t instanceof jQuery&&(t=t[0]);e.percentX||(e.percentX=1),e.percentY||(e.percentY=1);for(var s,i=t.getBoundingClientRect(),n=[];t.parentElement;){var a=t.parentElement.getBoundingClientRect();e.ignoreZeroSizeElements&&(0===(s=a).width&&0===s.height)||n.push(a),t=t.parentElement}return n.every((function(t){var s=Math.min(i.right,t.right)-Math.max(i.left,t.left),n=Math.min(i.bottom,t.bottom)-Math.max(i.top,t.top),a=s/i.width*100,r=n/i.height*100;return a+.01>e.percentX&&r+.01>e.percentY}))},checkObjIsOutOfWindowX:function(t,e){var s=$(window).width()-n.offsetX(t,e);if(s<0){var i=e.pageX+s;return i>0?i:0}return e.pageX},checkObjIsOutOfWindowY:function(t,e){var s=$(window).height()-n.offsetY(t,e);if(s<0){var i=e.pageY+s;return i>0?i:0}return e.pageY},checkObjIsOutOfWindow:function(t,e){return{left:n.checkObjIsOutOfWindowX(t,e),top:n.checkObjIsOutOfWindowY(t,e)}},setAttr:function(t,e,s){return t.attr?t.attr(e,s):t[e]=s,t},removeAttr:function(t,e){return t.removeAttr?t.removeAttr(e):t.removeAttribute(e),t},notNull:function(t){return-1===$.inArray(t,[null,void 0,"false","null","undefined",0])},hideControl:function(t){return t.css({position:"absolute",top:-1e3,left:-1e3})}}
;t.exports=n},oOFq:function(t,e,s){t.exports={headerWrapper:"headerWrapper-a4UCnun8"}},okTM:function(t,e,s){t.exports={itemWrapper:"itemWrapper-3aagJYEB",value:"value-3aagJYEB",title:"title-3aagJYEB"}},qibD:function(t){t.exports=JSON.parse('{"checkbox":"checkbox-3xZUD-2M","reverse":"reverse-3xeTx96y","label":"label-cyItEVpF","baseline":"baseline-6TXKro4X"}')},"rp+F":function(t,e,s){"use strict";var i={renderAttributes:function(t){var e="";for(var s in t)t[s]&&(e+=" "+s+'="'+t[s]+'"');return e},create:function(t,e){var s=$(document.createElement(t));return e&&(e.html&&(s.html(e.html),delete e.html),s.attr(e)),s},validAttributes:["abbr","accept-charset","accept","accesskey","action","align","alink","alt","archive","axis","background","bgcolor","border","cellpadding","cellspacing","char","charoff","charset","checked","cite","class","classid","clear","code","codebase","codetype","color","cols","colspan","compact","content","coords","data","datetime","declare","defer","dir","disabled","enctype","face","for","frame","frameborder","headers","height","href","hreflang","hspace","http-equiv","id","ismap","label","lang","language","link","longdesc","marginheight","marginwidth","maxlength","media","method","multiple","name","nohref","noresize","noshade","nowrap","object","onblur","onchange","onclick","ondblclick","onfocus","onkeydown","onkeypress","onkeyup","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onreset","onselect","onsubmit","onunload","profile","prompt","readonly","rel","rev","rows","rowspan","rules","scheme","scope","scrolling","selected","shape","size","span","src","standby","start","style","summary","tabindex","target","text","title","type","usemap","valign","value","valuetype","version","vlink","vspace","width"],validAttribute:function(t){return-1!==jQuery.inArray(t,i.validAttributes)},cleanAttributes:function(t){return jQuery.each(t,(function(e,s){i.validAttribute(e)||delete t[e]})),t}};t.exports=i},sHKj:function(t,e,s){t.exports={title:"title-2VoDfDWK"}},v9OY:function(t,e,s){},vCF3:function(t,e,s){"use strict";s.d(e,"a",(function(){return l}));var i=s("q1tI"),n=s("TSYQ"),a=s("Iivm"),r=s("aJjg"),o=s("F0Qt");s("P4l+");function l(t){const e=n(o.box,o["intent-"+t.intent],{[o.check]:!Boolean(t.indeterminate),[o.dot]:Boolean(t.indeterminate),[o.noOutline]:-1===t.tabIndex}),s=n(o.wrapper,t.className);return i.createElement("span",{className:s,title:t.title},i.createElement("input",{id:t.id,tabIndex:t.tabIndex,className:o.input,type:"checkbox",name:t.name,checked:t.checked,disabled:t.disabled,value:t.value,autoFocus:t.autoFocus,role:t.role,onChange:function(){t.onChange&&t.onChange(t.value)},ref:t.reference}),i.createElement("span",{className:e},i.createElement(a.a,{icon:r,className:o.icon})))}},vqb8:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var i=s("q1tI");const n=t=>{const e="watchedValue"in t?t.watchedValue:void 0,s="defaultValue"in t?t.defaultValue:t.watchedValue.value(),[n,a]=Object(i.useState)(e?e.value():s);return Object(i.useEffect)(()=>{if(e){a(e.value())
;const t=t=>a(t);return e.subscribe(t),()=>e.unsubscribe(t)}return()=>{}},[e]),n}},w7G0:function(t,e,s){t.exports={counter:"counter-_obR0TD1",text:"text-_obR0TD1",count:"count-_obR0TD1"}},"y/Hr":function(t,e,s){t.exports={title:"title-1sK998aa",currency:"currency-1sK998aa",activeCurrency:"activeCurrency-1sK998aa",label:"label-1sK998aa",labelWrapper:"labelWrapper-1sK998aa",dropdown:"dropdown-1sK998aa",content:"content-1sK998aa"}},zAqB:function(t,e,s){"use strict";s.r(e);var i=s("YFKU"),n=s("q1tI"),a=s.n(n),r=s("i8i4"),o=s.n(r),l=s("Eyy1"),c=s("PT1i"),d=s("Kxc7"),u=s("pIOw"),h=s("4qhP"),p=s("5VQP");class _{constructor(t){this._delegates=t}subscribe(t,e,s){this._delegates.forEach(i=>i.subscribe(t,e,s))}unsubscribe(t,e){this._delegates.forEach(s=>s.unsubscribe(t,e))}unsubscribeAll(t){this._delegates.forEach(e=>e.unsubscribeAll(t))}}var b=s("N22A"),m=s("gWrr"),g=s("2uTr");function f(t){return 0!==t.qty||0!==t.longQty&&void 0!==t.longQty||0!==t.shortQty&&void 0!==t.shortQty}const v=[{label:$.t("Time"),property:"time",formatter:"localDate",className:"tv-am-data-table__cell--text tv-am-data-table__cell--text-nowrap"},{label:$.t("Title"),property:"title",className:"tv-am-data-table__cell--text tv-am-data-table__cell--text-nowrap"},{label:$.t("Text"),property:"text",className:"tv-am-data-table__cell--text"}];var C=s("b5Gw");class y{constructor(t,e,s,i){this._active=!1,this._created=!1,this._started=!1,this._fullUpdateDelegate=null,this._partialUpdateDelegate=null,this._deleteUpdateDelegate=null,this._noMoreEntries=!1,this._fullUpdateCancel=null,this._table=t,this._source=e,this._subscriptions=s,this._supportPagination=Boolean(i)}start(){this._started||(this._subscribeUpdates(),this._started=!0)}stop(){this._started&&(this._unsubscribeUpdates(),this.reset(),this._started=!1)}isStarted(){return this._started}setActive(t){Object(l.assert)(!t||this._started,"Should be started first"),this._active!==t&&(this._active=t,this._active&&!this._created&&this._fullUpdate(),this._table.setActive(t))}isActive(){return this._active}reset(){this._active?this._fullUpdate():(this._deleteRows(),this._created=!1)}destroy(){this._unsubscribeUpdates(),this._table.destroy()}table(){return this._table}_update(t){return!!this._created&&(this._table.addRow(t),!0)}_deleteRow(t){this._created&&this._table.deleteRow(t)}_deleteRows(){this._table.deleteRows(),this._created=!1}_fullUpdate(){if(this._deleteRows(),this._noMoreEntries=!1,!this._active)return Promise.resolve();this._fullUpdateCancel&&this._fullUpdateCancel();const t=Object(C.makeCancelable)(this._source());return this._fullUpdateCancel=t.cancel,t.promise.then(t=>{this._fullUpdateCancel=null,this._table.addRows(t),this._created=!0,this._onCreated()}).catch(t=>{if(!Object(C.isCancelled)(t))throw t})}_onCreated(){}_loadMoreIfBottomVisible(t){if(this._noMoreEntries)return;const e=this._table.rowsCount();if(t&&t.to===e-1){const t=this._table.rowIdByIndex(e-1);this._source(t).then(t=>{0!==t.length?this._table.addRows(t):this._noMoreEntries=!0})}}_subscribeUpdates(){
if(this._fullUpdateDelegate)throw new Error("should unsubscribe first");this._fullUpdateDelegate=this._subscriptions.fullUpdateDelegate,this._fullUpdateDelegate.subscribe(this,this._fullUpdate),this._partialUpdateDelegate=this._subscriptions.rowUpdateDelegate,this._partialUpdateDelegate.subscribe(this,this._update),this._supportPagination&&this._table.visibleRangeChanged.subscribe(this,this._loadMoreIfBottomVisible),this._subscriptions.rowDeleteDelegate&&(this._deleteUpdateDelegate=this._subscriptions.rowDeleteDelegate,this._deleteUpdateDelegate.subscribe(this,this._deleteRow))}_unsubscribeUpdates(){this._fullUpdateDelegate&&(this._fullUpdateDelegate.unsubscribe(this,this._fullUpdate),delete this._fullUpdateDelegate),this._partialUpdateDelegate&&(this._partialUpdateDelegate.unsubscribe(this,this._update),delete this._partialUpdateDelegate),this._deleteUpdateDelegate&&(this._deleteUpdateDelegate.unsubscribe(this,this._deleteRow),delete this._deleteUpdateDelegate),this._table.visibleRangeChanged.unsubscribe(this,this._loadMoreIfBottomVisible)}}var w=s("Y7w9"),O=s("lt86"),j=s.n(O);let x=t=>void 0!==t&&j.a.isVisible(t.element,{ignoreZeroSizeElements:!0});function S(t,e){return!x(t)}function F(t,e){return!x(e)}function N(t,e){if(t){if(x(e[t.from]))return t.from;if(x(e[t.to]))return t.to}return function t(e,s,i){if(i<s)return NaN;const n=s+(i-s+1>>1);if(x(e[n]))return n;const a=t(e,s,n-1);return isNaN(a)?t(e,n+1,i):a}(e,0,e.length-1)}function D(t,e){const s=t.querySelector(e);return Object(l.ensureNotNull)(s)}function E(t){return""===t||void 0===t}var U=s("txPx"),T=s("kcTO"),P=s("Vdly"),L=s("aIyQ"),k=s.n(L),I=s("qFKp"),R=s("hY0g"),A=s.n(R),M=s("vqb8"),V=s("tU7i"),B=s("82wv"),q=s("Iksw"),H=s("1J84"),W=s("+EG+"),z=s("8BmM"),Q=s("040A");function G(t,e){return e.visible&&t.push(e.id),t}const Y=new A.a(null).readonly();function J(t){const{items:e,onCheck:s,overlapManagerWV:r}=t,o=Object(M.a)({watchedValue:null!=r?r:Y}),[l,c]=Object(n.useState)(e.reduce(G,[]));return a.a.createElement(W.b.Provider,{value:o},a.a.createElement(B.b,{horizontalDropDirection:q.b.FromRightToLeft,horizontalAttachEdge:q.a.Right,className:z.menuButton,arrow:!1,isDrawer:I.CheckMobile.any(),content:a.a.createElement(V.b,{className:z.icon,title:Object(i.t)("Column setup"),icon:Q})},e.map(t=>a.a.createElement(H.a,{key:t.id,label:t.title,isChecked:l.includes(t.id),onClick:()=>{return e=t.id,s(e),void function(t){const e=[...l],s=e.indexOf(t);-1===s?e.push(t):e.splice(s,1),c(e)}(e);var e},isDisabled:1===l.length&&l[0]===t.id}))))}s("v9OY"),s("YFtr");const K=Object(U.getLogger)("Table");function X(t,e){return t<e?1:t>e?-1:0}function Z(t){return t||""}function tt(t){return"right"===(null==t?void 0:t.alignment)?"tv-am-data-table__cell--right-align":void 0}const et=(t,e)=>(e.isVisible||t.push(e.property),t),st=(t,e)=>(e.isVisibleOnMobile||t.push(e.property),t);function it(){const t=document.createElement("div");return t.className="tv-am-data-table__dropdown-button",t}class nt{constructor(t,e,s,i,n){var a;this.visibleRangeChanged=new k.a,this._data=[],
this._dataIndicesCache={},this._delayedUpdateInterval=null,this._updateVisibleRowsTimeout=null,this._highlightTimeoutIds={},this._option=s||{},this._priceFormatterFn=i,this._columns=e,this._container=t,this._overlapManager=n,this._visibleColumns=this._createVisibleStore(this._option.id),this._idx=P.getInt(this._option.id+".sort._idx",this._option.idx||0),this._asc=P.getBool(this._option.id+".sort._asc",this._option.asc||!1),this._formatters={},this._group=this._option.group,this._defaultPriceFormatter=new T.PriceFormatter,this._cleanHead(),this._columnsFilterContainer=it(),this._floatingColumnsFilterContainer=function(){const t=it();return t.classList.add("tv-am-data-table__dropdown-button--floating","tv-am-data-table__dropdown-button--hidden","js-floating-dropdown-button"),t}(),this._container.appendChild(this._floatingColumnsFilterContainer),this._idProperty=Z(this._option.idProperty||e[0].property),this._renderTable(t,this._option.className);const r=E(this._option.className)?"":`.${this._option.className} `;this._head=D(t,r+"thead"),this._body=D(t,r+"tbody"),this._initColumnsFilter(this._columnsFilterContainer,"desktop"),this._initColumnsFilter(this._floatingColumnsFilterContainer,"mobile");const o=D(this._head,"tr").children;this._columns.forEach((t,e)=>{const s=o[e];this._isCellHidden(e)&&s.classList.add("i-hidden"),this._isCellHiddenOnMobile(e)&&s.classList.add("i-hidden-mobile");const i=s.querySelectorAll(".tv-am-data-table__sortable");for(let n=0;n<i.length;n++){const t=i[n];t.addEventListener("click",s=>{s.preventDefault(),this._head.querySelectorAll(".tv-am-data-table__sortable--asc, .tv-am-data-table__sortable--desc").forEach(t=>t.classList.remove("tv-am-data-table__sortable--asc","tv-am-data-table__sortable--desc")),this._idx===e?this._asc=!this._asc:(this._idx=e,this._asc=!1),t.classList.add(this._asc?"tv-am-data-table__sortable--asc":"tv-am-data-table__sortable--desc"),P.setValue(this._option.id+".sort._idx",this._idx),P.setValue(this._option.id+".sort._asc",this._asc),this._sortViewImpl()})}}),null===(a=this._head.querySelector(`th:nth-child(${this._idx+1}) .tv-am-data-table__sortable`))||void 0===a||a.classList.add(this._asc?"tv-am-data-table__sortable--asc":"tv-am-data-table__sortable--desc"),this._sortTimeout=null,this._visibleRange=null,this._delayedData={},this._active=!1}setActive(t){this._active!==t&&(this._active=t,this._updateVisibleRows())}destroy(){this._sortTimeout&&clearTimeout(this._sortTimeout),this._delayedUpdateInterval&&clearInterval(this._delayedUpdateInterval),this._updateVisibleRowsTimeout&&clearTimeout(this._updateVisibleRowsTimeout)}addRow(t,e=!0){const s=t[this._idProperty],i=this._findIndexById(s);if(-1!==i)return void this._scheduleUpdateRow(i,t);let n,a=0;if(e)for(let c=this._data.length-1;c>=0;c--)-1===this._compare(t,this._data[c])&&(n=this._data[c],a=c);const r=function(t){const e=document.createElement("tr");return e.className="tv-am-data-table__stroke",E(t)||e.classList.add(...t.split(" ")),e
}(void 0!==t.type?"tv-am-data-table__stroke--hl tv-am-data-table__stroke--hl-"+t.type:void 0),o=Object.assign({element:r},t);void 0===o.priceFormatter&&this._resolveFormatter(o);const l=o.priceFormatter||this._defaultPriceFormatter;this._columns.forEach((t,e)=>{const s=t.property?o[t.property]:o,i=this._makeCell({column:t,index:e,value:s,priceFormatter:l,row:o});o.element.appendChild(i)}),n?(this._data.splice(a,0,o),n.element.insertAdjacentElement("beforebegin",o.element)):(this._data.push(o),this._body.appendChild(o.element)),this._clearDataIndicesCache(),this.updateVisibleContent()}updateRowById(t,e){const s=this._findIndexById(t);if(-1===s)return void K.logWarn(`Id ${t} not found`);const i=this._delayedData[t]||this._data[s];this._scheduleUpdateRow(s,Object.assign({},i,e))}addRows(t){t.forEach(t=>this.addRow(t,!1)),this._sortViewImpl()}deleteRow(t){var e;const s=this._findIndexById(t),i=this._data[s];-1!==s&&(null===(e=i.element.parentNode)||void 0===e||e.removeChild(i.element),this._data.splice(s,1),this.updateVisibleContent()),delete this._delayedData[t],this._clearDataIndicesCache()}updateVisibleContent(){this._updateVisibleRowsTimeout&&clearTimeout(this._updateVisibleRowsTimeout);this._updateVisibleRowsTimeout=setTimeout(()=>this._updateVisibleRows(),100)}deleteRows(){this._removeAllChildren(this._body),this._data=[],this._clearDataIndicesCache(),this._delayedData={},this._updateVisibleRows()}highlightRowById(t){const e=this._rowElementById(t);void 0!==e&&(clearTimeout(this._highlightTimeoutIds[t]),e.classList.remove("tv-am-data-table__stroke--highlighted"),e.classList.add("tv-am-data-table__stroke--highlighted"),this._highlightTimeoutIds[t]=setTimeout(()=>{e.classList.remove("tv-am-data-table__stroke--highlighted")},700))}setRowActiveById(t,e){const s=this.rowById(t);s&&this._setRowActive(s,e)}setRowActiveByFilter(t){this._data.forEach(e=>this._setRowActive(e,t(e)))}addFormatter(t,e){this._formatters[t]=e}addFormatters(t){t.forEach(t=>this.addFormatter(t.name,t.format))}isRowInViewport(t){if(!this._active)return!1;if(this._updateVisibleRowsTimeout&&this._updateVisibleRows(),!this._visibleRange)return!0;const e=this._findIndexById(t);return e>=this._visibleRange.from&&e<=this._visibleRange.to}setColumnAvailable(t,e){try{const s=this._getColumnIdx(t);this._visibleColumns[s].forceInvisible=!e,this._applyColumnVisibility(s)}catch(s){K.logWarn(`Column ${t} not found`)}}setRowLinkedByFilter(t){this._data.forEach(e=>this._setRowLinked(e,t(e)))}setRowLinkedById(t,e){const s=this.rowById(t);s&&this._setRowLinked(s,e)}rowById(t){const e=this._findIndexById(t);if(-1!==e)return this._data[e]}rowIdAtEvent(t){const e=t.srcElement||t.target,s=function(t){const e=[];let s=t.parentElement;for(;null!==s;)s.nodeType===Node.ELEMENT_NODE&&(e.push(s),s=s.parentElement);return e}(e);s.push(e);const i=this._data.find(t=>s.includes(t.element));if(void 0!==i)return i[this._idProperty]}rowsCount(){return this._data.length}rowIdByIndex(t){if(t<0||t>this.rowsCount()-1)throw new Error("No table entry for such index")
;return this._data[t][this._idProperty]}_setRowLinked(t,e){t&&t.isRowLinked!==e&&(t.isRowLinked=e,t.element.classList.toggle("tv-am-data-table__stroke--hl",e),t.element.classList.toggle("tv-am-data-table__stroke--hl-active",e))}_setRowActive(t,e){t&&t.isRowActive!==e&&(t.isRowActive=e,this._applyRowActivityToElement(t.element,!!t.isRowActive))}_resolveFormatter(t){this._priceFormatterFn&&this._priceFormatterFn(t).then(e=>{const s=this._findIndexById(t[this._idProperty]);-1!==s&&(this._data[s].priceFormatter=null!=e?e:void 0,this._updateRow(Object.assign({},this._data[s]),s,!0))}).catch(()=>{})}_updateVisibleRows(){this._updateVisibleRowsTimeout&&(clearTimeout(this._updateVisibleRowsTimeout),delete this._updateVisibleRowsTimeout);const t=this._visibleRange;0!==this._data.length&&this._active?this._visibleRange=function(t,e){const s=N(t,e);if(isNaN(s))return null;const i=Object(w.lowerbound)(e,1,S,0,s+1),n=Object(w.upperbound)(e,1,F,s+1,e.length)-1;return isNaN(i)||isNaN(n)?null:{from:Math.max(0,i),to:Math.min(n,e.length-1)}}(this._visibleRange,this._data):this._visibleRange=null,(!!t!=!!this._visibleRange||this._visibleRange&&(this._visibleRange.from!==Object(l.ensure)(t).from||this._visibleRange.to!==Object(l.ensure)(t).to))&&(K.logDebug(`${this._option.id} visible rows changed. Previous: from ${t&&t.from}, to ${t&&t.to}. New: from ${this._visibleRange&&this._visibleRange.from}, to ${this._visibleRange&&this._visibleRange.to}.`),this._forceUpdateDelayedData(this._visibleRange),this.visibleRangeChanged.fire(this._visibleRange)),this._showFloatingColumnsFilterIfNeeded()}_removeAllChildren(t){for(;t.firstChild;)t.removeChild(t.firstChild)}_scheduleUpdateRow(t,e){this._visibleRange&&t>=this._visibleRange.from-1&&t<=this._visibleRange.to+1?this._updateRow(e,t):(this._delayedData[e[this._idProperty]]=e,this._delayedUpdateInterval||(this._delayedUpdateInterval=setInterval(()=>this._forceUpdateDelayedData(null),5e3)))}_forceUpdateDelayedData(t){const e=Object.keys(this._delayedData);for(const s of e){const e=this._delayedData[s],i=this._findIndexById(e[this._idProperty]);-1!==i?(!t||i>=t.from-1&&i<=t.to+1)&&(this._updateRow(e,i),delete this._delayedData[s]):K.logWarn("Row has been removed")}this._delayedUpdateInterval&&0===Object.keys(this._delayedData).length&&(clearInterval(this._delayedUpdateInterval),delete this._delayedUpdateInterval)}_updateRow(t,e,s=!1){if(void 0===e||-1===e)throw Error("row not exist");const i=this._data[e];let n=!!this._group&&this._group(i)!==this._group(t);const a=i.priceFormatter||this._defaultPriceFormatter,r=Object.assign({},i);this._columns.forEach((e,o)=>{const l=Z(e.modificationProperty||e.property);if(s||l&&r[l]!==t[l]){o===this._idx&&(n=!0);const s=i[l];i[l]=t[l];const r=D(i.element,`td:nth-child(${o+1})`),c=e.property?i[e.property]:i,d=this._makeCell({column:e,index:o,value:c,priceFormatter:a,row:t,prevValue:e.highlightDiff?s:null,oldCell:r});r.replaceWith(d)}}),n&&this._sortView(),delete t.element,Object.assign(i,t)}
_makeCell({column:t,index:e,value:s,prevValue:i,priceFormatter:n,row:a,oldCell:r}){const o=function(t,e,s){const i=document.createElement("td");return i.className="tv-am-data-table__cell",i.setAttribute("data-label",t),e&&i.classList.add("tv-am-data-table__cell--hide-on-mobile"),E(s)||i.classList.add(...s.split(" ")),i}(t.label,!1===t.showOnMobile,tt(t));this._isCellHidden(e)&&o.classList.add("i-hidden"),this._isCellHiddenOnMobile(e)&&o.classList.add("i-hidden-mobile");let l=this._elementFormatterForColumn(t)({value:s,priceFormatter:n,row:a,prevValue:i,container:o});if("string"==typeof l&&(l=l.replace(/&nbsp;/g," ")),""===l&&o.classList.add("tv-am-data-table__cell--hide-on-mobile"),t.fixedWidth){const t=document.createElement("span");if(t.classList.add("js-fixedwidth","tv-am-data-table__cell--inlined"),void 0!==r){const e=r.querySelector(".js-fixedwidth");null!==e&&(t.style.minWidth=getComputedStyle(e).width)}l instanceof Element?t.appendChild(l):t.textContent=l,l=t}return!0===t.showTooltipOnCell&&(l=function(t,e,s){var i;const n=void 0!==t.property&&void 0!==t.tooltipProperty?null===(i=null==e?void 0:e[t.tooltipProperty])||void 0===i?void 0:i[t.property]:void 0;if(void 0===n)return s;let a;return s instanceof HTMLElement?a=s:(a=document.createElement("span"),a.textContent=s),a.setAttribute("title",n),a.classList.add("apply-common-tooltip","common-tooltip-html"),a}(t,a,l)),l instanceof Element?o.appendChild(l):o.textContent=l,o}_elementFormatterForColumn(t){return t.formatter&&this._formatters[t.formatter]?this._formatters[t.formatter]:this._extractValue}_rowElementById(t){var e;return null===(e=this.rowById(t))||void 0===e?void 0:e.element}_compare(t,e){const s=Z(this._columns[this._idx].sortProp||this._columns[this._idx].property);let i=Z(t[s]),n=Z(e[s]),a=0;if(this._hasGroups()){a=X(this._group(t),this._group(e))}if(a||(a=t.isTotalRow?1:e.isTotalRow?-1:0),a||(a=X(i,n),this._asc&&(a=-a)),!a){const s=Z(this._columns[0].sortProp||this._columns[0].property);i=Z(t[s]),n=Z(e[s]),a=X(i,n)}return a}_hasGroups(){return"function"==typeof this._group}_sortViewImpl(){this._data.sort(this._compare.bind(this));let t=null;for(let e=this._data.length-1;e>=0;e--){const s=this._data[e].element;t&&t.parentNode&&t.parentNode.insertBefore(s,t),t=s}this._clearDataIndicesCache()}_sortView(){this._sortTimeout||(this._sortTimeout=setTimeout(()=>{this._sortViewImpl(),this._sortTimeout=null},1e3))}_applyRowActivityToElement(t,e){t.classList.toggle("tv-am-data-table__stroke--grayed",!e)}_cleanHead(){const t=this._columns.length-1,e=this._columns[t];e.label.toLowerCase().includes("dropdown")&&(e.label="")}_renderTable(t,e){const s=this._columns.map(t=>{const e=Object.assign({className:tt(t)},t);return delete e.alignment,e}),i=s.length-1,n=s[i];""===n.label?(n.className="tv-am-data-table__cell--buttons-cell",n.element=this._columnsFilterContainer,n.notSortable=!0,this._visibleColumns[i].isAlwaysVisible=!0):(s.push({label:"",element:this._columnsFilterContainer,className:"tv-am-data-table__cell--buttons-cell",notSortable:!0,fixedWidth:!1,
property:"dropdown",formatter:""}),this._columns.push({label:"",formatter:"empty",notSortable:!0}),this._visibleColumns.push({isVisible:!0,isVisibleOnMobile:!0,isAlwaysVisible:!0,property:Z(n.property),label:""}));const a=function(t,e){const s=document.createElement("table");s.className="tv-am-data-table",E(e)||s.classList.add(...e.split(" "));const i=document.createElement("thead");i.className="tv-am-data-table__thead";const n=document.createElement("tr");n.className="tv-am-data-table__stroke",i.appendChild(n),s.appendChild(i);const a=document.createElement("tbody");a.className="tv-am-data-table__tbody",s.appendChild(a);for(const r of t){const t=document.createElement("th");t.className="tv-am-data-table__cell tv-am-data-table__cell--bold",E(r.className)||t.classList.add(...r.className.split(" "));const e=void 0!==r.element?r.element:document.createElement("span");e.classList.add("tv-am-data-table__cell-text"),e.classList.toggle("tv-am-data-table__sortable",!r.notSortable),void 0!==r.help&&(e.classList.add("apply-common-tooltip"),e.setAttribute("title",r.help)),e.innerHTML=r.label,t.appendChild(e),n.appendChild(t)}return s}(s,e);t.appendChild(a)}_showFloatingColumnsFilterIfNeeded(){this._floatingColumnsFilterContainer.classList.toggle("tv-am-data-table__dropdown-button--hidden",0===this._data.length)}_initColumnsFilter(t,e){const s={items:this._visibleColumns.filter(t=>!t.isAlwaysVisible&&!t.forceInvisible&&""!==t.label).map(t=>({id:t.property,title:t.label,visible:"desktop"===e?t.isVisible:t.isVisibleOnMobile})),onCheck:t=>this._handleCheck(t,e),overlapManagerWV:this._overlapManager};o.a.render(a.a.createElement(J,Object.assign({},s)),t)}_handleCheck(t,e){const s=this._getColumnIdx(t);this._toggleColumnVisibility(s,e)}_createVisibleStore(t){const e=[],s=this._columns.filter(t=>t.hideByDefault).map(t=>t.property),i=P.getJSON(t+".invisibleColumns",s),n=P.getJSON(t+".invisibleMobileColumns",i);for(const a of this._columns){const t=i.includes(a.property),s=n.includes(a.property);e.push({isVisible:!t,isVisibleOnMobile:!s,isAlwaysVisible:!0===a.notHideable,property:Z(a.property),label:a.label})}return e}_toggleVisibleState(t){this._visibleColumns[t].isVisible=!this._visibleColumns[t].isVisible,P.setJSON(this._option.id+".invisibleColumns",this._visibleColumns.reduce(et,[]))}_toggleMobileVisibleState(t){this._visibleColumns[t].isVisibleOnMobile=!this._visibleColumns[t].isVisibleOnMobile,P.setJSON(this._option.id+".invisibleMobileColumns",this._visibleColumns.reduce(st,[]))}_toggleColumnVisibility(t,e){"mobile"===e?this._toggleMobileVisibleState(t):this._toggleVisibleState(t),this._applyColumnVisibility(t)}_applyColumnVisibility(t){const e=D(this._head,`th:nth-child(${t+1})`),s=this._body.querySelectorAll(`td:nth-child(${t+1})`),i=this._visibleColumns[t],n=(i.isVisible||i.isAlwaysVisible)&&!i.forceInvisible,a=(i.isVisibleOnMobile||i.isAlwaysVisible)&&!i.forceInvisible;n?(e.classList.remove("i-hidden"),s.forEach(t=>t.classList.remove("i-hidden"))):(e.classList.add("i-hidden"),s.forEach(t=>t.classList.add("i-hidden"))),
a?(e.classList.remove("i-hidden-mobile"),s.forEach(t=>t.classList.remove("i-hidden-mobile"))):(e.classList.add("i-hidden-mobile"),s.forEach(t=>t.classList.add("i-hidden-mobile")))}_isCellHidden(t){const e=this._visibleColumns[t];return!e.isVisible||!!e.forceInvisible}_isCellHiddenOnMobile(t){const e=this._visibleColumns[t];return!e.isVisibleOnMobile||!!e.forceInvisible}_getColumnIdx(t){const e=this._visibleColumns.length;for(let s=0;s<e;s++)if(this._visibleColumns[s].property===t)return s;throw new Error("Unknown column")}_extractValue(t){return t.value}_findIndexById(t){const e=this._dataIndicesCache[t];if(void 0!==e)return e;const s=this._idProperty,i=this._data.findIndex(e=>e[s]===t);return this._dataIndicesCache[t]=i,i}_clearDataIndicesCache(){this._dataIndicesCache={}}}var at=s("w7G0");class rt extends class{constructor(t,e){this._active=!1,this._content=t,this._id=e.id,this._name=e.name,this._header=function(t){if(!t.headerCounter){const e=document.createElement("span");return e.textContent=t.name,e}const e=document.createElement("div");e.className=at.counter;const s=document.createElement("div");s.className=at.text,s.textContent=t.name;const i=document.createElement("div");return i.className=at.count+" js-header-count",i.textContent="0",e.appendChild(s),e.appendChild(i),e}(e),this._countElement=this._header.querySelector(".js-header-count")}setActive(t){this._active!==t&&(this._active=t,this._onActiveChanged(t))}isActive(){return this._active}reset(){}destroy(){}updateVisibleContent(){}header(){return this._header}content(){return this._content}name(){return this._name}id(){return this._id||this._name}contextItems(t){return[]}topline(){return null}_setCount(t){null!==this._countElement&&(this._countElement.innerHTML=String(t))}_onActiveChanged(t){}}{constructor(t,e,s){super(t,e),this._tableControllers=s}reset(){this._tableControllers.forEach(t=>t.reset()),super.reset()}destroy(){this._tableControllers.forEach(t=>t.destroy()),super.destroy()}updateVisibleContent(){this._tableControllers.forEach(t=>t.table().updateVisibleContent()),super.updateVisibleContent()}_onActiveChanged(t){this._tableControllers.forEach(e=>e.setActive(t))}}var ot=s("ivNn"),lt=s("EBrf"),ct=s("MbIA"),dt=s("4kQX"),ut=s("gQ5K");s("P5fv");var ht,pt=s("9uLv");!function(t){function e(t,e){return 0===t?e&&void 0!==e.neutral?e.neutral:pt.color.black70:t>0?e&&void 0!==e.up?e.up:pt.color.success:e&&void 0!==e.down?e.down:pt.color.danger}t.formatSign=e,t.formatDiff=function(t,s){return e(s-t)},t.domDifference=function(t,e,s=0,i="",n=""){function a(t){const e=document.createElement("span");return e.innerHTML=t,e}const r=document.createElement("div");if(!s)return r.appendChild(a(t)),r;const o=t+"",l=e+"";let c=null;if(o.length===l.length){for(let h=0;h<o.length;h++)if(o.charAt(h)!==l.charAt(h)){c=h;break}}else c=Number("0");if(null===c)return r.appendChild(a(o)),r;const d=a(o.substr(0,c)),u=document.createElement("span");return u.className=s<0?i:n,u.appendChild(a(o.substr(c))),r.appendChild(d),r.appendChild(u),r}}(ht||(ht={}))
;var _t=s("0W4x"),bt=s("ogJP"),mt=s("GH0z"),gt=s("hZEc"),ft=s("Ialn"),vt=s("8nqC");s("NluS"),s("e3/o"),s("IWXC");new Map;const Ct={Mobile:s("Jzno").mobile};var yt=s("1Jm2");const wt=void 0;function Ot(t,e){const i=document.createElement("div");i.className=yt.wrapper;const n=document.createElement("span");n.className="tv-circle-logo tv-circle-logo--medium",n.textContent=e[0],i.appendChild(n);const a=document.createElement("div");a.className=yt.info;const r=document.createElement("span");return r.className=yt.title,r.textContent=e,a.appendChild(r),i.appendChild(a),""===t||async function(t){if(void 0===wt)return{logoUrls:[]};const e=await wt.get(t),{resolveLogoUrls:i}=await s.e("logo-urls-resolver").then(s.bind(null,"NqdV"));return{logoUrls:i(e,vt.a.Medium),description:e.description}}(t).then(({logoUrls:t,description:e})=>{if(1===t.length?function(t,e){const s=new Image;s.className="tv-circle-logo tv-circle-logo--medium",s.src=t,s.addEventListener("load",()=>{e.replaceWith(s)})}(t[0],n):2===t.length&&function(t,e){const s=document.createElement("span");s.className="tv-circle-logo-pair tv-circle-logo-pair--medium";const i=new Image;i.className="tv-circle-logo-pair__logo tv-circle-logo-pair__logo--medium",i.src=t[0];const n=new Image;n.className="tv-circle-logo-pair__logo tv-circle-logo-pair__logo--medium",n.src=t[1],s.appendChild(i),s.appendChild(n),i.addEventListener("load",()=>{if(n.complete)return e.replaceWith(s);n.addEventListener("load",()=>{e.replaceWith(s)})})}(t,n),void 0!==e){const t=document.createElement("span");t.className=yt.description,t.textContent=e,a.appendChild(t)}}),i}function jt(t){const e=document.createElement("span");return e.textContent=t,e}const xt=new ct.a,St=new class{constructor(){this._dateFormatter=new ut.DateFormatter,this._timeFormatter=new dt.TimeFormatter}format(t){const e=new Date(t.dateOrDateTime);let s=this._dateFormatter.format(e);return t.hasTime&&(s+=" "+this._timeFormatter.format(e)),s}formatLocal(t){const e=new Date(t.dateOrDateTime);let s=this._dateFormatter.formatLocal(e);return t.hasTime&&(s+=" "+this._timeFormatter.formatLocal(e)),s}},Ft=new mt.PercentageFormatter;function Nt(t,e,s,i){const n={textPrevPrice:s?Object(lt.splitThousands)(t.format(s)):"",textPrice:e?Object(lt.splitThousands)(t.format(e)):""};return!Object(bt.isNumber)(s)&&i&&(s=e),Object(bt.isNumber)(e)&&Object(bt.isNumber)(s)&&(n.element=ht.domDifference(n.textPrice,n.textPrevPrice,e-s,"tv-am-data-table__red-text","tv-am-data-table__green-text")),n}function Dt(t,e){1===t?e.classList.add("tv-am-data-table__blue-text"):e.classList.add("tv-am-data-table__light-red-text")}const Et={3:"tv-am-data-table__grey-text",6:"tv-am-data-table__blue-text",5:"tv-am-data-table__red-text",2:"tv-am-data-table__green-text",1:"tv-am-data-table__red-green-text",4:void 0},Ut={name:"default",format:({value:t})=>t+""},Tt=[{name:"symbol",format:({value:t,row:e,container:s})=>{const i=e.symbol;return s.classList.add("tv-am-data-table__cell--symbol-cell","tv-am-data-table__cell--without-mobile-label"),
E(i)||s.addEventListener("click",()=>{window.matchMedia(Ct.Mobile).matches||c.linking.symbol.setValue(i)}),function(t,e){let s=null,i=null,n=null;const a=window.matchMedia(Ct.Mobile);return a.addEventListener("change",({matches:a})=>{if(a)return n=null!=n?n:Ot(t,e),void(null!==s&&s!==n&&(s.replaceWith(n),s=n));i=null!=i?i:jt(e),null!==s&&s!==i&&(s.replaceWith(i),s=i)}),a.matches?(n=null!=n?n:Ot(t,e),s=n,n):(i=null!=i?i:jt(e),s=i,i)}(e.symbol,t.replace(/\s\s+/g," "))}},{name:"symbolLink",format:({value:t,row:e,container:s})=>{const i=e.symbol;return E(i)||(s.addEventListener("click",()=>{window.matchMedia("screen and (max-width: 567px)").matches||c.linking.symbol.setValue(i)}),s.classList.add("tv-am-data-table__cell--symbol-cell")),t}},{name:"side",format:({value:t,container:e})=>{const s=Object(_t.l)(t);return Dt(t,e),s}},{name:"positionSide",format:({value:t,container:e})=>{const s=Object(_t.j)(t);return Dt(t,e),s}},{name:"text",format:({value:t,container:e})=>(e.classList.add("tv-am-data-table__cell--text"),t)},{name:"textNoWrap",format:({value:t,container:e})=>(e.classList.add("tv-am-data-table__cell--text tv-am-data-table__cell--text-nowrap"),t)},{name:"type",format:({value:t})=>Object(_t.i)(t)},{name:"formatPrice",format:({value:t,priceFormatter:e,prevValue:s})=>{const i=Nt(e,t,s);return i.element||Object(ft.forceLTRStr)(i.textPrice)}},{name:"formatPriceForexSup",format:({value:t,priceFormatter:e,prevValue:s})=>{var i;const n=e.hasForexAdditionalPrecision(),a=Nt(e,t,s,n),r=null===(i=null==a?void 0:a.element)||void 0===i?void 0:i.lastElementChild;return 0!==t&&null!=r&&n&&Object(gt.a)(r),a.element||Object(ft.forceLTRStr)(a.textPrice)}},{name:"status",format:({value:t,container:e})=>{const s=Object(h.k)(t),i=Et[t];return i&&e.classList.add(i),s}},{name:"date",format:({value:t})=>t?xt.format(new Date(t)):""},{name:"localDate",format:({value:t})=>t?xt.formatLocal(new Date(t)):""},{name:"dateOrDateTime",format:({value:t})=>t?St.format(t):""},{name:"localDateOrDateTime",format:({value:t})=>t?St.formatLocal(t):""},{name:"fixed",format:({value:t})=>isNaN(t)?"":Object(ft.forceLTRStr)(Math.abs(t||0)<.001?"0.00":Object(lt.splitThousands)((t||0).toFixed(2)))},{name:"variablePrecision",format:({value:t})=>isNaN(t)?"":Object(ft.forceLTRStr)(String(Object(ot.fixComputationError)(t)))},{name:"pips",format:({value:t})=>Object(ft.forceLTRStr)(Object(bt.isNumber)(t)?Math.abs(t)<.01?"0.0":Object(lt.splitThousands)(t.toFixed(1)):"")},{name:"integerSeparated",format:({value:t})=>Object(ft.forceLTRStr)(Object(bt.isNumber)(t)?Object(lt.splitThousands)(t.toFixed(0)):"")},{name:"formatQuantity",format:({value:t})=>Object(ft.forceLTRStr)(Object(bt.isNumber)(t)?Object(lt.splitThousands)(t):"")},{name:"profit",format:({value:t,container:e})=>{if(Object(bt.isNumber)(t)){const s=t&&Math.round(100*t)/100,i=s>0?"+":"",n=s<0?"tv-am-data-table__red-text":s>0?"tv-am-data-table__green-text":void 0;return void 0!==n&&e.classList.add(n),Object(ft.forceLTRStr)(i+Object(lt.splitThousands)((s||0).toFixed(2)))}return""}},{
name:"profitInInstrumentCurrency",format:({value:t,row:e,container:s})=>{if(Object(bt.isNumber)(t)){const i=t>0?"+":"",n=void 0!==e.currency?" "+e.currency:"";return s.classList.toggle("tv-am-data-table__red-text",t<0),s.classList.toggle("tv-am-data-table__green-text",t>0),Object(ft.forceLTRStr)(i+Object(lt.splitThousands)(t.toFixed(2))+n)}return""}},{name:"percentage",format:({value:t})=>Object(ft.forceLTRStr)(Object(bt.isNumber)(t)?Ft.format(t):"")},{name:"marginPercent",format:({value:t})=>isFinite(t)?t<.01?t+"%":Ft.format(t):"> 200%"},{name:"empty",format:()=>""}];class Pt extends rt{constructor(t,e,s){super(t,e,s),s.forEach(t=>t.table().addFormatters(e.formatters.concat(Tt)))}}var Lt=s("OOsH");function kt(t={}){const{withScroll:e=!1,relativePosition:s=!1}=t,i=document.createElement("div");return i.classList.add(Lt.tableContainer),i.classList.toggle(Lt.withScroll,e),i.classList.toggle(Lt.noScroll,!e),i.classList.toggle(Lt.relativePosition,s),i}class It extends Pt{constructor(t){const e=kt(),s={id:t.id,idProperty:"id"},i=new nt(e,t.columns,s,t.priceFormatterFn,t.overlapManager),n=new y(i,t.source,t.subscriptions);super(e,{id:t.id,name:t.title,headerCounter:!1,formatters:t.formatters},[n]),n.start()}}var Rt=s("BAjZ");class At extends rt{constructor(t){const e=1===t.tables.length,s=kt({withScroll:!e}),i=[];t.tables.forEach(n=>{const a=kt({relativePosition:!e,withScroll:!e});if(n.title){const t=function(t){const{title:e,relativePosition:s=!1}=t,i=document.createElement("h3");return i.className=Rt.title,i.classList.toggle(Rt.relativePosition,s),i.textContent=e,i}({title:n.title,relativePosition:e});a.appendChild(t)}const r=new nt(a,n.columns,n.options,n.priceFormatterFn,t.overlapManager);if(s.appendChild(a),!e){Object(l.ensureNotNull)(a.querySelector(".tv-am-data-table")).style.marginTop="8px";Object(l.ensureNotNull)(a.querySelector(".js-floating-dropdown-button")).classList.add("tv-am-data-table__dropdown-button--sticky")}const o=new y(r,n.source,n.subscriptions,n.flags&&n.flags.supportPagination);i.push(o),r.addFormatters(n.formatters.concat(Tt)),o.start()});const n={id:t.id,name:t.title,headerCounter:!1};super(s,n,i)}}var Mt=s("hbEN"),Vt=s("14a3");class Bt{constructor(t,e,s,i){this.filterFullUpdateDelegate=new k.a,this.filterObjectUpdateDelegate=new k.a,this.filterObjectDeleteDelegate=new k.a,this._filteredObjects=[],this._requestsCount=0,this._started=!1,this._objectsRequest=null,this._source=t,this._objectUpdateDelegate=e,this._objectDeleteDelegate=s,this._fullUpdateDelegate=i}start(){this._requestsCount++;const t=this._source,e=this._objectsRequest||Promise.resolve([]);this._objectsRequest=e.then(()=>t()).then(t=>{const e=t.filter(t=>this._satisfy(t));return this._requestsCount--,this._requestsCount||(this.stop(),this._filteredObjects=e,this._objectsRequest=null,this._objectUpdateDelegate.subscribe(this,this._onObjectUpdated),this._objectDeleteDelegate&&this._objectDeleteDelegate.subscribe(this,this._onObjectDeleted),this._fullUpdateDelegate.subscribe(this,this._onFullUpdate),this._started=!0),e.slice(0)})}
stop(){this._objectUpdateDelegate.unsubscribe(this,this._onObjectUpdated),this._fullUpdateDelegate.unsubscribe(this,this._onFullUpdate),this._objectDeleteDelegate&&this._objectDeleteDelegate.unsubscribe(this,this._onObjectDeleted),this._filteredObjects=[],this._started=!1}isStarted(){return this._started}filterSource(){return this._objectsRequest?this._objectsRequest:Promise.resolve(this._filteredObjects.slice(0))}_satisfy(t){throw new Error("should be implemented")}_onFullUpdate(){this.stop(),this.start(),this.filterFullUpdateDelegate.fire()}_onObjectDeleted(t){const e=this._filteredObjects.find(e=>e.id===t);e&&this.filterObjectDeleteDelegate.fire(e.id)}_onObjectUpdated(t){const e=this._filteredObjects.find(e=>e.id===t.id),s=e?this._filteredObjects.indexOf(e):-1;this._satisfy(t)?(e?this._filteredObjects[s]=t:this._filteredObjects.push(t),this.filterObjectUpdateDelegate.fire(t)):e&&(this.filterObjectDeleteDelegate.fire(e.id),this._filteredObjects.splice(s,1))}}var qt=s("CRS4"),Ht=s("BhuR"),Wt=s("drKH");function $t(t){const e=document.createElement("div");return e.innerHTML=t.trim(),e.childNodes[0]}function zt(t,e,s,i,n){const a=document.createElement("span");if(void 0!==n){const t=function(t){return $t(`\n\t\t<span class="apply-common-tooltip tv-am-data-table__button tv-am-data-table__information-button ${t.type}" title="${t.text}">\n\t\t\t${Wt}\n\t\t</span>`)}(n);a.appendChild(t)}if(s){const t=function(t,e){const s=$t(`\n\t\t<span class="tv-am-data-table__button tv-am-data-table__edit-button" title="${e||window.t("Edit")}">\n\t\t\t${qt}\n\t\t</span>`);return s.addEventListener("click",e=>t()),s}(s,i);a.appendChild(t)}if(t){const s=function(t,e){const s=$t(`\n\t\t<span class="tv-am-data-table__button tv-am-data-table__close-button" title="${e||window.t("Close",{context:"position"})}">\n\t\t\t${Ht}\n\t\t</span>`);return s.addEventListener("click",e=>t()),s}(t,e);a.appendChild(s)}return a}class Qt extends y{constructor(t,e,s){super(t,e,s),this._onLinkingBound=this._onLinking.bind(this),c.linking.proSymbol.subscribe(this._onLinkingBound)}destroy(){c.linking.proSymbol.unsubscribe(this._onLinkingBound),super.destroy()}_update(t){if(!super._update(t))return!1;const e=c.linking.proSymbol.value();return this.table().setRowLinkedById(t.id,e===t.symbol),!0}_onCreated(){this.table().setRowLinkedByFilter(t=>t.symbol===c.linking.proSymbol.value())}_onLinking(t){this.table().setRowLinkedByFilter(e=>e.symbol===t)}}var Gt=s("UW4h");function Yt(t,e){const s=document.createElement("div");s.className="tv-tabs tv-tabs--no-border tv-tabs--secondary-active tv-tabs--no-margin tv-tabs--semi-compact";for(const i of t){const t=document.createElement("div");t.className="tv-tabs__tab "+i.id;const n=document.createElement("div");n.className="tv-tabs__wrap";const a=document.createElement("div");a.className=Gt.counter;const r=document.createElement("div");r.className=Gt.text,r.textContent=i.name;const o=document.createElement("div");o.className=`${Gt.count} js-counter-category-${i.id} js-counter-count`;const l=null==e?void 0:e[i.id]
;void 0!==l&&o.classList.add(l),o.textContent="0",a.appendChild(r),a.appendChild(o),n.appendChild(a),t.appendChild(n),s.appendChild(t)}return s}class Jt{constructor(t,e,s,i){this._source=t,this._totalCount=0,this._activeCount=0,this._orderUpdateDelegate=e,this._fullUpdateDelegate=s,this._possibleStatuses=i,this._statusCount=this._emptyStatuses(),this.countChanged=new k.a,this._recalcCountsDelayed=Object(Mt.default)(this._recalcCounts.bind(this),100)}start(){this._orderUpdateDelegate.subscribe(this,this._recalcCountsDelayed),this._fullUpdateDelegate.subscribe(this,this._recalcCountsDelayed),this._recalcCounts()}stop(){this._statusCount=this._emptyStatuses(),this._orderUpdateDelegate.unsubscribe(this,this._recalcCountsDelayed),this._fullUpdateDelegate.unsubscribe(this,this._recalcCountsDelayed)}_emptyStatuses(){const t={};return this._possibleStatuses.forEach(e=>{t[e]=0}),t}_recalcCounts(){const t=this._emptyStatuses();this._source().then(e=>{let s=0;e.forEach(e=>{const i=t[e.status];void 0!==i&&(t[e.status]=i+1,6!==e.status&&3!==e.status||s++)}),this._possibleStatuses.forEach(e=>{t[e]!==this._statusCount[e]&&(this._statusCount[e]=t[e],this.countChanged.fire(e,Object(l.ensureDefined)(this._statusCount[e])))}),this._totalCount!==e.length&&(this._totalCount=e.length,this.countChanged.fire(0,this._totalCount)),this._activeCount!==s&&(this._activeCount=s,this.countChanged.fire(-1,this._activeCount))})}}class Kt extends Bt{constructor(t,e,s,i){super(t,e,s,i),this._filterStatus=null}setFilterStatus(t){this._filterStatus=t,this.isStarted()&&(this.stop(),this.start())}filterStatus(){return this._filterStatus}_satisfy(t){return!this._filterStatus||t.status===this._filterStatus}}class Xt extends Bt{constructor(t,e,s,i,n){super(t,e,s,i),this._functor=n}_satisfy(t){return this._functor(t)}}class Zt{constructor(t,e,s){this._orders=[],this._source=t,this._rowUpdateDelegate=e,this._fullUpdateDelegate=s,this._orders=[],this.newStatusDelegate=new k.a}start(){this._source().then(t=>{this._orders=t.slice(0),this._rowUpdateDelegate.subscribe(this,this._onRowUpdated),this._fullUpdateDelegate.subscribe(this,this._onFullUpdate)})}stop(){this._fullUpdateDelegate.unsubscribe(this,this._onFullUpdate),this._rowUpdateDelegate.unsubscribe(this,this._onRowUpdated),this._orders=[]}_onFullUpdate(){this.stop(),this.start()}_onRowUpdated(t){const e=this._orders.find(e=>e.id===t.id);e&&e.status===t.status||(this.newStatusDelegate.fire(t),e?e.status=t.status:this._orders.push(Object.assign({},t)))}}class te extends Qt{constructor(t,e,s,i,n){super(t,e,s),this._filterStatusGetter=i,this._isAlwaysActive=n}fullUpdate(){return this._fullUpdate()}_update(t){return!!super._update(t)&&(this.table().setRowActiveById(t.id,this._filterByStatus(t.status)),!0)}_onCreated(){super._onCreated(),this.table().setRowActiveByFilter(t=>this._filterByStatus(t.status))}_filterByStatus(t){return this._isAlwaysActive||null!==this._filterStatusGetter()||Object(h.h)(t)}}const ee={"orderstatus-working":Gt.blue,"orderstatus-inactive":Gt.grey,"orderstatus-filled":Gt.green,
"orderstatus-cancelled":Gt.orange,"orderstatus-rejected":Gt.red};class se extends rt{constructor(t){const e=t.formatters||[],s=new Xt(t.source,t.subscriptions.rowUpdateDelegate,null,t.subscriptions.fullUpdateDelegate,t.filter),n=new Jt(s.filterSource.bind(s),s.filterObjectUpdateDelegate,s.filterFullUpdateDelegate,t.possibleOrderStatuses),a=new Kt(s.filterSource.bind(s),s.filterObjectUpdateDelegate,s.filterObjectDeleteDelegate,s.filterFullUpdateDelegate),r=t.subscriptions.fullUpdateDelegate;t.source=a.filterSource.bind(a),t.subscriptions.rowUpdateDelegate=a.filterObjectUpdateDelegate,t.subscriptions.rowDeleteDelegate=a.filterObjectDeleteDelegate,t.subscriptions.fullUpdateDelegate=a.filterFullUpdateDelegate;const o=kt(),c=Object.assign({id:t.tableId,className:"orders",group:t=>+Object(h.h)(t.status),idProperty:"id"},t.tableOptions),d=[...t.columns,{label:"",formatter:"orderSettings",notSortable:!0,modificationProperty:"status",showOnMobile:!1}],p=new nt(o,d,c,t.priceFormatterFn,t.overlapManager),_={id:t.id,name:t.title,headerCounter:t.headerCounter},m=new te(p,t.source,t.subscriptions,()=>this._ordersFilter.filterStatus(),t.isAlwaysActive);super(o,_,[m]),this._ordersTable=m,this._globalFullUpdateDelegate=r,this._statusWatcher=new Zt(s.filterSource.bind(s),s.filterObjectUpdateDelegate,s.filterFullUpdateDelegate),this._orderPreFilter=s,this._ordersFilter=a,this._statusesCount=n,this._activeCount=0,this._highlightChanges=t.highlightChanges,this._possibleOrderStatuses=t.possibleOrderStatuses,this._columns=t.columns,this._pendingNewOrdersByStatuses={},this._closeFn=e=>(Object(l.ensureNotNull)(Object(b.tradingService)()).trackEvent("Orders Page","Cancel Order"),t.cancelFn(e)),this._editFn=null!==t.modifyFn?(e,s,i,n)=>(Object(l.ensureNotNull)(Object(b.tradingService)()).trackEvent("Orders Page","Edit Order"),Object(l.ensureNotNull)(t.modifyFn)(e,s,i,n)):null;const f={name:"orderSettings",format:({value:e,container:s})=>{s.classList.add("tv-am-data-table__cell--buttons-cell");const n=e;if(Object(h.h)(n.status)){const e=this._closeFn?()=>this._closeFn(n.id):null,s=this._editFn&&(e=>{var s;return e.stopType!==Vt.c.TrailingStop||(null===(s=t.configFlags)||void 0===s?void 0:s.supportTrailingStop)})(n)?()=>Object(l.ensureNotNull)(this._editFn)(n):null;return zt(e,Object(i.t)("Cancel"),s,Object(g.appendEllipsis)(Object(i.t)("Modify Order")),n.message)}return zt(null,"",null)}};p.addFormatters([...Tt,f,...e]);const v=this._possibleOrderStatuses.map(this._translateStatus);this._filter=Yt([{id:"status-all",name:Object(i.t)("All")}].concat(v),ee),this._filterTabs=new u.a(this._filter,void 0,{noSlider:!0}),this._subscribeUpdates()}destroy(){this._unsubscribeUpdates(),super.destroy()}contextItems(t){const e=[],s=this._ordersTable.table().rowIdAtEvent(t);if(!s)return e;const n=this._ordersTable.table().rowById(s);return n?(null!==this._editFn&&e.push({text:Object(g.appendEllipsis)(Object(i.t)("Modify Order")),enabled:Object(h.h)(n.status),action:()=>Object(l.ensureNotNull)(this._editFn)(n)}),e.push({text:Object(i.t)("Cancel Order"),
enabled:Object(h.h)(n.status),action:()=>this._closeFn(s)}),e):e}topline(){return this._filter}get filter(){return this._filter}_subscribeUpdates(){this._ordersTable.start(),this._orderPreFilter.start(),this._ordersFilter.start(),this._statusesCount.start(),this._statusWatcher.start(),this._statusWatcher.newStatusDelegate.subscribe(this,this._onNewStatus),this._filterTabs.tabChanged.subscribe(this,this._onFilterChanged),this._statusesCount.countChanged.subscribe(this,this._onCountChanged),this._globalFullUpdateDelegate.subscribe(this,this._onGlobalFullUpdate)}_unsubscribeUpdates(){this._statusWatcher.newStatusDelegate.unsubscribe(this,this._onNewStatus),this._statusWatcher.stop(),this._ordersFilter.stop(),this._statusesCount.stop(),this._ordersTable.stop(),this._filterTabs.tabChanged.unsubscribe(this,this._onFilterChanged),this._statusesCount.countChanged.unsubscribe(this,this._onCountChanged),this._globalFullUpdateDelegate.unsubscribe(this,this._onGlobalFullUpdate)}_onGlobalFullUpdate(){this._pendingNewOrdersByStatuses={},this._updateFiltersActiveState()}_count(){this._setCount(this._activeCount)}_translateStatus(t){const e=Object(h.k)(t),s=e[0].toUpperCase()+e.slice(1);return{id:ie(t),name:s}}_onFilterChanged(t){const e=0===t?null:this._possibleOrderStatuses[t-1];Object(l.ensureNotNull)(Object(b.tradingService)()).trackEvent("Orders Page","Order status filter",null!==e?Object(h.k)(e):void 0),this._ordersFilter.setFilterStatus(e),this._columns.filter(t=>t.hasOwnProperty("supportedStatusFilters")).forEach(t=>{void 0!==t.property&&void 0!==t.supportedStatusFilters&&this._ordersTable.table().setColumnAvailable(t.property,t.supportedStatusFilters.includes(null!==e?e:0))}),this._ordersTable.fullUpdate().then(()=>{if(e){const t=this._pendingNewOrdersByStatuses[e];void 0!==t&&t.forEach(t=>this._ordersTable.table().highlightRowById(t))}this._removeActiveState()})}_onCountChanged(t,e){const s=this._filter.querySelectorAll(".js-counter-count");if(0===t)return void(s[0].textContent=String(e));if(-1===t&&this._activeCount!==e)return this._activeCount=e,void this._count();const i=this._possibleOrderStatuses.indexOf(t);-1!==i&&(s[i+1].textContent=String(e))}_onNewStatus(t){var e;4!==t.status&&(this._possibleOrderStatuses.forEach(e=>{const s=this._pendingNewOrdersByStatuses[e];if(void 0!==s){const e=s.indexOf(t.id);-1!==e&&s.splice(e,1)}}),this._pendingNewOrdersByStatuses[t.status]||(this._pendingNewOrdersByStatuses[t.status]=[]),null===(e=this._pendingNewOrdersByStatuses[t.status])||void 0===e||e.push(t.id),setTimeout(()=>{var e;const s=this._ordersFilter.filterStatus();let i=!1;s&&s!==t.status||this._ordersTable.table().isRowInViewport(t.id)&&(this._ordersTable.table().highlightRowById(t.id),i=!0),i||this._pendingNewOrdersByStatuses[t.status]&&-1!==(null===(e=this._pendingNewOrdersByStatuses[t.status])||void 0===e?void 0:e.indexOf(t.id))&&this._updateFiltersActiveState(),this._scheduleRemoveActiveState()},0))}_scheduleRemoveActiveState(){this._activeStateRemovalScheduled||(this._activeStateRemovalScheduled=!0,
setTimeout(()=>this._removeActiveState(),1e3))}_removeActiveState(){this._activeStateRemovalScheduled=!1;const t=this._ordersFilter.filterStatus();t?this._pendingNewOrdersByStatuses[t]=[]:this._pendingNewOrdersByStatuses={},this._updateFiltersActiveState()}_updateFiltersActiveState(){this._highlightChanges&&this._possibleOrderStatuses.forEach(t=>{var e,s;const i=this._pendingNewOrdersByStatuses[t]&&(null===(e=this._pendingNewOrdersByStatuses[t])||void 0===e?void 0:e.length);null===(s=this._filter.querySelector(".js-counter-category-"+ie(t)))||void 0===s||s.classList.toggle("i-active",!!i)})}}function ie(t){switch(t){case 2:return"orderstatus-filled";case 1:return"orderstatus-cancelled";case 6:return"orderstatus-working";case 3:return"orderstatus-inactive";case 4:return"orderstatus-placing";case 5:return"orderstatus-rejected";default:return"orderstatus-unknown"}}var ne=s("6yro");class ae{constructor(t,e,s){this._totalCount=0,this._recalcCountsDelayed=Object(Mt.default)(this._recalcCounts.bind(this),100),this._source=t,this._rowUpdateDelegate=e,this._fullUpdateDelegate=s,this.countChanged=new k.a}start(){this._rowUpdateDelegate.subscribe(this,this._recalcCountsDelayed),this._fullUpdateDelegate.subscribe(this,this._recalcCountsDelayed),this._recalcCounts()}stop(){this._rowUpdateDelegate.unsubscribe(this,this._recalcCountsDelayed),this._fullUpdateDelegate.unsubscribe(this,this._recalcCountsDelayed)}_recalcCounts(){this._source().then(t=>{const e=t.filter(t=>f(t));this._totalCount!==e.length&&(this._totalCount=e.length,this.countChanged.fire(this._totalCount))})}}function re(t){const{id:e,content:s,source:i,subscriptions:n,columns:a,priceFormatterFn:r,overlapManager:o}=t,l=new nt(s,a,{id:e,className:"positions",idProperty:"id"},r,o);return new oe(l,i,n)}class oe extends Qt{_update(t){return!!super._update(t)&&(f(t)||this._deleteRow(t.id),!0)}}class le extends rt{constructor(t){const e=function(){const t=document.createElement("div");return t.classList.add(ne.pageContainer),t}(),s={id:"positions",name:Object(i.t)("Positions"),headerCounter:!0},n=kt(),a=[...t.positions.columns,{label:"",formatter:"posSettings",notSortable:!0,modificationProperty:"status",showOnMobile:!1}],r=re({id:t.brokerId+".positions",content:n,source:t.positions.source,subscriptions:Object.assign({},t.positions.subscriptions,{fullUpdateDelegate:t.fullUpdateDelegate}),columns:a,priceFormatterFn:t.priceFormatterFn,overlapManager:t.overlapManager});e.appendChild(n);const o=[r];let c=null,d=null;if(t.trades){const s=[...t.trades.columns,{label:"",formatter:"tradeSettings",notSortable:!0,modificationProperty:"canBeClosed",showOnMobile:!1}];c=kt(),d=re({id:t.brokerId+".trades",content:c,source:t.trades.source,subscriptions:Object.assign({},t.trades.subscriptions,{fullUpdateDelegate:t.fullUpdateDelegate}),columns:s,priceFormatterFn:t.priceFormatterFn,overlapManager:t.overlapManager}),e.appendChild(c),o.push(d)}super(e,s,o),this._positionsTableContainer=n,this._tradesTableContainer=c,this._positionsTable=r,this._tradesTable=d;const u=t.formatters||[]
;this._fullUpdateDelegate=t.fullUpdateDelegate,this._posSubscriptions=t.positions.subscriptions,this._checkSupportTrades=t.checkSupportTrades,this._storeFunctions(t);const h={name:"posSettings",format:t=>{t.container.classList.add("tv-am-data-table__cell--buttons-cell");const e=this._closePositionFn?this._closePositionFn.bind(null,t.row.id):null,s=this._editPositionFn?this._editPositionFn.bind(null,t.row.id):null;return zt(e,Object(i.t)("Close",{context:"position"}),s,Object(g.appendEllipsis)(Object(i.t)("Protect Position")),t.row.message)}};if(r.table().addFormatters([h].concat(Tt).concat(u)),t.trades){const e={name:"tradeSettings",format:t=>{t.container.classList.add("tv-am-data-table__cell--buttons-cell");const e=this._closeTradeFn&&t.row.canBeClosed?this._closeTradeFn.bind(null,t.row.id):null,s=this._editTradeFn?this._editTradeFn.bind(null,t.row.id):null;return zt(e,Object(i.t)("Close",{context:"position"}),s,Object(g.appendEllipsis)(Object(i.t)("Protect Position")))}};Object(l.ensure)(d).table().addFormatters([e].concat(Tt).concat(u)),this._tradesCounter=new ae(t.trades.source,t.trades.subscriptions.countUpdateDelegate,this._fullUpdateDelegate)}else this._tradesCounter=null;this._positionsCounter=new ae(t.positions.source,this._posSubscriptions.countUpdateDelegate,this._fullUpdateDelegate),this._constructFilter(),this._subscribeUpdates();const p=P.getInt("Trading.PositionsTable.Filter",0),_=this._checkSupportTrades()?p:1;this._filterTabs.setActivePage(_),this._selectPage(_)}contextItems(t){const e=this._activeTableController().table(),s=e.rowIdAtEvent(t);if(!s)return[];const n=Object(l.ensureDefined)(e.rowById(s)),a=[];return 0===this._filterTabs.index()?(this._editTradeFn&&a.push({text:Object(g.appendEllipsis)(Object(i.t)("Protect Position")),action:this._editTradeFn.bind(null,s)}),this._closeTradeFn&&n.canBeClosed&&a.push({text:Object(i.t)("Close Position"),action:this._closeTradeFn.bind(null,s)})):(this._editPositionFn&&a.push({text:Object(g.appendEllipsis)(Object(i.t)("Protect Position")),action:this._editPositionFn.bind(null,s)}),this._closePositionFn&&a.push({text:Object(i.t)("Close Position"),action:this._closePositionFn.bind(null,s)}),this._reversePositionFn&&a.push({text:Object(i.t)("Reverse Position"),action:this._reversePositionFn.bind(null,s)})),a}topline(){return this._checkSupportTrades()?this._filter:null}destroy(){this._unsubscribeUpdates(),super.destroy()}_onActiveChanged(t){t?this._activeTableController().setActive(!0):(this._positionsTable.setActive(!1),this._tradesTable&&this._tradesTable.setActive(!1))}_onPositionsCountChanged(t){this._setCount(t),this._setTabCount(1,t)}_onTradesCountChanged(t){this._setTabCount(0,t)}_setTabCount(t,e){this._filter.querySelectorAll(".js-counter-count")[t].innerHTML=String(e)}_activeTableController(){return this._checkSupportTrades()&&0===this._filterTabs.index()?Object(l.ensure)(this._tradesTable):this._positionsTable}_subscribeUpdates(){this._positionsCounter.start(),this._positionsCounter.countChanged.subscribe(this,this._onPositionsCountChanged),
this._tradesCounter&&(this._tradesCounter.start(),this._tradesCounter.countChanged.subscribe(this,this._onTradesCountChanged)),this._filterTabs.tabChanged.subscribe(this,this._selectPage),this._fullUpdateDelegate.subscribe(this,this._showFilterIfNeeded)}_unsubscribeUpdates(){this._positionsCounter.stop(),this._positionsCounter.countChanged.unsubscribe(this,this._onPositionsCountChanged),this._tradesCounter&&(this._tradesCounter.stop(),this._tradesCounter.countChanged.unsubscribe(this,this._onTradesCountChanged)),this._filterTabs.tabChanged.unsubscribe(this,this._selectPage),this._fullUpdateDelegate.unsubscribe(this,this._showFilterIfNeeded)}_constructFilter(){this._filter=Yt([{id:"type-individual",name:Object(i.t)("Individual Positions")},{id:"type-net",name:Object(i.t)("Net Positions")}]),this._filterTabs=new u.a(this._filter,void 0,{noSlider:!0})}_showFilterIfNeeded(){this.isActive()&&this._checkSupportTrades()?this._filter.classList.remove("js-hidden"):(this._filter.classList.add("js-hidden"),this._tradesTable&&this._tradesTable.stop())}_selectPage(t){const e=1===t;e?this._positionsTable.start():this._tradesTable&&this._tradesTable.start(),this._positionsTableContainer.classList.toggle("js-hidden",!e),this._tradesTableContainer&&this._tradesTableContainer.classList.toggle("js-hidden",e),this._positionsTable.setActive(e),this._tradesTable&&this._tradesTable.setActive(!e),P.setValue("Trading.PositionsTable.Filter",t)}_storeFunctions(t){const e=Object(l.ensure)(Object(b.tradingService)()),s="Positions Page",i=t.positions.closeFn;this._closePositionFn=i?t=>(e.trackEvent(s,"Close Position"),i(t)):null;const n=t.positions.editFn;this._editPositionFn=n?t=>(e.trackEvent(s,"Edit Position"),n(t)):null;const a=t.positions.reverseFn;this._reversePositionFn=a?t=>(e.trackEvent(s,"Reverse Position"),a(t)):null;const r=t.trades;if(r){const t=r.closeFn;this._closeTradeFn=t?i=>(e.trackEvent(s,"Close Trade"),t(i)):null;const i=r.editFn;this._editTradeFn=i?t=>(e.trackEvent(s,"Edit Trade"),i(t)):null}}}var ce=s("okTM");function de(t){const{wValue:e,formatter:s,text:i}=t,r=Object(n.useRef)(null),o=Object(M.a)({watchedValue:e}),l=Object(n.useMemo)(()=>function(t,e=Ut){for(const s of Tt)if(s.name===t)return s;return e}(null!=s?s:"fixed"),[s]),[c,d]=Object(n.useState)(void 0);return Object(n.useEffect)(()=>{null!==r.current&&d(function(t,e,s){return t.format({value:e,row:{},container:s}).toString().replace(/&nbsp;/g," ")}(l,o,r.current))},[o]),a.a.createElement("div",{className:ce.itemWrapper},a.a.createElement("div",{className:ce.value,ref:r},c),void 0!==c&&a.a.createElement("div",{className:ce.title},i))}var ue=s("Ipov");function he(t){const{summaryFields:e}=t;return a.a.createElement("div",{className:ue.wrapper},e.map(t=>a.a.createElement(de,Object.assign({},t,{key:t.text}))))}var pe=s("Z4QD"),_e=s("oOFq");function be(t){return a.a.createElement("div",{className:_e.headerWrapper},0!==t.mode&&a.a.createElement(pe.AccountManagerHeaderDropdowns,{brokerDropdownProps:t.brokerDropdownProps,accountDropdownProps:t.accountDropdownProps
}),a.a.createElement(he,{summaryFields:t.summaryFields}))}var me=s("Ib6K");s.d(e,"makeAccountManagerHeaderDropdownsProps",(function(){return ye})),s.d(e,"AccountManager",(function(){return we}));const ge=[6,3,2,1,5],fe=[2,1,5];function ve(t,e){if(void 0===e||void 0===t)return{};const s=function(t,e){let s=t.findIndex(t=>t.id===e);return-1===s&&(s=t.findIndex(t=>t.property===e)),s}(t,e.columnId);return-1!==s?{idx:s,asc:e.asc||!1}:{}}const Ce=Object(i.t)("Show Buy/Sell Buttons");async function ye(t){t.brokersList().filter(t=>!t.configFlags.isSuspended);const e=Promise.resolve(void 0),s=Object(l.ensureNotNull)(t.activeBroker()),i=await e,n=await s.accountsMetainfo(),a=s.accountManagerInfo();if(0===n.length)return;const r=n.map(t=>{var e;return{id:t.id,name:t.name,callBack:async()=>{t.id!==s.currentAccount()&&s.setCurrentAccount(t.id)},currency:""===t.currency?void 0:null!==(e=t.currency)&&void 0!==e?e:void 0}}),o=r.find(t=>t.id===s.currentAccount()),c=s.metainfo();return{brokerDropdownProps:void 0===i?void 0:{title:a.accountTitle,brokerName:c.title,logo:c.logoMiniUrl,logoBlack:c.logoMiniBlackUrl,actions:s.buttonDropdownActions(),trading:t,brokers:Object(h.b)(t.brokersList(),i).filter(t=>!t.metainfo.configFlags.isSuspended)},accountDropdownProps:{currentAccount:Object(l.ensureDefined)(o),accountsList:r,currentAccountUpdate:s.currentAccountUpdate}}}class we{constructor(t,e,s,i){this._adapter=Object(l.ensureNotNull)(t),this._bridge=e,this._container=e.container,this._mode=s,this._overlapManager=i,this._pages=[],this._topLines={},this._trading=Object(l.ensureNotNull)(Object(b.tradingService)()),this._info=this._adapter.accountManagerInfo(),this._dispatch=this.bindContextMenu(),this._create(),this._tabs=this._initializeTabs(),this._hideSecondaryPanelIfEmpty(),this._subscribe(),this._fullUpdate()}async priceFormatter(t){return t.symbol?this._trading.formatter(t.symbol):null}remove(){for(this._unmountComponentBySelector(".js-account-manager-header"),this._unsubscribe(),this._pages.forEach(t=>t.destroy()),this.unbindContextMenu();this._container.firstChild;)this._container.removeChild(this._container.firstChild)}bindContextMenu(){const t=t=>{t.preventDefault(),this._contextItems(t).then(e=>{d.enabled("property_pages")||(e=e.slice(0,-1)),p.ContextMenuManager.createMenu(Object(h.c)(e)).then(e=>{e.show(t)})})};return this._container.addEventListener("contextmenu",t),()=>this._container.removeEventListener("contextmenu",t)}unbindContextMenu(){null!==this._dispatch&&(this._dispatch(),this._dispatch=null)}_unmountComponentBySelector(t){const e=this._container.querySelector(t);null!==e&&o.a.unmountComponentAtNode(e)}_initializeTabs(){const t=Object(l.ensureNotNull)(this._container.querySelector(".js-content")),e=new u.a(Object(l.ensureNotNull)(this._container.querySelector(".js-top-panel-tabs")),t);return e.tabChanged.subscribe(this,this._onPageChanged),e}_getPages(){
const t=this._adapter.metainfo().id,e=this._adapter.accountManagerInfo(),s=this._adapter.metainfo().configFlags,n=Object(l.ensureNotNull)(this._trading.brokerCommandsUI()),a={};s.supportPositions&&(a.positionPage={ctor:le,ctorArguments:{brokerId:t,formatters:e.customFormatters||[],priceFormatterFn:this.priceFormatter.bind(this),checkSupportTrades:()=>!0===s.supportTrades,positions:{source:()=>this._adapter.positions().then(t=>t.filter(t=>f(t))),closeFn:n.closePosition.bind(n),editFn:s.supportPositionBrackets?n.editPositionBrackets.bind(n):null,reverseFn:s.supportReversePosition?n.reversePosition.bind(n):null,columns:Object(l.ensureDefined)(e.positionColumns),subscriptions:{rowUpdateDelegate:new _([this._adapter.positionPartialUpdate,this._adapter.positionUpdate]),countUpdateDelegate:this._adapter.positionUpdate,plSubscription:this._adapter.subscribePL.bind(this._adapter)}},trades:s.supportTrades?{source:()=>this._adapter.trades().then(t=>t.filter(t=>0!==t.qty)),closeFn:s.supportCloseTrade?n.closeTrade.bind(n):null,editFn:s.supportTradeBrackets?Object(l.ensureDefined)(n.editTradeBrackets).bind(n):null,reverseFn:null,columns:Object(l.ensureDefined)(e.tradeColumns||e.positionColumns),subscriptions:{rowUpdateDelegate:new _([this._adapter.tradePartialUpdate,this._adapter.tradeUpdate]),countUpdateDelegate:this._adapter.tradeUpdate,plSubscription:this._adapter.subscribePL.bind(this._adapter)}}:null,fullUpdateDelegate:this._adapter.currentAccountUpdate,overlapManager:this._overlapManager}});const r=this._adapter.orders.bind(this._adapter);a.orderPage={ctor:se,ctorArguments:{id:"Orders",title:Object(i.t)("Orders"),source:r,cancelFn:n.cancelOrder.bind(n),modifyFn:s.supportModifyOrder?n.modifyOrder.bind(n):null,columns:e.orderColumns,headerCounter:!0,tableId:t+".orders",formatters:e.customFormatters||[],priceFormatterFn:this.priceFormatter.bind(this),subscriptions:{fullUpdateDelegate:this._adapter.currentAccountUpdate,rowUpdateDelegate:new _([this._adapter.orderPartialUpdate,this._adapter.orderUpdate]),orderUpdateDelegate:this._adapter.orderUpdate},possibleOrderStatuses:ge.filter(t=>!e.possibleOrderStatuses||-1!==e.possibleOrderStatuses.indexOf(t)),filter:()=>!0,highlightChanges:!0,tableOptions:ve(e.orderColumns,e.orderColumnsSorting),configFlags:s,overlapManager:this._overlapManager}};const o=this._adapter.ordersHistory.bind(this._adapter);return s.supportOrdersHistory&&(a.historyPage={ctor:se,ctorArguments:{id:"History",title:Object(i.t)("History"),source:()=>Promise.all([r(),o()]).then(t=>[].concat(...t)),cancelFn:n.cancelOrder.bind(n),modifyFn:n.modifyOrder.bind(n),columns:Object(l.ensureDefined)(e.historyColumns),headerCounter:!1,tableId:t+".history",formatters:e.customFormatters||[],priceFormatterFn:this.priceFormatter.bind(this),subscriptions:{fullUpdateDelegate:this._adapter.currentAccountUpdate,rowUpdateDelegate:new _([this._adapter.orderPartialUpdate,this._adapter.orderUpdate]),orderUpdateDelegate:this._adapter.orderUpdate},
possibleOrderStatuses:fe.filter(t=>!e.possibleOrderStatuses||-1!==e.possibleOrderStatuses.indexOf(t)),filter:t=>![3,4,6].includes(t.status),highlightChanges:!1,tableOptions:ve(e.historyColumns,e.historyColumnsSorting),isAlwaysActive:!0,overlapManager:this._overlapManager}}),e.pages&&(a.customPages=[],e.pages.forEach(s=>{var i;const n=s.tables.map(i=>({title:i.title||"",columns:i.columns,source:i.getData,options:Object.assign({id:`${t}.${s.id}.${i.id}`,className:"balances",idProperty:"id"},ve(i.columns,i.initialSorting)),formatters:e.customFormatters||[],priceFormatterFn:this.priceFormatter.bind(this),subscriptions:{fullUpdateDelegate:this._adapter.currentAccountUpdate,rowUpdateDelegate:i.changeDelegate},flags:i.flags,overlapManager:this._overlapManager}));null===(i=a.customPages)||void 0===i||i.push({ctor:At,ctorArguments:{id:s.id,title:s.title,tables:n,overlapManager:this._overlapManager}})})),d.enabled("show_trading_notifications_history")&&s.showNotificationsLog&&(a.notificationsPage={ctor:It,ctorArguments:{id:"notifications_log",title:Object(i.t)("Notifications log"),source:()=>Promise.resolve(this._trading.getNotifications()),columns:v,formatters:[],priceFormatterFn:this.priceFormatter.bind(this),subscriptions:{fullUpdateDelegate:this._trading.onNotificationsChanged,rowUpdateDelegate:this._trading.onNewNotification},overlapManager:this._overlapManager}}),a}_create(){const t=this._getPages();for(const a of Object.values(t))if(Array.isArray(a)){const t=a.map(t=>new t.ctor(t.ctorArguments));this._pages.push(...t)}else this._pages.push(new a.ctor(a.ctorArguments));const e=this._pages.length,s=Object(l.ensureNotNull)(Object(m.b)(((t=0)=>`\n<div class="${me.accountManager}">\n\t<div class="js-account-manager-header"></div>\n\t<div class="${me.topPanel} js-top-panel">\n\t\t<div class="tv-tabs tv-tabs--semi-compact tv-tabs--no-margin tv-tabs--no-border js-top-panel-tabs">\n\t\t\t${'<div class="tv-tabs__tab js-tab"></div>'.repeat(t)}\n\t\t</div>\n\t</div>\n\t<div class="${me.secondaryPanel} js-secondary-panel">\n\t\t<div class="js-secondary-tabs"></div>\n\t</div>\n\t<div class="${me.content} js-content">\n\t\t${`<div class="${me.page} js-page"></div>`.repeat(t)}\n\t</div>\n</div>`)(e)));this._container.appendChild(s),0===this._mode?o.a.render(a.a.createElement(be,{summaryFields:this._info.summary,mode:0}),this._container.querySelector(".js-account-manager-header")):ye(this._trading).then(t=>{void 0!==t&&o.a.render(a.a.createElement(be,Object.assign(Object.assign({},t),{summaryFields:this._info.summary,mode:1})),this._container.querySelector(".js-account-manager-header"))});const i=this._container.querySelectorAll(".js-page"),n=this._container.querySelectorAll(".js-tab");this._pages.forEach((t,e)=>{i[e].innerHTML="",i[e].appendChild(t.content()),n[e].innerHTML="",n[e].appendChild(t.header())})}_subscribe(){var t,e,s,i;const n=Object(l.ensureNotNull)(this._container.querySelector(".js-content"));this._dispatchHeightHandler&&(this._dispatchHeightHandler(),delete this._dispatchHeightHandler);const a=()=>{
this._pages.forEach(t=>t.updateVisibleContent())};n.addEventListener("scroll",a);const r=null!==(e=null===(t=this._container.querySelector(".js-top-panel"))||void 0===t?void 0:t.clientHeight)&&void 0!==e?e:0,o=null!==(i=null===(s=this._container.querySelector(".js-secondary-panel"))||void 0===s?void 0:s.clientHeight)&&void 0!==i?i:0,c=t=>{n.style.height=t-r-o+"px",a()};this._bridge.height.subscribe(c,{callWithLast:!0}),this._dispatchHeightHandler=()=>this._bridge.height.unsubscribe(c);const d=t=>{t?this._updatePagesActiveStatuses():this._pages.forEach(t=>t.setActive(!1))};this._bridge.visible.subscribe(d,{callWithLast:!0}),this._dispatchVisibilityHandler=()=>this._bridge.visible.unsubscribe(d),this._attachFilter()}_onPageChanged(t){this._attachFilter(),this._hideSecondaryPanelIfEmpty(),this._trading.trackEvent("Bottom Panel",`Select ${this._pages[t].id()} page`),this._updatePagesActiveStatuses()}_hideSecondaryPanelIfEmpty(){Object(l.ensureNotNull)(this._container.querySelector(".js-secondary-panel")).classList.toggle("js-hidden",null===this._currentPage().topline())}_updatePagesActiveStatuses(){const t=1===this._adapter.connectionStatus(),e=this._tabs.index();for(let s=0;s<this._pages.length;s++)this._pages[s].setActive(e===s&&t)}_detachFilter(){const t=Object(l.ensureNotNull)(this._container.querySelector(".js-secondary-tabs")).children;for(const e of Array.from(t))e.classList.add("js-hidden")}_attachFilter(){if(this._detachFilter(),this._topLines[this._currentPageIndex()])this._topLines[this._currentPageIndex()].classList.remove("js-hidden");else if(this._currentPage().topline()){const t=Object(l.ensureNotNull)(this._currentPage().topline());Object(l.ensureNotNull)(this._container.querySelector(".js-secondary-tabs")).appendChild(t),this._topLines[this._currentPageIndex()]=t}}_fullUpdate(){this._pages.forEach(t=>t.reset())}_unsubscribe(){this._tabs&&(this._tabs.tabChanged.unsubscribe(this,this._onPageChanged),this._tabs.stop()),this._dispatchHeightHandler&&(this._dispatchHeightHandler(),delete this._dispatchHeightHandler),this._dispatchVisibilityHandler&&(this._dispatchVisibilityHandler(),delete this._dispatchVisibilityHandler);const t=this._container.querySelector(".js-secondary-tabs");if(null!==t)for(;t.firstChild;)t.removeChild(t.firstChild);this._topLines={}}_currentPageIndex(){return this._tabs.index()}_currentPage(){return this._pages[this._currentPageIndex()]}async _contextItems(t){const e="Bottom Panel Context Menu",n=c.linking.proSymbol.value(),a=await this._trading.suggestedQty().value(n),r=this._currentPage().contextItems(t);if(this._info&&this._info.contextMenuActions)return this._info.contextMenuActions(t,r);const o={separator:!0};r.length&&r.push(o);const u=[{text:Object(g.appendEllipsis)("Create New Order"),action:()=>{this._trading.trackEvent(e,"New Order"),Object(l.ensureNotNull)(this._trading.brokerCommandsUI()).placeOrder({symbol:n,qty:a})}}];if(d.enabled("buy_sell_buttons")){const t={text:Ce,checkable:!0,checked:this._trading.showSellBuyButtons.value(),action:()=>{
const t=!this._trading.showSellBuyButtons.value();this._trading.trackEvent(e,"Show Sell/Buy Buttons",t?"Check":"Uncheck"),this._trading.showSellBuyButtons.setValue(t)}};u.push(o,t)}return d.enabled("property_pages")&&u.push(o,{text:Object(g.appendEllipsis)(Object(i.t)("Trading Settings")),icon:s("MXV9"),action:()=>{this._trading.trackEvent(e,"Trading Properties"),this._trading.showTradingProperties()}}),r.concat(u)}}}}]);