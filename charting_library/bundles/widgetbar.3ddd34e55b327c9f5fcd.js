(window.webpackJsonp=window.webpackJsonp||[]).push([["widgetbar"],{"1Pr8":function(t,e,i){t.exports={button:"button-DABaJZo4",hover:"hover-DABaJZo4",hoverMask:"hoverMask-DABaJZo4",icon:"icon-DABaJZo4",counterRow:"counterRow-DABaJZo4",counter:"counter-DABaJZo4",isGrayed:"isGrayed-DABaJZo4",isActive:"isActive-DABaJZo4",isTab:"isTab-DABaJZo4"}},"1TxM":function(t,e,i){"use strict";i.d(e,"c",(function(){return d})),i.d(e,"a",(function(){return l})),i.d(e,"b",(function(){return h}));var a=i("q1tI"),n=i.n(a),s=i("17x9"),o=i.n(s);const r=n.a.createContext({});function d(t,e){o.a.checkPropTypes(e,t,"context","RegistryContext")}function l(t){const{validation:e,value:i}=t;return d(i,e),n.a.createElement(r.Provider,{value:i},t.children)}function h(){return r}},"1WEt":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="45" height="45"><path fill="currentcolor" d="m18 18v-.5c0-1.2.6-2 1.5-2.7.8-.5 2-.8 3-.8s2.2.3 3 .8c.9.6 1.5 1.5 1.5 2.7a4 4 0 0 1-1.3 2.8l-2.3 2c-.3.3-.4.6-.4 1.2v.5h-1v-.5c0-.8.2-1.4.6-1.9l2.4-2c.6-.7 1-1.3 1-2.1a2 2 0 0 0-1-1.8c-.7-.5-1.6-.7-2.5-.7-1 0-1.8.2-2.5.7-.6.4-1 1-1 1.8v.5m3.5 8a1 1 0 0 0 0 5 1 1 0 0 0 0-5m0 1a1 1 0 0 1 0 3 1 1 0 0 1 0-3m0-17a1 1 0 0 0 0 25 1 1 0 0 0 0-25m0 1a1 1 0 0 1 0 23 1 1 0 0 1 0-23"/></svg>'},"5AaZ":function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var a=i("q1tI"),n=i.n(a),s=i("TSYQ"),o=i.n(s),r=i("cvc5"),d=i("Iivm"),l=i("//lZ"),h=i("9uLv"),c=i("uJ8n"),g=i("Vike");class u extends n.a.PureComponent{constructor(t){super(t),this._scroll=null,this._handleScrollTop=()=>{this.animateTo(Math.max(0,this.currentPosition()-(this.state.heightWrap-50)))},this._handleScrollBot=()=>{this.animateTo(Math.min((this.state.heightContent||0)-(this.state.heightWrap||0),this.currentPosition()+(this.state.heightWrap-50)))},this._handleResizeWrap=({height:t})=>{this.setState({heightWrap:t})},this._handleResizeContent=({height:t})=>{this.setState({heightContent:t})},this._handleScroll=()=>{const{onScroll:t}=this.props;t&&t(this.currentPosition(),this.isAtTop(),this.isAtBot()),this._checkButtonsVisibility()},this._checkButtonsVisibility=()=>{const{isVisibleTopButton:t,isVisibleBotButton:e}=this.state,i=this.isAtTop(),a=this.isAtBot();i||t?i&&t&&this.setState({isVisibleTopButton:!1}):this.setState({isVisibleTopButton:!0}),a||e?a&&e&&this.setState({isVisibleBotButton:!1}):this.setState({isVisibleBotButton:!0})},this.state={heightContent:0,heightWrap:0,isVisibleBotButton:!1,isVisibleTopButton:!1}}componentDidMount(){this._checkButtonsVisibility()}componentDidUpdate(t,e){e.heightWrap===this.state.heightWrap&&e.heightContent===this.state.heightContent||this._handleScroll()}currentPosition(){return this._scroll?this._scroll.scrollTop:0}isAtTop(){return this.currentPosition()<=1}isAtBot(){return this.currentPosition()+this.state.heightWrap>=this.state.heightContent-1}animateTo(t,e=h.dur){const i=this._scroll;i&&Object(l.doAnimate)({onStep(t,e){i.scrollTop=e},from:i.scrollTop,to:Math.round(t),easing:h.easingFunc.easeInOutCubic,duration:e})}render(){
const{children:t,isVisibleScrollbar:e,isVisibleFade:i,isVisibleButtons:a,onMouseOver:s,onMouseOut:l}=this.props,{heightContent:h,heightWrap:u,isVisibleBotButton:p,isVisibleTopButton:w}=this.state;return n.a.createElement(r,{whitelist:["height"],onMeasure:this._handleResizeWrap},n.a.createElement("div",{className:c.wrap,onMouseOver:s,onMouseOut:l},n.a.createElement("div",{className:o()(c.scrollWrap,{[c.noScrollBar]:!e}),onScroll:this._handleScroll,ref:t=>this._scroll=t},n.a.createElement(r,{onMeasure:this._handleResizeContent,whitelist:["height"]},n.a.createElement("div",{className:c.content},t))),i&&n.a.createElement("div",{className:o()(c.fadeTop,{[c.isVisible]:w&&h>u})}),i&&n.a.createElement("div",{className:o()(c.fadeBot,{[c.isVisible]:p&&h>u})}),a&&n.a.createElement("div",{className:o()(c.scrollTop,{[c.isVisible]:w&&h>u}),onClick:this._handleScrollTop},n.a.createElement("div",{className:c.iconWrap},n.a.createElement(d.a,{icon:g,className:c.icon}))),a&&n.a.createElement("div",{className:o()(c.scrollBot,{[c.isVisible]:p&&h>u}),onClick:this._handleScrollBot},n.a.createElement("div",{className:c.iconWrap},n.a.createElement(d.a,{icon:g,className:c.icon})))))}}u.defaultProps={isVisibleScrollbar:!0}},"5qsH":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="45" height="45"><g fill="none" stroke="currentColor"><path d="M14.5 27.5c0 4.97 3.03 8 8 8 4.97 0 8-3.03 8-8v-6a3 3 0 0 0-3-3h-10a3 3 0 0 0-3 3v6z"/><path stroke-linecap="square" d="M22.5 19v16"/><path d="M27.5 18.5a5 5 0 1 0-10 0m13 3h2a2 2 0 0 1 2 2V25m-4 2.5h2a2 2 0 0 1 2 2V31M29 32.5h1.5a2 2 0 0 1 2 2V36m-18-14.5h-2a2 2 0 0 0-2 2V25m4 2.5h-2a2 2 0 0 0-2 2V31m5.5 1.5h-1.5a2 2 0 0 0-2 2V36"/><g transform="translate(12 8)"><circle cx="2.5" cy="2.5" r="2"/><path d="M3.911 3.911L7 7"/></g><g transform="translate(26 8)"><circle cx="4.5" cy="2.5" r="2"/><path d="M3.115 3.885L0 7"/></g></g></svg>'},"8d0Q":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"a",(function(){return s}));var a=i("q1tI");function n(){const[t,e]=Object(a.useState)(!1);return[t,{onMouseOver:function(t){s(t)&&e(!0)},onMouseOut:function(t){s(t)&&e(!1)}}]}function s(t){return!t.currentTarget.contains(t.relatedTarget)}},"9Qhg":function(t,e,i){},BH4H:function(t,e,i){"use strict";(function(e,a,n){var s=i("YFKU").t;i("9Qhg"),i("TdlR");var o=i("Eyy1").ensureNotNull,r=i("wtQX"),d=i("Q8Ag"),l=i("PT1i").linking,h=i("1AAW").combine,c=i("JWMC").trackEvent,g=i("e3/o"),u=i("/BH3"),p=i("TSYQ"),w=i("Fb/L").WidgetBarInternal,m=i("dkCg").RightToolbarRenderer,v=i("tBUM").WidgetBarTabButtonViewModel,f=i("jkvV").Hider,y=i("i8i4"),b=i("q1tI"),B=i("HySD"),_=i("N22A"),C=_.tradingService,T=_.waitTradingService,P=i("b5Gw").makeCancelable,S=i("ULlu").unwrap;i("e9Yb");var W=i("xrkQ"),x=parseInt(W["css-value-widgets-margin"]);const M={title:s("Details"),ctor:null,lazyLoad:!0,chartWidgetAllowed:!0,widgetClass:W.widget,headerClass:W.widgetHeader,margin:x},A=Object.assign({},M,{noHeaderSpace:!0,titleClass:W.widgetTitle});function z(t){t||(t={}),this.options=t,
this.resizerBridge=t.resizerBridge,this.adaptive=!!t.adaptive,this.tradingPanelAccessor=t.tradingPanelAccessor;var e=this.resizerBridge;this._visible=h((function(t,e,i){return Boolean(t&&e&&i)}),e.width,e.height,e.visible),this.widgetConfig=$.extend(!0,{},z.widgetConfig),t.widgetConfig&&(this.widgetConfig=$.extend(!0,this.widgetConfig,t.widgetConfig)),this.layout=new E({widgetBar:this}),this._customization=t.customization,t.chartWidgetCollection&&(this.chartWidgetCollection=t.chartWidgetCollection),t.state?this.layout.demarshal(t.state):t.settingsPrefix&&(this._settingsPrefix=t.settingsPrefix+"",this.loadFromTVSettings()),t.readonly&&(this.readonly=!0),t.fixedMode&&(this.fixedMode=!0),t.showCloseButton&&(this.showCloseButton=!0),this.$container=$(this.resizerBridge.container.value()),this._internal=new w(this),this.createHTML(),this.initLayout(),loginStateChange.subscribe(this,this.onLoginStateChange),this.resizerBridge.width.subscribe(function(){this.layout.syncWidth()}.bind(this)),this.resizerBridge.height.subscribe(function(){this.layout.syncHeight()}.bind(this)),this.resizerBridge.visible.subscribe(function(t){this.layout.onVisibilityChange(t)}.bind(this)),this.resizerBridge.availWidth.subscribe(function(){this.layout.requestOptimalWidth(),this.layout.updateResponsiveness()}.bind(this)),this._tradingServiceCancelable=P(T()),this._tradingServiceCancelable.promise.then(function(t){this._tradingServiceCancelable=null,t.onConnectionStatusChange.subscribe(this,this._onBrokerConnectionStatusChanged)}.bind(this))}z.widgetConfig={reuters_calendar:{title:s("Economic Calendar"),ctor:null,lazyLoad:!0,icon:"economic-calendar",options:{widgetType:"widgetbar"}},earnings_calendar:{title:s("Earnings Calendar"),ctor:null,lazyLoad:!0,icon:"earnings-calendar"},watchlist:{title:s("Watchlist"),ctor:null,lazyLoad:!0,chartWidgetAllowed:!0,emptyHeader:!0,widgetClass:W.widget,headerClass:W.widgetHeader,margin:x,preloadDelay:6e4},hotlist:{title:s("Hotlist"),ctor:null,lazyLoad:!0,chartWidgetAllowed:!0,emptyHeader:!0,widgetClass:W.widget,headerClass:W.widgetHeader,margin:x},detail:A,news:{title:s("Headlines"),ctor:null,noHeaderSpace:!0,widgetClass:W.widget,headerClass:W.widgetHeader,titleClass:W.widgetTitle,margin:x},chat:{title:s("Talks"),ctor:null,chartWidgetAllowed:!0,doNotClearNotifications:!0},messages:{title:s("Recent Chats"),ctor:null,chartWidgetAllowed:!0,doNotClearNotifications:!0},messages_with_select:{title:s("Recent Chats"),ctor:null,chartWidgetAllowed:!0,doNotClearNotifications:!0,options:{layoutWithSelect:!0},emptyHeader:!0},notifications_user:{title:s("Notifications"),ctor:null,options:{type:"user"},chartWidgetAllowed:!0},notifications_following:{title:s("Ideas Stream"),ctor:null,options:{type:"following"},chartWidgetAllowed:!0},datawindow:{title:s("Data Window"),ctor:null,chartWidgetAllowed:!0,chartWidgetRequired:!0},publicchats:{title:s("All Talks"),ctor:null,doNotClearNotifications:!0},publicchats_with_select:{title:s("All Talks"),ctor:null,doNotClearNotifications:!0,options:{layoutWithSelect:!0},emptyHeader:!0},notes:{
title:s("My Ideas"),ctor:null,lazyLoad:!0,chartWidgetAllowed:!0},alerts_manage:{ctor:null,lazyLoad:!0,chartWidgetAllowed:!0,emptyHeader:!0,noHeaderSpace:!0,widgetClass:W.widget,headerClass:W.widgetHeader,margin:x},alerts_log:{ctor:null,chartWidgetAllowed:!0,emptyHeader:!0,noHeaderSpace:!0,widgetClass:W.widget,headerClass:W.widgetHeader,margin:x},market_summary:{title:s("Market Summary"),ctor:null},object_tree:{title:s("Object tree. Multi-select drawings tools"),ctor:null,noHeader:!0,chartWidgetAllowed:!0,chartWidgetRequired:!0},streams:{title:s("Streams"),ctor:null,emptyHeader:!0,widgetClass:W.widget,headerClass:W.widgetHeader,margin:x,doNotClearNotifications:!0,doNotClearNotificationsOnVisibilityChange:!0}},z.svgIcons={base:i("dECE")},z.svgIcons["object-tree"]=i("aE/C"),z.svgIcons.datawindow=i("GNw3"),z._messageHandlers=[],z.postMessage=function(t,e){z._messageHandlers.forEach((function(i){i.handler(t,e)}))},z.onMessage=function(t){"function"==typeof t&&z._messageHandlers.push({handler:t,widget:this})},z.offMessage=function(t){if("function"==typeof t){const e=z._messageHandlers.findIndex(e=>e.handler===t);-1!==e&&z._messageHandlers.splice(e,1)}},z.prototype.destroy=function(){null!==this._tradingServiceCancelable?(this._tradingServiceCancelable.cancel(),this._tradingServiceCancelable=null):o(C()).onConnectionStatusChange.unsubscribe(this,this._onBrokerConnectionStatusChanged);this._internal.destroy(),this._internal=null},z.prototype.isVisible=function(){var t=this.resizerBridge;return t.visible.value()&&t.height.value()&&t.width.value()},z.prototype.visible=function(){return this._visible},z.prototype.initLayout=function(){var t=this;r.load("widgetbar",(function(){var e=$.Deferred();return d.loadWidgetBarModules((function(i){var a=t.widgetConfig;a.reuters_calendar.ctor=i.ReutersCalendarWidget,a.earnings_calendar.ctor=i.CalendarWidget&&i.CalendarWidget.Earnings,a.watchlist.ctor=i.Watchlist,a.hotlist.ctor=i.HotlistWidget,a.detail.ctor=i.Detail&&i.Detail.Widget,a.news.ctor=i.NewsWidget,a.chat.ctor=i.ChatWidget,a.messages.ctor=i.Messages&&i.Messages.Widget,a.messages_with_select.ctor=i.Messages&&i.Messages.Widget,a.notifications_following.ctor=i.NotificationsWidgets,a.notifications_user.ctor=i.NotificationsWidgets,a.publicchats.ctor=i.PublicChatsWidget,a.publicchats_with_select.ctor=i.PublicChatsWidget,a.notes.ctor=i.NotesWidget,a.alerts_manage.ctor=i.AlertsManageWidget,a.alerts_log.ctor=i.AlertsLogWidget,a.streams.ctor=i.StreamsWidget,e.resolve(i)})),e.promise()}),this.options.instantLoad),r.onReady("widgetbar",(function(){t.layout.startWidgets()})),0===this.layout.pages.length&&(this.layout.setMinimizedState(!0),this.layout.$handle.addClass("js-hidden")),t.layout.requestOptimalWidth(),this.layout.syncWidth(),this.layout.syncHeight(),t.layout.onVisibilityChange(),t.layout.updateResponsiveness()},z.prototype.loadWidgets=function(){this._widgetsLoadRequested||(this._widgetsLoadRequested=!0,r.load("widgetbar",null,!0))},z.prototype.onLoginStateChange=function(t){t||window.is_authenticated&&(this.dropWidgetData(),
this.refreshFromTVSettings())},z.prototype.dropWidgetData=function(){for(var t in this.widgetConfig)delete this.widgetConfig[t].data},z.prototype.refreshFromTVSettings=function(){this._settingsPrefix&&(this.layout&&this.layout.destroy(),this.layout=new E({widgetBar:this}),this.loadFromTVSettings(),this.layout.createHTML(),this.layout.$pages.appendTo(this.$wrap),this.layout.$tabs.appendTo(this.$wrap),this.layout.$hider&&this.layout.$hider.appendTo(this.$wrap),this.initLayout())},z.prototype.getWidgets=function(t){for(var e=[],i=0;i<this.layout.pages.length;++i)e=e.concat(this.layout.pages[i].getWidgets(t));return e},z.prototype.loadFromTVSettings=function(){if(this._settingsPrefix){try{this.migrateFromOld()}catch(s){console.error&&console.error(s)}var t=this.getLayoutState();t=this.mergeProperties(t),this.layout.demarshal(t,{settingsPrefix:this._settingsPrefix}),this.saveToTVSettings();var e=TVSettings.getJSON(this._settingsPrefix+"."+u.layoutKeyName,null);if(e){var i,a=[];for(i in e.widgets)a=a.concat(e.widgets[i].map((function(t){return t.id})));var n=TVSettings.keysMask(this._settingsPrefix+".widget.*.*");n&&n.forEach(function(t){var e=t.replace(this._settingsPrefix+".widget.","");-1===a.indexOf(e)&&0===t.indexOf(this._settingsPrefix+".widget.")&&(c("Settings debug","loadFromTVSettings: "+t,user.username),TVSettings.remove(t))}.bind(this))}}},z.prototype.mergeProperties=function(t){var e=TVSettings.getJSON(this._settingsPrefix+"."+u.layoutKeyName,null);if(!e)return t;e.settings&&$.extend(t,e.settings);for(var i={},a=0;a<t.pages.length;a++)for(var n=0;n<t.pages[a].widgets.length;n++){var s=t.pages[a].widgets[n],o=i[s.type]||0;e.widgets[s.type]&&e.widgets[s.type][o]&&$.extend(s,e.widgets[s.type][o]),i[s.type]=++o}return t},z.prototype.migrateFromOld=function(t){var e=TVSettings.getJSON(this._settingsPrefix+".layout-fixed",null);if(e){var i={settings:{}};"minimized"in e&&(i.settings.minimized=e.minimized),"width"in e&&(i.settings.width=e.width),"activeIndex"in e&&(i.settings.activeIndex=e.activeIndex),i.widgets={};for(var a=0;a<e.pages.length;a++)for(var n=e.pages[a].widgets||e.pages[a],s=0;s<n.length;s++){var o,r=n[s];r.id?(o=r.id.replace(/\..*/,""),/^news_.+/.test(o)&&(o=r.type="news",TVSettings.setJSON(this._settingsPrefix+".widget."+r.id.replace(/news_[^.]*/,"news"),TVSettings.getValue(this._settingsPrefix+".widget."+r.id)),r.id=r.id.replace(/news_[^.]*/,"news"))):(o=r.type,/^news_.+/.test(o)&&(r.properties=r.properties||{},r.properties.provider=r.type.replace(/news_([^.]*).*/,"$1"),o=r.type="news")),i.widgets[o]?i.widgets[o].push(r):i.widgets[o]=[r]}TVSettings.setJSON(this._settingsPrefix+"."+u.layoutKeyName,i)}else if(TVSettings.getJSON(this._settingsPrefix+".layout",null)){var d=this.getWidgetProperties("watchlist");if(d){i={settings:{},widgets:{watchlist:[d]}};TVSettings.setJSON(this._settingsPrefix+"."+u.layoutKeyName,i)}}e&&TVSettings.remove(this._settingsPrefix+".layout-fixed"),TVSettings.getJSON(this._settingsPrefix+".layout",null)&&TVSettings.remove(this._settingsPrefix+".layout")},
z.prototype.saveToTVSettings=function(){if(this._settingsPrefix){var t=this.layout.marshal();TVSettings.setJSON(this._settingsPrefix+"."+u.layoutKeyName,t)}},z.prototype.getWidgetProperties=function(t,e){e=e||0;var i=this._settingsPrefix.replace(/\W/g,"\\$&")+".widget.",a=TVSettings.keysMask(i+t+".*");return!!(a&&a.length&&(a=a.sort())[e])&&{id:a[e].replace(i,"")}},z.prototype._onBrokerConnectionStatusChanged=function(t){0};var O={type:"news"};function E(t){this.widgetBar=t.widgetBar,this.pages=[],this.activePageIndex=new a(this.activeIndex),this.isMinimized=new a(this.minimized),t&&t.widgetBar&&Object.defineProperty(this,"widgetBar",{value:t.widgetBar,configurable:!0})}function V(t){this.widgets=[],t&&t.widgetBarLayout&&Object.defineProperty(this,"widgetBarLayout",{value:t.widgetBarLayout,configurable:!0})}function N(t){t&&t.widgetBarPage&&Object.defineProperty(this,"widgetBarPage",{value:t.widgetBarPage,configurable:!0}),this._internalState={alive:new a(!0),container:new a,width:new a,height:new a,detachable:new a(!1)},this._rdState=new B.ResizerDetacherState(this._internalState),this._rdState.owner.subscribe(function(t){t!==this._internalState&&$(this._internalState.container.value()).empty()}.bind(this)),this.widgetActive=new a,this.widgetMaximized=new a,this._widgetStarted=new n,this._preloadTimeout=null}function L(t){t&&t.settingsKey&&(this._settingsKey=t.settingsKey,this._value=TVSettings.getJSON(this._settingsKey,null)),t&&t.widgetBarWidget&&Object.defineProperty(this,"widgetBarWidget",{value:t.widgetBarWidget,configurable:!0})}function H(){return e.enabled("right_toolbar")}z.prototype.getGenericLayoutState=function(t){var i=u.getDefaultState(),a=window.COUNTRY_CODE_TO_DEFAULT_EXCHANGE;a.default=a.en;for(var n=[{_gaEvent:"General Widget",title:s("Watchlist, details and news"),name:"base",icon:"base",widgets:[{type:"watchlist",properties:t&&t.length?{list:t}:void 0},{type:"detail"},Object.assign({},O,{isEnabled:!0})]},e.enabled("alerts")?{_gaEvent:"Alerts",title:s("Alerts"),name:"alerts",icon:"alarm-clock",widgets:[{type:"alerts_manage",properties:{}},{type:"alerts_log",properties:{}}]}:null,null,null,{_gaEvent:"Data Window",title:s("Data Window"),name:"data-window",icon:"datawindow",widgets:[{type:"datawindow"}]},{_gaEvent:"Hotlists",title:s("Hotlists"),name:"hotlist",icon:"hotlists",widgets:[{type:"hotlist",properties:{exchangeByLocale:a,groupByLocale:{default:"volume_gainers"}}},{type:"hotlist",properties:{exchangeByLocale:a,groupByLocale:{default:"percent_change_gainers"}}},{type:"hotlist",properties:{exchangeByLocale:a,groupByLocale:{default:"percent_change_loosers"}}}]},{_gaEvent:"Calendar",title:s("Calendar"),name:"calendar",icon:"calendar",widgets:[{type:"reuters_calendar",properties:{}},{type:"earnings_calendar",properties:{}}]},{_gaEvent:"My Ideas",title:s("My Ideas"),name:"notes",icon:"notes",spaceBottom:!0,spaceBottomText:s("Social"),widgets:[{type:"notes"}]},{_gaEvent:"Public Chats",title:s("Public Chats"),name:"chats",icon:"chat",widgets:[{type:"chat"},{type:"publicchats"}]},{
_gaEvent:"Private Chats",title:s("Private Chats"),name:"pm_chats",icon:"messages",widgets:[{type:"messages"}]},{_gaEvent:"Ideas Stream",title:s("Ideas Stream"),name:"ideas_stream",icon:"ideas-stream",widgets:[{type:"notifications_following"}]},null,{_gaEvent:"Notifications",title:s("Notifications"),name:"notifications",icon:"notifications",widgets:[{type:"notifications_user"}]}],o=0;o<n.length;o++)n[o]&&i.pages.push(n[o]);return i},z.prototype.getChartingPlatformLayoutState=function(t,i){var a={version:2,width:267,pages:[]};if(this._customization.watchlist||this._customization.details||this._customization.news){var n="",o=[];this._customization.watchlist&&(n=s("Watchlist"),o.push({type:"watchlist",id:"watchlist."+i,properties:t&&t.length?{list:t}:void 0})),this._customization.details&&(n=this._customization.watchlist?s("Watchlist and details"):s("Details"),o.push({type:"detail"})),this._customization.news&&(n=this._customization.watchlist&&this._customization.details?s("Watchlist and details and news"):this._customization.watchlist?s("Watchlist and news"):s("News"),o.push({type:"news",id:"news."+i})),a.pages.push({name:"base",title:n,icon:"base",widgets:o})}return this._customization.datawindow&&a.pages.push({title:s("Data Window"),name:"data-window",icon:"datawindow",widgets:[{type:"datawindow"}]}),e.enabled("right_toolbar")&&e.enabled("show_object_tree")&&this.chartWidgetCollection&&!this.chartWidgetCollection.readOnly()&&a.pages.push({title:s("Show Object tree"),name:"object_tree",icon:"object-tree",onBottom:!1,widgets:[{type:"object_tree"}]}),a},z.prototype.getLayoutState=function(){var t,i=this,a=TVSettings.getJSON("watchlist.list",[]);function n(t){return!(void 0!==t.isEnabled&&!t.isEnabled)&&(i.chartWidgetCollection||!z.widgetConfig[t.type].chartWidgetRequired)}for(var s=(t=e.enabled("trading_terminal")?this.getChartingPlatformLayoutState(a,"terminal"):this.getGenericLayoutState(a)).pages.length-1;s>=0;s--){var o=t.pages[s];o.widgets=$.grep(o.widgets,n)}return t.pages=$.grep(t.pages,(function(t){return t.widgets&&t.widgets.length})),t},z.prototype.createWidgetId=function(t){return t+"."+g.randomHash()},z.prototype.setPage=function(t){this.layout.setMinimizedState(!1);var e=this.layout.activeIndex;return this.layout.pages.forEach((function(i,a){i.name===t&&(e=a)})),this.layout.switchPage(e),this.layout.getActivePage()},E.prototype.startWidgets=function(){this.pages.forEach((function(t){t.widgets.forEach((function(t){t.widgetObject||t.widgetStartDelayed||setTimeout((function(){t.startWidget()}),0)}))}));var t=this.getActivePage();t&&t.onActiveStateChange(!0)},E.prototype.syncHeight=function(){var t=this.widgetBar.resizerBridge.height.value();if(this.$pages.css("height",t+"px"),!this.minimized){var e=this.getActivePage();e&&e.updateWidgetsHeight()}},E.prototype.tabsWidth=function(){return H()?u.tabsWidth:this.minimized?u.hiderGapWidth:0},E.prototype.borderWidth=function(){return u.borderWidth},E.prototype.canOpen=function(){
return this.MIN_WIDTH+this.tabsWidth()+this.borderWidth()<=this.widgetBar.resizerBridge.availWidth.value()},E.prototype.requestWidth=function(t){var e=this.widgetBar.resizerBridge;t>0&&(t+=this.borderWidth());var i=this.tabsWidth(),a=t+i;this.canOpen()?e.width.value()!==a&&e.negotiateWidth([{min:i,max:i},{min:this.MIN_WIDTH+i,max:a}]):e.negotiateWidth(0)},E.prototype.requestOptimalWidth=function(){this.changeWidgetsButtonTitle(),this.minimized?this.requestWidth(0):this.requestWidth(this.width)},E.prototype.updateResponsiveness=function(){var t=!this.canOpen();this.$tabs.toggleClass("js-hidden",t),this.$pages.toggleClass("js-hidden",t)},E.prototype.syncWidth=function(){var t=this.widgetBar.resizerBridge,e=this.tabsWidth(),i=this.borderWidth(),a=t.width.value(),n=Math.max(a-e-i,0)||0;if(n<this.MINIMIZE_THRESHOLD?this.setMinimizedState(!0):this.setMinimizedState(!1),this.$pages.css("width",n+"px").toggleClass("hidden",!!this.minimized),!this.minimized){var s=this.getActivePage();s&&s.widgets.forEach((function(t){t.onWidthChange(n)})),this.widgetBar&&this.widgetBar.loadWidgets()}var o=!this.canOpen();this.$deviceButton&&this.$deviceButton.toggleClass("js-hidden",!o||!this.minimized)},E.prototype.setMinimizedState=function(t){t=!!t,!!this.minimized!==t&&(this.minimized=t,this.isMinimized.setValue(this.minimized),t&&this.widgetBar.resizerBridge.exitFullscreen(),this.requestOptimalWidth(),this.activeIndex>=0&&this.pages[this.activeIndex].onActiveStateChange(!this.minimized))},E.prototype.getWidgetsButtonTitle=function(){return this.minimized?window.t("Show Widgets"):window.t("Hide Widgets")},E.prototype.changeWidgetsButtonTitle=function(){this.widgetBar.$widgetBarBtn&&this.widgetBar.$widgetBarBtn.attr("title",this.getWidgetsButtonTitle())},E.prototype.switchPage=function(t){if(-1===t||0===this.pages.length)return this.activeIndex=-1,void this.activePageIndex.setValue(this.activeIndex);var e;if(t instanceof V){if(-1===(e=this.pages.indexOf(t)))return}else e=+t;var i=this.pages[this.activeIndex];this.activeIndex=Math.min(this.pages.length-1,Math.max(0,e)),this.activePageIndex.setValue(this.activeIndex);var a=this.pages[this.activeIndex];this.activeName=a.name,this.minimized||i&&i===a||(i&&i.onActiveStateChange(!1),a&&a.onActiveStateChange(!0))},E.prototype.getActivePage=function(){return this.minimized?null:this.pages[this.activeIndex]||null},E.prototype.onTabClick=function(t,e){if(!t.isDefaultPrevented()){var i=this.pages.indexOf(e);-1!==i&&(t.preventDefault(),i!==this.activeIndex||this.minimized?(e._gaEvent&&c("Platform Widgets",e._gaEvent),this.switchPage(i),this.minimized&&this.setMinimizedState(!1)):this.setMinimizedState(!0),this.widgetBar&&this.widgetBar.saveToTVSettings())}},z.prototype.ensureSupportTicketButtonViewModel=function(){return this._supportTicketButtonViewModel?this._supportTicketButtonViewModel:this._supportTicketButtonViewModel=new v({icon:i("5qsH"),hint:window.t("Help Center"),onClick:function(){r.onReady("widgetbar",(function(t){var e=t.showSupportDialog;e&&e()})),r.load("widgetbar",null,0)}})},
z.prototype.ensureHelpButtonViewModel=function(){if(this._helpButtonViewModel)return this._helpButtonViewModel;var t=this.ensureSupportTicketButtonViewModel();return this._helpButtonViewModel=new v({icon:i("1WEt"),hint:s("Help Center"),onClick:t.onClick.value()})},E.prototype.onLayoutResizeHandleMousedown=function(t){if(!t.isDefaultPrevented()){t.preventDefault();var e,i=this,a=Math.max(this.widgetBar.resizerBridge.width.value()-this.tabsWidth()-this.borderWidth(),0);e=t.originalEvent.touches?t.originalEvent.touches[0].clientX:t.pageX,$(document.documentElement).on("mousemove touchmove",n).on("mouseup touchend",(function t(e){$(document.documentElement).off("mousemove touchmove",n).off("mouseup touchend",t),i.widgetBar&&i.widgetBar.saveToTVSettings(),i.changeWidgetsButtonTitle()}))}function n(t){var n;n=t.originalEvent.touches?t.originalEvent.touches[0].clientX:t.pageX;var s=a-(n-e);s<i.MINIMIZE_THRESHOLD?s=0:s<i.MIN_WIDTH&&(s=i.MIN_WIDTH),s>0&&(i.width=s),i.requestWidth(s)}},E.prototype.removePage=function(t){var e=this.pages.indexOf(t);-1!==e&&(delete t.widgetBarLayout,this.pages.splice(e,1),t.$page.detach(),t.$page.detach(),t.$tab.detach(),this.activeIndex===e&&this.switchPage(e-1))},E.prototype.createPage=function(){var t=new V({widgetBarLayout:this});return this.pages.push(t),t.createHTML(),this.$pagescontent.append(t.$page),t},E.prototype.createWidget=function(t,e){if(e){if(-1===this.pages.indexOf(e))return null}else e=this.createPage();var i=new N({widgetBarPage:e});return i.demarshal({type:t}),i.createHTML(),e.attachWidget(i),i},E.prototype.widgetInsertionDisallowed=function(t){return"watchlist"===t&&((!window.user||!user.is_pro)&&(!!this.pages.some((function(e){return e.widgets.some((function(e){return e.type===t}))}))||void 0))},E.prototype.onVisibilityChange=function(){var t=!(!this.widgetBar||!this.widgetBar.resizerBridge.visible.value());this.visible=t,this.pages.forEach((function(e){e.onVisibilityChange(t)}))},E.prototype.destroy=function(){if(this.widgetBar&&this.widgetBar.layout===this&&delete this.widgetBar.layout,this.tabRenderer&&(this.tabRenderer.destroy(),this.tabRenderer=null),this.$hider){var t=this.$hider.get(0);y.unmountComponentAtNode(t)}for(var e=this.pages.length;e--;)for(var i=this.pages[e],a=i.widgets.length;a--;)i.widgets[a].destroy();for(var n in this)this[n]instanceof $&&this[n].remove(),delete this[n]},E.prototype.getWidgetBarOption=function(){if(this.widgetBar&&name in this.widgetBar)return this.widgetBar[name]},E.prototype.MIN_WIDTH=200,E.prototype.MINIMIZE_THRESHOLD=50,E.prototype.width=290,E.prototype.minimized=!e.enabled("show_right_widgets_panel_by_default"),E.prototype.activeIndex=0,E.prototype.activeName="",E.prototype.visible=!0,V.prototype.onActiveStateChange=function(t){t=!!t,$(this.$page).toggleClass("active",!!t),this.tab.onActiveStateChange(t),t&&this.updateWidgetsHeight({skipIfHeightUnchanged:!0}),this.widgets.forEach((function(e){e.onActiveStateChange(t)}))},V.prototype.updateWidgetsHeight=function(t){if(!this.$page)return
;if(!this.widgetBarLayout||!this.widgetBarLayout.widgetBar)return;if(this.widgetBarLayout.getActivePage()!==this)return void(this._invalidated=!0);t=t||{};var e=this.widgetBarLayout.widgetBar.resizerBridge.height.value();if(this._pageHeight===e&&t.skipIfHeightUnchanged||(this._invalidated=!0,this._pageHeight=e),!this._invalidated)return;var i,a=e,n=0,s=this.widgets,o=null;const r=s.every(t=>null===t.heightRatio||0===t.heightRatio);for(var d=this.widgets.length;d--;)if(this.widgets[d].widgetMaximized.value()){o=this.widgets[d];break}if(s.length>0&&null===o&&r){const t=s[s.length-1];t.heightRatio=1,o=t}if(o){for(d=this.widgets.length;d--;){(g=s[d])!==o&&g.setHeight(0)}s=[o]}for(d=s.length-1;d>0;d--){a-=(g=s[d]).widgetConfig&&g.widgetConfig.margin||1}for(d=s.length;d--;){(g=s[d]).$widget&&(void 0===i&&(i=g.$header.outerHeight(!0)),a-=i,n+=g.heightRatio)}var l=a/n,h=s.length-1;for(d=0;d<=h;d++){var c,g=s[d];c=d===h?a:Math.round(l*g.heightRatio),g.setHeight(c),a-=c}},V.prototype.onWidgetResizeHandleMousedown=function(t,e){if(!t.isDefaultPrevented()){var i,a,n,s=this;t.preventDefault();for(var o=this.widgets.length-1;o>0;o--)this.widgets[o]===e&&(i=this.widgets[o],a=this.widgets[o-1]);n=t.originalEvent.touches?t.originalEvent.touches[0].clientY:t.pageY;var r=a._rdState.bridge().height.value(),d=a.heightRatio+i.heightRatio,l=r+i._rdState.bridge().height.value();if(0!==l){var h,c=function(t){s.$page.addClass("widget-resize-mode");var e=(t.originalEvent.touches?t.originalEvent.touches[0].clientY:t.pageY)-n,o=Math.max(0,Math.min(r+e,l));h!==o&&(h=o,a.heightRatio=o/l*d,i.heightRatio=d-a.heightRatio,a.setHeight(o),i.setHeight(l-o))},g=function(t){$(document.documentElement).off("mousemove touchmove",c).off("mouseup touchend",g),s.$page.removeClass("widget-resize-mode"),h!==r&&(s.normalizeRatios(),s.widgetBarLayout&&s.widgetBarLayout.widgetBar&&s.widgetBarLayout.widgetBar.saveToTVSettings())};$(document.documentElement).on("mousemove touchmove",c).one("mouseup touchend",g)}}},V.prototype.normalizeRatios=function(){for(var t=1/0,e=this.widgets.length;e--;){var i=this.widgets[e].heightRatio;i<=0||!isFinite(i)||i<t&&(t=i)}if(isFinite(t)){for(var a=1;t<1;)t*=2,a*=2;for(;t>=2;)t/=2,a/=2;for(e=this.widgets.length;e--;)this.widgets[e].heightRatio*=a}},V.prototype.attachWidget=function(t,e){e=+e;var i=this.widgets.indexOf(t);-1!==i?this.widgets.splice(i,1):t.widgetBarPage&&t.widgetBarPage!==this&&t.widgetBarPage.removeWidget(t),e<this.widgets.length?e<0&&(e=0):e=this.widgets.length,delete t.widgetBarPage,Object.defineProperty(t,"widgetBarPage",{value:this,configurable:!0}),this.widgets.splice(e,0,t);var a=this.widgets[e+1];a?t.$widget.insertBefore(a.$widget):t.$widget.appendTo(this.$page),this.widgetBarLayout&&this.widgetBarLayout.getActivePage(),this.updateWidgetsHeight(),t.updateVisibleWatchedValue()},V.prototype.removeWidget=function(t){var e=this.widgets.indexOf(t);-1!==e&&(delete t.widgetBarPage,this.widgets.splice(e,1),t.$widget&&t.$widget.detach(),this.updateWidgetsHeight())},V.prototype.remove=function(){
this.widgetBarLayout&&this.widgetBarLayout.removePage(this)},V.prototype.destroy=function(){for(var t in this.remove(),this)this[t]instanceof $&&this[t].remove(),delete this[t]},V.prototype.isActiveAndVisible=function(){var t=this.widgetBarLayout;return!(!t||!t.visible)&&t.getActivePage()===this},V.prototype.onVisibilityChange=function(t){var e=t&&this.widgetBarLayout&&this.widgetBarLayout.getActivePage()===this;this.widgets.forEach((function(i){var a=i.getWidgetBarOption("widgetConfig")[i.type];e&&!a.doNotClearNotificationsOnVisibilityChange&&i.clearNotifications(),i.onVisibilityChange(t)}))},V.prototype.notify=function(t,e){!0!==(e=e||{}).clear?e.stopHighlightTab||(this.notificationCounter=this.notificationCounter+(~~t||1),this.updateNotifications(e.notificationValue)):this.clearNotifications()},V.prototype.clearNotifications=function(){this.notificationCounter=0,this.tab.updateNotifications(this.notificationCounter)},V.prototype.updateNotifications=function(t){var e="number"==typeof t?t:this.notificationCounter;this.tab.updateNotifications(e)},V.prototype.notificationCounter=0,V.prototype.getWidgets=function(t){for(var e=[],i=0;i<this.widgets.length;++i){var a=this.widgets[i];a.type===t&&e.push(a)}return e},N.prototype.setHeight=function(t){$(this._internalState.container.value())&&$(this._internalState.container.value()).height(t),this._internalState.height.setValue(t)},N.prototype.onWidthChange=function(t){this._internalState.width.setValue(t)},N.prototype.remove=function(){this.widgetBarPage&&this.widgetBarPage.removeWidget(this)},N.prototype.destroy=function(){for(var t in this.widgetObject&&"function"==typeof this.widgetObject.destroy&&this.widgetObject.destroy(),this.remove(),this.symbolLinking&&(this.symbolLinking.destroy(),this.symbolLinking=null),this.intervalLinking&&(this.intervalLinking.destroy(),this.intervalLinking=null),this.widgetVisible&&(this.widgetVisible.unsubscribe(),this.widgetVisible=null),this.widgetActive&&(this.widgetActive.unsubscribe(),this.widgetActive=null),this.watchedHeight&&(this.watchedHeight.unsubscribe(),this.watchedHeight=null),this.watchedWidth&&(this.watchedWidth.unsubscribe(),this.watchedWidth=null),this.widgetMaximized&&(this.widgetMaximized.unsubscribe(),this.widgetMaximized=null),this)this[t]instanceof $&&this[t].remove(),delete this[t];z._messageHandlers=z._messageHandlers.filter((function(t){return t.widget!==this}),this),clearTimeout(this._preloadTimeout)},N.prototype.onActiveStateChange=function(t){var e=(this.getWidgetBarOption("widgetConfig")||z.widgetConfig)[this.type];this.$icon&&this.$icon.toggleClass("active",!!t),t&&!e.doNotClearNotifications&&this.clearNotifications(),this.updateVisibleWatchedValue(),this.widgetActive.setValue(!!t)},N.prototype.toggleMaximize=function(t){if("boolean"!=typeof t)t=!this.widgetMaximized.value();else if(t===this.widgetMaximized.value())return;this.widgetMaximized.setValue(t),
this.widgetBarPage&&this.widgetBarPage.widgetBarLayout&&this.widgetBarPage.widgetBarLayout.widgetBar&&this.widgetBarPage.widgetBarLayout.widgetBar.saveToTVSettings(),this.widgetBarPage&&this.widgetBarPage.updateWidgetsHeight()},N.prototype.startWidget=function(){if(!this.widgetObject&&!this.widgetStartDelayed){var t=(this.getWidgetBarOption("widgetConfig")||z.widgetConfig)[this.type];if(t){var e=t.ctor;if(e){var i=this;if(this.widgetVisible=this.widgetVisible||new a,this.updateVisibleWatchedValue(),t.lazyLoad&&!this.widgetVisible.value())return this.widgetStartDelayed=!0,this.widgetVisible.when((function(){delete i.widgetStartDelayed,i.startWidget(),clearTimeout(i._preloadTimeout)})),void(t.preloadDelay&&(this._preloadTimeout=setTimeout((function(){e.preload&&e.preload()}),t.preloadDelay)));this.symbolLinking=l.symbol.spawn(),this.intervalLinking=l.interval.spawn();var n=this._rdState.bridge(),s={$widget:this.$widget,$header:this.$header,$headerspace:this.$headerspace,$body:$(n.container.value()),header:this.$header[0],widget:this.$widget[0],container:n.container.value(),properties:this.properties,notify:this.notify.bind(this),clearNotifications:this.clearNotifications.bind(this),visible:this.widgetVisible.readonly(),active:this.widgetActive.readonly(),symbol:this.symbolLinking,interval:this.intervalLinking,height:n.height,width:n.width,setTitle:this.setTitle.bind(this),setTitleHtml:this.setTitleHtml.bind(this),id:this.id,toggleMaximize:this.toggleMaximize.bind(this),maximized:this.widgetMaximized.readonly(),postMessage:z.postMessage.bind(this),onMessage:z.onMessage.bind(this),offMessage:z.offMessage.bind(this),hideDetach:!1,unAuthEditable:this.unAuthEditable};if(t.chartWidgetAllowed){var o=function(){return i.widgetBarPage&&i.widgetBarPage.widgetBarLayout&&i.widgetBarPage.widgetBarLayout.widgetBar&&i.widgetBarPage.widgetBarLayout.widgetBar.chartWidgetCollection};s.getChartWidget=function(){var t=o();return t?t.activeChartWidget.value():null},s.getChartWidgetCollection=function(){return o()||null}}null!=this.readonly?this.readonly&&(s.readonly=!0):this.getWidgetBarOption("readonly")&&(s.readonly=!0),null!=t.options&&(s.options=t.options),null!=this.stateData?s.data=this.stateData:null!=t.data&&(s.data=t.data);var r=this.widgetObject=new e(s);r.hasLifecycle&&this.widgetActive.readonly().subscribe((function(t){t?r.mount():r.unmount()}),{callWithLast:!t.lazyLoad}),this._widgetStarted.fire(this)}}}},N.prototype.widgetStarted=function(){return this._widgetStarted},N.prototype.notify=function(t,e){if(e=e||{},this.widgetBarPage&&(!this.widgetBarPage.isActiveAndVisible()||e.force))return this.widgetBarPage.notify(t,e)},N.prototype.clearNotifications=function(){if(this.widgetBarPage)return this.widgetBarPage.clearNotifications()},V.prototype.isActiveAndVisible=function(){var t=this.widgetBarLayout;return!(!t||!t.visible)&&t.getActivePage()===this},N.prototype.onVisibilityChange=function(t){this.updateVisibleWatchedValue()},N.prototype.updateVisibleWatchedValue=function(){
this.widgetVisible&&this.widgetVisible.setValue(!!this.widgetBarPage&&this.widgetBarPage.isActiveAndVisible())},N.prototype.setTitle=function(t){this.customTitle=t+"",this.$title&&this.$title.text(this.getTitle())},N.prototype.setTitleHtml=function(t){this.$title&&this.$title.html(t)},N.prototype.heightRatio=1,N.prototype.getWidgetBarOption=function(t){if(this.widgetBarPage&&this.widgetBarPage.widgetBarLayout&&this.widgetBarPage.widgetBarLayout.widgetBar&&t in this.widgetBarPage.widgetBarLayout.widgetBar)return this.widgetBarPage.widgetBarLayout.widgetBar[t]},L.prototype.value=function(t){return this._value},L.prototype.setValue=function(t,e){return this._value=t,this._settingsKey&&(null==t?(c("Settings debug","WigdetProperties.setValue: "+this._settingsKey,user.username),TVSettings.remove(this._settingsKey)):TVSettings.setJSON(this._settingsKey,t,e)),this._value},z.prototype.createHTML=function(){var t=this.$container;!t||t.size()<1||(t.empty(),this.layout.createHTML(),this.$wrap=$(document.createElement("div")).attr("class","widgetbar-wrap unselectable js-right-boundary").appendTo(t),this.layout.$pages.appendTo(this.$wrap),H()&&this.layout.$tabs.appendTo(this.$wrap),this.layout.$deviceButton&&this.$wrap.append(this.layout.$deviceButton),this.layout.$hider&&this.layout.$hider.appendTo(this.$wrap))},E.prototype._tabRendererOptions=function(){var t=this.widgetBar._internal;return{tabs:this.pages,isDomButtonAvailable:t.isDomButtonAvailable(),isOrderPanelButtonAvailable:t.isOrderPanelButtonAvailable(),isSupportTicketButtonAvailable:t.isSupportTicketButtonAvailable(),isHelpButtonAvailable:t.isHelpButtonAvailable()}},E.prototype.updateRightToolbar=function(){this.tabRenderer.updateOptions(this._tabRendererOptions())},E.prototype.createHTML=function(){var t=this;if(t.$tabs=t.$tabscontent=$(),H()&&(t.$tabs=$('<div class="widgetbar-tabs">'),t.tabRenderer&&(t.tabRenderer.destroy(),t.tabRenderer=null),t.tabRenderer=new m(t.widgetBar,t.$tabs[0],t._tabRendererOptions())),t.$pages=$(document.createElement("div")).attr("class","widgetbar-pages"),t.$pagescontent=$(document.createElement("div")).attr("class","widgetbar-pagescontent").appendTo(t.$pages),H()||t.$pages.css("right","-1px"),t.$handle=$(document.createElement("div")).attr("class","widgetbar-handle").appendTo(t.$pages),t.$handle.on("mousedown touchstart",t.onLayoutResizeHandleMousedown.bind(t)),t.$handle.on("contextmenu",(function(t){t.target.classList.contains("widgetbar-handle")&&t.preventDefault()})),this.widgetBar.showCloseButton){t.$hider=$(document.createElement("div")).addClass("widgetbar-hider");var e=function(){var e=t.$hider.get(0);e.classList.toggle("widgetbar-hider--closed",t.isMinimized.value()),e.classList.toggle("js-hidden",H()&&t.isMinimized.value()),y.render(b.createElement(f,{isMinimized:t.isMinimized.value(),onClick:function(){t.setMinimizedState(!t.minimized)}}),e)};t.isMinimized.subscribe(e),e()}t.pages.forEach((function(e){e.createHTML(),e.$page.appendTo(t.$pagescontent)}))},V.prototype.createHTML=function(){var t=this
;t.$page=$(document.createElement("div")).attr("class","widgetbar-page"),t.widgets.forEach((function(e){e.createHTML(),e.$widget.appendTo(t.$page)}))},V.prototype.createTabButtonViewModel=function(){var t=this;t.tab=new v({icon:z.svgIcons[t.icon],hint:t.title,onClick:function(e){t.widgetBarLayout&&t.widgetBarLayout.onTabClick(e,t)},TabButtonComponent:t.TabButtonComponent})},N.prototype.getTitle=function(t){var e,i,a,n=(e=this.type,i=this.getWidgetBarOption("widgetConfig"),!(a=((i=i||z.widgetConfig)[e]||0).title)&&e&&(a=(""+e).match(/[A-Z]{2,}|\d+(?:\.\d+)?|[A-Z]?[a-z]+/g).join(" ").replace(/^.|\s./g,(function(t){return t.toUpperCase()}))),a||void 0);return t&&this.customTitle&&n?this.customTitle.substr(0,n.length)===n?this.customTitle:n+": "+this.customTitle:this.customTitle||n||s("Widget")},N.prototype.createHTML=function(){var t=this,e=!!t.widgetConfig&&(!!t.widgetConfig.icon&&t.widgetConfig.icon),i=t.widgetConfig&&t.widgetConfig.emptyHeader,a=t.widgetConfig&&t.widgetConfig.noHeader,n=t.widgetConfig&&t.widgetConfig.noHeaderSpace,s=t.widgetConfig&&t.widgetConfig.widgetClass||"",o=t.widgetConfig&&t.widgetConfig.headerClass||"",r=t.widgetConfig&&t.widgetConfig.titleClass||"";t.$widget=$(document.createElement("div")).attr("class",p(s,"widgetbar-widget","widgetbar-widget-"+t.type)),t.$header=$(document.createElement("div")).attr("class",o||"widgetbar-widgetheader"),a||t.$header.appendTo(t.$widget),t.$header.on("contextmenu",(function(t){"input"!==t.target.tagName.toLowerCase()&&t.preventDefault()})),e&&(t.$headericon=$(document.createElement("div")).attr("class","widgetbar-widgetheader-icon widgetbar-widgetheader-icon-"+e).append($(z.svgIcons[e])).appendTo(t.$header)),n||(t.$headerspace=$(document.createElement("div")).attr("class","widgetbar-headerspace").appendTo(t.$header),t.$headerspace.on("click",(function(t){t.preventDefault()}))),i||(t.$title=$(document.createElement("div")).attr("class",p("widgetbar-widgettitle",r)).appendTo(t.$header),t.$title.text(this.getTitle()));var d=$(document.createElement("div")).attr("class","widgetbar-widgetbody").appendTo(t.$widget);d.on("contextmenu",(function(t){t.target.classList.contains("widgetbar-widgetbody")&&t.preventDefault()})),t._internalState.container.setValue(S(d)),t.$resizehandle=$(document.createElement("div")).attr("class","widgetbar-widgethandle").appendTo(t.$widget),t.$resizehandle.on("mousedown touchstart",(function(e){t.widgetBarPage&&t.widgetBarPage.onWidgetResizeHandleMousedown(e,t)})),t.$resizehandle.on("contextmenu",(function(t){t.target.classList.contains("widgetbar-widgethandle")&&t.preventDefault()})),!0===this.maximized&&(this.toggleMaximize(!0),delete this.maximized)},E.demarshal=function(t,e){return(new E).demarshal(t,e)},V.demarshal=function(t,e){return(new V).demarshal(t,e)},N.demarshal=function(t,e){return(new N).demarshal(t,e)},E.prototype.demarshal=function(t,e){if("string"==typeof t)try{t=JSON.parse(t)}catch(o){}if(!t||"object"!=typeof t)return null;this.width=+t.width,
!isFinite(this.width)||this.width<=0?delete this.width:this.width<this.MIN_WIDTH&&(this.width=this.MIN_WIDTH),"minimized"in t?(this.minimized=!!t.minimized,this.isMinimized.setValue(this.minimized)):(delete this.minimized,this.isMinimized.setValue(this.minimized)),"version"in t&&(this.version=t.version);var i=+t.activeIndex,a=t.activeName,n=!1,s=this.pages;return s.splice(0,this.pages.length),Array.isArray(t.pages)&&t.pages.forEach((function(t,o){var r=new V({widgetBarLayout:this}).demarshal(t,e);a?t.name===a&&r&&(i=o,n=!0):r||o!==i||i--,r&&s.push(r)}),this),a&&!n&&(i=0),0===s.length?(this.activeIndex=-1,this.activePageIndex.setValue(this.activeIndex)):i>=0&&i<s.length&&(this.activeIndex=i,this.activePageIndex.setValue(this.activeIndex)),this},V.prototype.demarshal=function(t,e){if("string"==typeof t)try{t=JSON.parse(t)}catch(a){}if(!t||!t.widgets||!Array.isArray(t.widgets))return null;var i=this.widgets;return i.splice(0,i.length),this._gaEvent=t._gaEvent,this.title=t.title,this.name=t.name,this.icon=t.icon,this.spaceBottom=t.spaceBottom,this.spaceBottomText=t.spaceBottomText,this.onBottom=t.onBottom,this.TabButtonComponent=t.TabButtonComponent,this.createTabButtonViewModel(),t.widgets.forEach((function(t){var a=new N({widgetBarPage:this}).demarshal(t,e);a&&i.push(a)}),this),0===i.length?null:this},N.prototype.demarshal=function(t,e){if("string"==typeof t)try{t=JSON.parse(t)}catch(s){}if(!t||"object"!=typeof t)return null;var i;if("id"in t?(this.id=t.id+"",this.type=this.id.replace(/\..*/,"")):"type"in t?(this.type=t.type+"",this.id=z.prototype.createWidgetId(this.type)):(delete this.type,delete this.id),null!=t.readonly?this.readonly=!!t.readonly:delete this.readonly,this.stateData=t.data,isFinite(+t.heightRatio)&&+t.heightRatio>=0?this.heightRatio=+t.heightRatio:delete this.heightRatio,!0===t.maximized&&(this.maximized=!0),!0===t.unAuthEditable&&(this.unAuthEditable=!0),t.settingsKey)i=t.settingsKey;else if(this.id){var a=this.getWidgetBarOption("_settingsPrefix");a&&(i=a+".widget."+this.id)}this.properties=new L({widgetBarWidget:this,settingsKey:i}),null==t.properties||i&&null!==this.properties.value()||this.properties.setValue(t.properties),"news"!==this.type&&"hotlist"!==this.type||!i||this.properties.setValue($.extend(!0,{},t.properties,this.properties.value())),"hotlist"===this.type&&!i&&t.properties&&this.properties.setValue(t.properties),this.widgetConfig=null;var n=this.getWidgetBarOption("widgetConfig");return n[this.type]&&(this.widgetConfig=n[this.type]),this},E.prototype.marshal=function(t){var e=[];this.pages.forEach((function(i){var a=i.marshal(t);a&&(e=e.concat(a))}));for(var i={},a=0;a<e.length;a++)if(e[a].type){var n=e[a].type;e[a].id&&delete e[a].type,i[n]?i[n].push(e[a]):i[n]=[e[a]]}var s={widgets:i,settings:{}};return["minimized","width","activeIndex","version","activeName"].forEach((function(t){this[t]!==E.prototype[t]&&(s.settings[t]=this[t])}),this),s},V.prototype.marshal=function(t){var e=[];return this.widgets.forEach((function(i){var a=i.marshal(t);a&&e.push(a)})),0===e.length?null:e},
N.prototype.marshal=function(t){var e={};return this.id&&(e.id=this.id),this.type&&(e.type=this.type),["heightRatio"].forEach((function(t){this[t]!==N.prototype[t]&&(e[t]=this[t])}),this),this.widgetMaximized.value()&&(e.maximized=!0),t&&t.includeWidgetProperties&&this.properties&&(e.properties=TradingView.clone(this.properties.value())),e},t.exports.WidgetBar=z}).call(this,i("Kxc7"),i("hY0g"),i("aIyQ"))},EKk7:function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return l}));var a=i("q1tI"),n=i("TSYQ"),s=i("XAms"),o=i("Wz44");const r=o,d="http://www.w3.org/2000/svg";function l(t){const{direction:e,theme:i=o}=t;return a.createElement("svg",{xmlns:d,width:"9",height:"27",viewBox:"0 0 9 27",className:n(i.container,"right"===e?i.mirror:null),onContextMenu:s.a},a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{className:i.background,d:"M4.5.5a4 4 0 0 1 4 4v18a4 4 0 1 1-8 0v-18a4 4 0 0 1 4-4z"}),a.createElement("path",{className:i.arrow,d:"M5.5 10l-2 3.5 2 3.5"})))}},"Fb/L":function(t,e,i){"use strict";i.r(e),i.d(e,"WidgetBarInternal",(function(){return n}));var a=i("Kxc7");class n{isHelpButtonAvailable(){return!a.enabled("widget")&&!a.enabled("charting_library_base")}isSupportTicketButtonAvailable(){return a.enabled("bugreport_button")}isDomButtonAvailable(){return a.enabled("dome_widget")}isOrderPanelButtonAvailable(){return a.enabled("order_panel")}}},GNw3:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="45" height="45"><path fill="currentcolor" d="m5 12v-1h4v1zm5-6h1v4h-1zm0 7h1v4h-1zm2-1v-1h4v1zm7 0v-1h10.5a4.5 4.5 0 0 1 4.5 4.5v14a4.5 4.5 0 0 1-4.5 4.5h-15a4.5 4.5 0 0 1-4.5-4.5V20h1v9.5a3.5 3.5 0 0 0 3.5 3.5h15a3.5 3.5 0 0 0 3.5-3.5v-14a3.5 3.5 0 0 0-3.5-3.5H19zm-3 5a1 1 0 0 0 0 2h12a1 1 0 0 0 0-2H16zm0-1h12a2 2 0 1 1 0 4H16a2 2 0 1 1 0-4zm-1 8v-1h8v1zm0 4v-1h8v1zm11-4v-1h3v1zm0 4v-1h3v1z"/></svg>'},HSWI:function(t,e,i){t.exports={filler:"filler-1ggHJ4cQ"}},"If+W":function(t,e,i){t.exports={toolbar:"toolbar-OvhMiobx",isGrayed:"isGrayed-OvhMiobx"}},Iivm:function(t,e,i){"use strict";var a=i("mrSG"),n=i("q1tI");const s=n.forwardRef((t,e)=>{const{icon:i=""}=t,s=Object(a.a)(t,["icon"]);return n.createElement("span",Object.assign({},s,{ref:e,dangerouslySetInnerHTML:{__html:i}}))});i.d(e,"a",(function(){return s}))},Opoj:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17" width="17" height="17"><path fill="none" stroke="currentColor" d="M1 1l15 15M1 16L16 1"/></svg>'},PW1O:function(t,e){
t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="45" height="45"><path fill="currentcolor" d="m17 30a1 1 0 0 1 0 4h-4a1 1 0 0 1 0-4m0 1a1 1 0 0 0 0 2h4a1 1 0 0 0 0-2m0-7a1 1 0 0 1 0 4h-4a1 1 0 0 1 0-4m0 1a1 1 0 0 0 0 2h4a1 1 0 0 0 0-2m6 5a1 1 0 0 1 0 4 1 1 0 0 1 0-4m0 1a1 1 0 0 0 0 2 1 1 0 0 0 0-2m0-7a1 1 0 0 1 0 4 1 1 0 0 1 0-4m0 1a1 1 0 0 0 0 2 1 1 0 0 0 0-2m0-7a1 1 0 0 1 0 4 1 1 0 0 1 0-4m0 1a1 1 0 0 0 0 2 1 1 0 0 0 0-2m0-7a1 1 0 0 1 0 4 1 1 0 0 1 0-4m0 1a1 1 0 0 0 0 2 1 1 0 0 0 0-2m10 5a1 1 0 0 1 0 4h-4a1 1 0 0 1 0-4m0 1a1 1 0 0 0 0 2h4a1 1 0 0 0 0-2m0-7a1 1 0 0 1 0 4h-4a1 1 0 0 1 0-4m0 1a1 1 0 0 0 0 2h4a1 1 0 0 0 0-2"/></svg>'},TdlR:function(t,e,i){"use strict";i("UgcK"),function(t){var e=!1,i=document.body||document.documentElement,a="animation",n="Webkit Moz O ms Khtml".split(" "),s="";if(void 0!==i.style.animationName&&(e=!0),!1===e)for(var o=0;o<n.length;o++)if(void 0!==i.style[n[o]+"AnimationName"]){s=n[o],a=s+"Animation","-"+s.toLowerCase()+"-",e=!0;break}var r=["webkit","moz","MS","o",""];function d(t){t.stop(!0),t.css("background-color",""),t.removeData("flicker-enable"),t.removeData("flicker-options")}function l(e){var i=e.data("flicker-enable");i&&(!0!==i?--i?(h(e),e.data("flicker-enable",i)):function(e){var i=e.data("flicker-options").complete;d(e),i&&t.isFunction(i)&&i()}(e):h(e))}function h(t){var e=t.css("background-color"),i=t.data("flicker-options"),a=i.highlightColor||"#fbf8e9",n=i.duration||400,s=i.easing||"swing";t.animate({"background-color":a},n,s).animate({"background-color":e},n,s,l.bind(t,t))}t.fn.highlight=function(i,n){switch(i){default:return i=void 0===i||i,this.each((function(){if(e){i=!0===i?"infinite":i,function(t,e,i){for(var a=0;a<r.length;a++)r[a]||(e=e.toLowerCase()),t.addEventListener(r[a]+e,i,!1)}(this,"AnimationEnd",(function(){this.style[a]=""})),document.getElementsByTagName("html")[0].classList.contains("theme-dark")?this.style[a]="highlight-animation-theme-dark 0.4s ease-in-out "+i+" alternate":this.style[a]="highlight-animation 0.4s ease-in-out "+i+" alternate"}else{var s=t(this);s.data("flicker-enable",i),s.data("flicker-options",t.extend({},n||{})),s.is(":animated")||h(s)}}));case!1:return this.each((function(){e?this.style[a]="":d(t(this))}))}}}(jQuery)},UgcK:function(t,e,i){},Vike:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 10" width="20" height="10"><path fill="none" stroke="currentColor" stroke-width="1.5" d="M2 1l8 8 8-8"/></svg>'},Wz44:function(t,e,i){t.exports={container:"container-3CL4Geq2",mirror:"mirror-3CL4Geq2",background:"background-3CL4Geq2",arrow:"arrow-3CL4Geq2"}},YvYu:function(t,e){
t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45" width="45" height="45"><path fill="currentcolor" d="M16.5 21.5l8.146 8.146a.914.914 0 0 1-1.292 1.293L16.5 24.086l-6.854 6.853a.914.914 0 0 1-1.292-1.293L16.5 21.5zm0 4l6.146 6.146a1.914 1.914 0 0 0 2.708-2.707L16.5 20.086l-8.854 8.853a1.914 1.914 0 1 0 2.708 2.707L16.5 25.5zm13 0l8.146-8.146a.914.914 0 0 0-1.292-1.293L29.5 22.914l-6.854-6.853a.914.914 0 0 0-1.292 1.293L29.5 25.5zm0-4l6.146-6.146a1.914 1.914 0 0 1 2.708 2.707L29.5 26.914l-8.854-8.853a1.914 1.914 0 1 1 2.708-2.707L29.5 21.5z"/></svg>'},"aE/C":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M22.308 8.606a.5.5 0 0 0-.616 0l-11.5 9a.5.5 0 0 0 0 .788l11.5 9a.5.5 0 0 0 .616 0l11.5-9a.5.5 0 0 0 0-.788l-11.5-9zM22 26.366L11.311 18 22 9.635 32.689 18 22 26.365zm0 4l-11.192-8.76-.616.788 11.5 9a.5.5 0 0 0 .616 0l11.5-9-.616-.788L22 30.366zm0 4l-11.192-8.76-.616.788 11.5 9a.5.5 0 0 0 .616 0l11.5-9-.616-.788L22 34.366z"/></svg>'},ai7J:function(t,e,i){t.exports={separator:"separator-3YbwEKtL"}},dCE3:function(t,e,i){t.exports={button:"button-2OmDro4I",icon:"icon-2OmDro4I"}},dECE:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="45" height="45"><path fill="currentcolor" d="m29.5 11a4.5 4.5 0 0 1 4.5 4.5v14a4.5 4.5 0 0 1-4.5 4.5h-15a4.5 4.5 0 0 1-4.5-4.5v-14a4.5 4.5 0 0 1 4.5-4.5m0 1a3.5 3.5 0 0 0-3.5 3.5v14a3.5 3.5 0 0 0 3.5 3.5h15a3.5 3.5 0 0 0 3.5-3.5v-14a3.5 3.5 0 0 0-3.5-3.5M15 17v-1h14v1zm0 4v-1h14v1zm0 4v-1h14v1zm0 4v-1h14v1z"/></svg>'},dkCg:function(t,e,i){"use strict";i.r(e);var a=i("q1tI"),n=i("i8i4"),s=(i("EsMY"),i("17x9")),o=i("TSYQ"),r=i("Iivm"),d=i("dCE3"),l=i("Opoj");function h(t){const e=o(t.className,d.button,t.isGrayed&&d.isGrayed);return a.createElement("div",{className:e,onClick:t.onClick,"data-role":"button","data-name":t.name},a.createElement(r.a,{className:d.icon,icon:l}))}var c=i("5AaZ"),g=i("1Pr8");function u(t){t=Object.assign({isTab:!0,theme:g},t);const{NotificationComponent:e=p}=t,i=o(t.className,t.theme.button,t.isTab&&t.theme.isTab,t.isActive&&t.theme.isActive,t.isGrayed&&t.theme.isGrayed,t.hint&&"apply-common-tooltip common-tooltip-vertical");return a.createElement("div",{className:i,title:t.hint,onClick:t.onClick,ref:t.reference,"data-role":"button","data-name":t.name},a.createElement("div",{className:t.theme.hoverMask}),a.createElement(r.a,{icon:t.icon}),a.createElement("div",{className:t.theme.counterRow},a.createElement(e,{className:t.theme.counter,count:t.count,"data-name":"counter"})))}function p(t){return a.createElement("span",{className:t.className,"data-name":"counter"},t.count&&0!==t.count?t.count.toString():void 0)}var w=i("vOQ2"),m=i("Eyy1"),v=i("1TxM"),f=i("PW1O");const y=window.t("DOM"),b=Object(v.b)();class B extends a.PureComponent{constructor(t,e){super(t,e),this._handleClick=()=>{const{setDomPanelVisibility:t}=Object(m.ensure)(this.context.widgetBar.tradingPanelAccessor);t(!this.state.isActive)},
this._handleIsOpenedChange=()=>{this.setState({isActive:this._tradingPanel.isPageOpened(w.d.DomPanel)})},this._handleActivePageChange=t=>{this._tradingPanel.isOpened.value()&&this.setState({isActive:t===w.d.DomPanel})},Object(v.c)(e,{widgetBar:s.any.isRequired}),this._tradingPanel=Object(m.ensure)(this.context.widgetBar.tradingPanelAccessor).tradingPanel,this.state={isActive:this._tradingPanel.isPageOpened(w.d.DomPanel)}}componentDidMount(){this._tradingPanel.isOpened.subscribe(this._handleIsOpenedChange),this._tradingPanel.activePage.subscribe(this._handleActivePageChange)}componentWillUnmount(){this._tradingPanel.isOpened.unsubscribe(this._handleIsOpenedChange),this._tradingPanel.activePage.unsubscribe(this._handleActivePageChange)}render(){return a.createElement(u,Object.assign({},this.props,{icon:f,hint:y,isActive:this.state.isActive,onClick:this._handleClick}))}}B.contextType=b;var _=i("JWMC"),C=i("YvYu");const T=window.t("Order Panel"),P=Object(v.b)();class S extends a.PureComponent{constructor(t,e){super(t,e),this._handleClick=()=>{const{setOrderPanelVisibility:t}=Object(m.ensure)(this.context.widgetBar.tradingPanelAccessor),e=!this.state.isActive;t(e),e&&Object(_.trackEvent)("GUI","Open Order Panel")},this._handleIsOpenedChange=()=>{this.setState({isActive:this._tradingPanel.isPageOpened(w.d.OrderPanel)})},this._handleActivePageChange=t=>{this._tradingPanel.isOpened.value()&&this.setState({isActive:t===w.d.OrderPanel})},Object(v.c)(e,{widgetBar:s.any.isRequired}),this._tradingPanel=Object(m.ensure)(this.context.widgetBar.tradingPanelAccessor).tradingPanel,this.state={isActive:this._tradingPanel.isPageOpened(w.d.OrderPanel)}}componentDidMount(){this._tradingPanel.isOpened.subscribe(this._handleIsOpenedChange),this._tradingPanel.activePage.subscribe(this._handleActivePageChange)}componentWillUnmount(){this._tradingPanel.isOpened.unsubscribe(this._handleIsOpenedChange),this._tradingPanel.activePage.unsubscribe(this._handleActivePageChange)}render(){return a.createElement(u,Object.assign({},this.props,{icon:C,hint:T,isActive:this.state.isActive,onClick:this._handleClick}))}}S.contextType=P;var W=i("ai7J");function x(t){return a.createElement("div",{className:o(t.className,W.separator)})}var M=i("HSWI");function A(t){return a.createElement("div",{className:o(M.filler,t.className)})}function z(t,e){return class extends a.PureComponent{constructor(t){super(t),this._bindedForceUpdate=()=>this.forceUpdate(),this.state={viewModel:e}}componentDidMount(){const{viewModel:t}=this.state;t.notificationsCount.subscribe(this._bindedForceUpdate),t.isActive.subscribe(this._bindedForceUpdate)}componentWillUnmount(){const{viewModel:t}=this.state;t.notificationsCount.unsubscribe(this._bindedForceUpdate),t.isActive.unsubscribe(this._bindedForceUpdate)}render(){const{viewModel:e}=this.state,i=e.notificationsCount.value();return a.createElement(t,Object.assign({},this.props,{icon:e.icon.value(),isActive:e.isActive.value(),onClick:e.onClick.value(),hint:e.hint.value(),count:i}))}}}var O=i("XAms"),E=i("txPx"),V=i("8d0Q"),$=i("If+W")
;const N=Object(E.getLogger)("Platform.GUI.RightToolbar"),L=Object(v.b)();class H extends a.PureComponent{constructor(t,e){super(t,e),this._pages={},this._isTradingPanelCanBeShown=null,this._tradingActivePage=null,this._isTradingPanelOpened=null,this._handleMouseOver=t=>{Object(V.a)(t)&&this.setState({isHovered:!0})},this._handleMouseOut=t=>{Object(V.a)(t)&&this.setState({isHovered:!1})},this._handleFullscreenChange=t=>{this.setState({isFullscreen:t})},this._handleCloseClick=()=>{const{widgetBar:t}=this.context;t.layout.setMinimizedState(!0)},this._handleGrayedChange=()=>{this.setState({isGrayed:this._isGrayed()})},this._handleDomButtonVisibilityChange=t=>{this.setState({isTradingButtonsVisible:t})},this._isGrayed=()=>{let t=this._isMinimized.value();return null!==this._isTradingPanelOpened&&(t=t&&!this._isTradingPanelOpened.value()),!t},Object(v.c)(e,{widgetBar:s.any.isRequired});const{widgetBar:i}=this.context;if(this._isMinimized=i.layout.isMinimized.spawn(),this._isFullscreen=i.resizerBridge.fullscreen.spawn(),i.tradingPanelAccessor){const t=i.tradingPanelAccessor.tradingPanel;this._isTradingPanelCanBeShown=t.isAvailable.spawn(),this._tradingActivePage=t.activePage.spawn(),this._isTradingPanelOpened=t.isOpened.spawn()}this.state={isHovered:!1,isGrayed:this._isGrayed(),isFullscreen:this._isFullscreen.value(),isTradingButtonsVisible:!1},this._isTradingPanelCanBeShown&&(this.state=Object.assign(Object.assign({},this.state),{isTradingButtonsVisible:this._isTradingPanelCanBeShown.value()})),i.layout.pages.forEach(t=>{var e;void 0===t.name&&N.logWarn('Page does not provide required field "name"'),this._pages[t.name]=z(null!==(e=t.tab.TabButtonComponent)&&void 0!==e?e:u,t.tab)}),this._toolset=this._createToolset()}componentDidMount(){this._isFullscreen.subscribe(this._handleFullscreenChange),this._isMinimized.subscribe(this._handleGrayedChange),null!==this._isTradingPanelCanBeShown&&this._isTradingPanelCanBeShown.subscribe(this._handleDomButtonVisibilityChange),null!==this._isTradingPanelOpened&&this._isTradingPanelOpened.subscribe(this._handleGrayedChange)}componentWillUnmount(){this._isFullscreen.destroy(),this._isMinimized.destroy(),null!==this._isTradingPanelCanBeShown&&this._isTradingPanelCanBeShown.destroy(),null!==this._tradingActivePage&&this._tradingActivePage.destroy(),null!==this._isTradingPanelOpened&&this._isTradingPanelOpened.destroy()}render(){const{className:t,isDomButtonAvailable:e,isOrderPanelButtonAvailable:i}=this.props,{isHovered:n,isGrayed:s,isFullscreen:r,isTradingButtonsVisible:d}=this.state,{widgetBar:l}=this.context,g=this._toolset,u=i&&d,p=e&&d;return a.createElement(c.a,{isVisibleFade:Modernizr.mobiletouch,isVisibleButtons:!Modernizr.mobiletouch&&n,isVisibleScrollbar:!1,onMouseOver:this._handleMouseOver,onMouseOut:this._handleMouseOut},a.createElement("div",{className:o(t,$.toolbar,s&&$.isGrayed),"data-name":"right-toolbar",onContextMenu:O.a},l.adaptive&&r&&a.createElement(h,{name:"close-button",onClick:this._handleCloseClick
}),this._renderPages(),(u||p)&&a.createElement(x,null),u&&a.createElement(S,{name:"order-panel-button",isGrayed:s}),p&&a.createElement(B,{name:"dom-button",isGrayed:s}),a.createElement(A,null),this._renderPages(!0),g.SupportTicketButton&&a.createElement(g.SupportTicketButton,{name:"bug-report-button",isGrayed:s,isTab:!1}),g.HelpButton&&a.createElement(g.HelpButton,{name:"help-button",isGrayed:s,isTab:!1})))}_renderPages(t){const e=[],{isGrayed:i}=this.state,{widgetBar:n}=this.context,{pages:s}=n.layout;return s.forEach(n=>{if(n.name in this._pages&&Boolean(n.onBottom)===Boolean(t)){const t=this._pages[n.name];e.push(a.createElement(t,{name:n.name,isGrayed:i,key:n.name})),n.spaceBottom&&e.push(a.createElement(x,{key:n.spaceBottomText}))}}),e}_createToolset(){const{widgetBar:t}=this.context;return{SupportTicketButton:this.props.isSupportTicketButtonAvailable?z(u,t.ensureSupportTicketButtonViewModel()):void 0,HelpButton:this.props.isHelpButtonAvailable?z(u,t.ensureHelpButtonViewModel()):void 0}}}H.contextType=L;const k={widgetBar:s.any};class I extends a.PureComponent{constructor(t){super(t),this._registry={widgetBar:this.props.widgetBar}}render(){return a.createElement(v.a,{validation:k,value:this._registry},this.props.children)}}i.d(e,"RightToolbarRenderer",(function(){return D}));class D{constructor(t,e,i){this._widgetBar=t,this._container=e,this._options=i,this._render()}updateOptions(t){this._options=t,this._render()}destroy(){n.unmountComponentAtNode(this._container)}_render(){n.render(a.createElement(I,{widgetBar:this._widgetBar},a.createElement(H,{isDomButtonAvailable:this._options.isDomButtonAvailable,isOrderPanelButtonAvailable:this._options.isOrderPanelButtonAvailable,isHelpButtonAvailable:this._options.isHelpButtonAvailable,isSupportTicketButtonAvailable:this._options.isSupportTicketButtonAvailable})),this._container)}}},e9Yb:function(t,e,i){t.exports={"css-value-widgetbar-tabs-width":"45px","css-value-widgetbar-border-width":"1px"}},jkvV:function(t,e,i){"use strict";i.r(e),i.d(e,"Hider",(function(){return d}));i("YFKU");var a=i("q1tI"),n=i("TSYQ"),s=i("EKk7");const o=window.t("Hide Tab"),r=window.t("Open Tab");function d(t){const e=n(t.className,"apply-common-tooltip","common-tooltip-vertical","common-tooltip-otl");return a.createElement("div",{className:e,onClick:t.onClick,title:t.isMinimized?r:o},a.createElement(s.b,{direction:t.isMinimized?"left":"right"}))}},tBUM:function(t,e,i){"use strict";i.r(e),i.d(e,"WidgetBarTabButtonViewModel",(function(){return o}));var a=i("hY0g"),n=i.n(a);const s={isActive:!1,notificationCount:0};class o{constructor(t){const e=Object.assign(Object.assign({},s),t);this.isActive=new n.a(e.isActive),this.notificationsCount=new n.a(e.notificationCount),this.icon=new n.a(e.icon),this.hint=new n.a(e.hint),this.onClick=new n.a(e.onClick),this.TabButtonComponent=t.TabButtonComponent}onActiveStateChange(t){this.isActive.setValue(t)}updateNotifications(t){this.notificationsCount.setValue(t)}}},uJ8n:function(t,e,i){t.exports={wrap:"wrap-379NmUSU",scrollWrap:"scrollWrap-379NmUSU",
noScrollBar:"noScrollBar-379NmUSU",content:"content-379NmUSU",icon:"icon-379NmUSU",scrollBot:"scrollBot-379NmUSU",scrollTop:"scrollTop-379NmUSU",isVisible:"isVisible-379NmUSU",iconWrap:"iconWrap-379NmUSU",fadeBot:"fadeBot-379NmUSU",fadeTop:"fadeTop-379NmUSU"}},vOQ2:function(t,e,i){"use strict";var a;i.d(e,"d",(function(){return a})),i.d(e,"a",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"b",(function(){return o})),function(t){t.DomPanel="domPanel",t.OrderPanel="orderPanel"}(a||(a={}));const n=400,s=315,o=451},wtQX:function(t,e,i){"use strict";i.r(e),i.d(e,"isExists",(function(){return l})),i.d(e,"load",(function(){return h})),i.d(e,"isLoaded",(function(){return c})),i.d(e,"onReady",(function(){return g}));var a=[],n={},s=!1;function o(t){return a.filter((function(e){return e.m===t}))[0]}function r(t){const e=o(t);e&&e.cb&&$.when(e.cb()).done((function(){e.state="loaded",e.args=Array.prototype.slice.call(arguments),delete e.cb,d(e.m)}))}function d(t){var e=o(t),i=t=>{t&&!t.length||(t.shift().apply(null,e.args),i(t))},a=n[t];a&&i(a)}function l(t){return!!o(t)}function h(t,e,i){if(e){const i=o(t);i?i.cb=e:a.push({m:t,cb:e})}(void 0!==i||s)&&function(t,e){"number"==typeof e?setTimeout(()=>r(t),e):(!0===e||s)&&r(t)}(t,i)}function c(t){var e=o(t);return e&&"loaded"===e.state}function g(t,e){var i=o(t);n[t]=n[t]||[],n[t].push(e),i&&"loaded"===i.state&&d(t)}setTimeout((function(){var t;for(s=!0,t=0;t<a.length;t+=1)r(a[t].m)}),5e3)},xrkQ:function(t,e,i){t.exports={"css-value-widgets-margin":"4px",widget:"widget-1quyc-Kt",widgetHeader:"widgetHeader-1quyc-Kt",widgetTitle:"widgetTitle-1quyc-Kt",headerSpace:"headerSpace-1quyc-Kt"}}}]);