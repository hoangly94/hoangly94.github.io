(window.webpackJsonp=window.webpackJsonp||[]).push([["terminal-configset"],{"5bCf":function(e,t,n){e.exports={container:"container-1z0p8Gw0",active:"active-1z0p8Gw0",title:"title-1z0p8Gw0",inactive:"inactive-1z0p8Gw0",titleText:"titleText-1z0p8Gw0",indicator:"indicator-1z0p8Gw0",disconnected:"disconnected-1z0p8Gw0",failed:"failed-1z0p8Gw0",connecting:"connecting-1z0p8Gw0",connected:"connected-1z0p8Gw0",loginTooltip:"loginTooltip-1z0p8Gw0"}},Bf1h:function(e,t,n){"use strict";n.r(t),n("YFKU");const i={paper_trading:{name:"paper_trading",title:window.t("Trading Panel"),buttonOpenTooltip:window.t("Open Trading Panel"),buttonCloseTooltip:window.t("Close Trading Panel"),ctor:null,_gaEvent:"Trading Panel"},scripteditor:{name:"scripteditor",title:window.t("Pine Editor"),buttonOpenTooltip:window.t("Open Pine Script Editor"),buttonCloseTooltip:window.t("Close Pine Script Editor"),ctor:null,_gaEvent:"Pine Editor"},backtesting:{name:"backtesting",title:window.t("Strategy Tester"),buttonOpenTooltip:window.t("Open Strategy Tester"),buttonCloseTooltip:window.t("Close Strategy Tester"),ctor:null,_gaEvent:"Strategy Tester"},screener:{name:"screener",title:window.t("Screener"),buttonOpenTooltip:window.t("Open Screener"),buttonCloseTooltip:window.t("Close Screener"),ctor:null,_gaEvent:"Screener"},text_notes:{name:"text_notes",title:window.t("Text Notes"),buttonOpenTooltip:window.t("Open Text Notes Panel"),buttonCloseTooltip:window.t("Close Text Notes Panel"),ctor:null,_gaEvent:"Text Notes"}};var r=n("N22A"),o=n("hY0g"),a=n.n(o),c=n("yqjg"),s=n("Eyy1");class d{constructor(e){this._contentRenderer=Promise.resolve(),this._spinnerContainer=document.createElement("div"),this._offlineScreenContainer=document.createElement("div"),this._renderer=Promise.resolve(),this._filter=new a.a(!0),this._bridge=e,Object(r.waitTradingService)().then((e=>{this._trading=e,this.onStatusChange(e.connectStatus()),this._trading.onConnectionStatusChange.subscribe(this,this.onStatusChange)})),n.e("spinner-renderer").then(n.bind(null,"lG9f")).then((e=>{e.render(this._spinnerContainer)})),Object(c.b)(Object(s.ensureDefined)(this._offlineScreenContainer))}activate(){this._contentRenderer.then((()=>{this._content&&this._content.drawAttention&&this._content.drawAttention()}))}onStatusChange(e){this._connectStatus!==e&&(this._connectStatus=this._trading.connectStatus(),window.navigator.onLine?(this._contentRenderer=Promise.resolve(),this._content&&this._content.remove(),2===e&&this._renderSpinner(),3!==e&&4!==e?1===e&&this._renderAccountManager(this._trading.activeBroker()):this._renderSpinner()):this._renderOfflineScreen())}_renderSpinner(){this._bridge.container.innerText="",this._content=this._bridge.container.appendChild(this._spinnerContainer)}_renderOfflineScreen(){this._bridge.container.innerText="",this._content=this._bridge.container.appendChild(this._offlineScreenContainer)}_renderAccountManager(e){this._renderer=this._contentRenderer=Promise.all([n.e("react"),n.e(0),n.e(2),n.e(9),n.e(15),n.e(19),n.e(21),n.e(23),n.e(25),n.e(27),n.e(64),n.e(66),n.e(74),n.e(1),n.e(24),n.e(54),n.e("trading-account-manager")]).then(n.bind(null,"zAqB")).then((t=>{this._contentRenderer===this._renderer&&(this._content&&this._content.remove(),this._content=new t.AccountManager(e,this._bridge,1))}))}_renderBrokerSelectScreen(){}}var l=n("q1tI"),h=n("TSYQ"),g=n("Kxc7"),_=n.n(g),p=n("b5Gw"),u=n("4qhP"),w=n("5bCf");const b=window.t("Trading Panel"),C=window.t("Account Manager"),S={4:"failed",2:"connecting",1:"connected",3:"disconnected"},v={4:window.t("Failed"),2:window.t("Connecting"),1:window.t("Connected"),3:window.t("Disconnected")};class m extends l.PureComponent{constructor(e){super(e),this._trading=null,this._tradingServiceCancelable=null,this._titleClick=()=>{const{onClick:e}=this.props;e&&e()},this.state={status:3,hasActiveBroker:!1,title:_.a.enabled("trading_terminal")?C:b}}componentDidMount(){if(_.a.enabled("trading_terminal"))return;const e=Object(r.tradingService)();null===e?(this._tradingServiceCancelable=Object(p.makeCancelable)(Object(r.waitTradingService)()),this._tradingServiceCancelable.promise.then(this._onTradingService.bind(this))):this._onTradingService(e)}componentWillUnmount(){_.a.enabled("trading_terminal")||(this._cancelWaitingTrading(),null!==this._trading&&(this._trading.onBrokerChange.unsubscribe(this,this._update),this._trading.onConnectionStatusChange.unsubscribe(this,this._update)))}render(){const{status:e,hasActiveBroker:t,title:n}=this.state;return l.createElement("div",{className:h(u.a,w.container,w[S[e]],{[w.active]:this.props.isActive,[w.inactive]:!t}),onClick:this._titleClick,"data-name":this.props.dataName,"data-active":this.props.isActive},l.createElement("span",{className:w.title},l.createElement("span",{className:w.titleText},n)),l.createElement("div",{className:h(w.indicator,"apply-common-tooltip"),title:v[e]}))}_onTradingService(e){this._cancelWaitingTrading(),this._trading=e,e.onBrokerChange.subscribe(this,this._update),e.onConnectionStatusChange.subscribe(this,this._update),this._update()}_update(){const e=this._trading,t=e&&e.activeBroker(),n=e?e.connectStatus():3;window.is_authenticated&&!_.a.enabled("trading_terminal")&&e&&t&&1===n?this.setState({status:n,hasActiveBroker:!0,title:t.accountManagerInfo().accountTitle}):this.setState({status:n,hasActiveBroker:!1,title:b})}_cancelWaitingTrading(){null!==this._tradingServiceCancelable&&(this._tradingServiceCancelable.cancel(),this._tradingServiceCancelable=null)}}var T=n("ogJP");function f(){const e={paper_trading:{ctor:d,customTitleComponent:m}};return Object(T.merge)(Object(T.clone)(i),e)}n.d(t,"getTerminalConfigSet",(function(){return f}))}}]);