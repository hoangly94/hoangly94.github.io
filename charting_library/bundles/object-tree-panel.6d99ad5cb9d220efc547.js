(window.webpackJsonp=window.webpackJsonp||[]).push([["object-tree-panel"],{"20cQ":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M11.5 4A2.5 2.5 0 0 0 7 5.5V7h6a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2V5.5a3.5 3.5 0 0 1 6.231-2.19c-.231.19-.73.69-.73.69zM13 8H6a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1zm-2 3.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/></svg>'},"9S1y":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("q1tI");function r(){const[e,t]=Object(o.useState)(null);return[Object(o.useCallback)(n=>{n.width===(null==e?void 0:e.width)&&n.height===e.height||t(n)},[e]),e]}},"B6/a":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M5.5 6C4.67 6 4 6.67 4 7.5V20.5c0 .83.67 1.5 1.5 1.5H16v-1H5.5a.5.5 0 0 1-.5-.5V12h16v1h1V9.5c0-.83-.67-1.5-1.5-1.5h-8.8L9.86 6.15 9.71 6H5.5zM21 11H5V7.5c0-.28.22-.5.5-.5h3.8l1.85 1.85.14.15h9.21c.28 0 .5.22.5.5V11zm1 11v-3h3v-1h-3v-3h-1v3h-3v1h3v3h1z"/></svg>'},NhaM:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path stroke="currentColor" d="M5.5 11.5v8a1 1 0 0 0 1 1h15a1 1 0 0 0 1-1v-8m-17 0v-4a1 1 0 0 1 1-1h4l2 2h9a1 1 0 0 1 1 1v2m-17 0h17"/></svg>'},"U+QY":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M14.692 3.012l-12 12.277.715.699 12-12.277-.715-.699zM9.05 15.627a7.042 7.042 0 0 1-3.144-.741l.742-.76c.72.311 1.52.5 2.402.5 2.297 0 4.047-1.29 5.25-2.645a12.168 12.168 0 0 0 1.687-2.466l.007-.015-.007-.015A12.166 12.166 0 0 0 14.3 7.019c-.11-.124-.225-.247-.344-.37l.699-.715c.137.14.268.28.392.42a13.16 13.16 0 0 1 1.83 2.678 8.117 8.117 0 0 1 .119.243l.006.015.003.005v.001l-.456.204.456.203v.002l-.003.005-.006.015-.025.052a11.762 11.762 0 0 1-.461.857 13.158 13.158 0 0 1-1.463 2.011c-1.296 1.46-3.296 2.982-5.998 2.982zm7.5-6.127l.456-.203.09.203-.09.203-.456-.203zm-7.5 3.07c-.27 0-.53-.037-.778-.105l.879-.899c.999-.052 1.833-.872 1.895-1.938l.902-.923c.066.253.102.52.102.795 0 1.695-1.344 3.07-3 3.07zM6.15 10.294l.902-.923c.063-1.066.896-1.886 1.895-1.938l.879-.9a2.94 2.94 0 0 0-.777-.103c-1.657 0-3 1.374-3 3.069 0 .275.035.541.101.795zM9.05 4.373c.88 0 1.68.19 2.4.5l.743-.759a7.043 7.043 0 0 0-3.143-.74c-2.703 0-4.703 1.521-6 2.98a13.159 13.159 0 0 0-1.83 2.678 7.886 7.886 0 0 0-.118.243l-.007.015-.002.005v.001l.456.204-.457-.203-.09.203.09.203.457-.203-.456.203v.002l.002.005.007.015a4.5 4.5 0 0 0 .119.243 13.152 13.152 0 0 0 1.83 2.677c.124.14.255.28.392.42l.7-.715c-.12-.122-.235-.245-.345-.369a12.156 12.156 0 0 1-1.686-2.466L2.105 9.5l.007-.015a12.158 12.158 0 0 1 1.686-2.466C5.002 5.665 6.752 4.373 9.05 4.373z"/></svg>'},Vbka:function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path stroke="currentColor" d="M4.5 12.5l4.59-4.59a2 2 0 0 1 2.83 0l3.17 3.17a2 2 0 0 0 2.83 0L22.5 6.5m-8 9.5v5.5M12 19l2.5 2.5L17 19m4.5 3v-5.5M19 19l2.5-2.5L24 19"/></svg>'},Z3xJ:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path stroke="currentColor" d="M21.106 12.5H6.894a.5.5 0 0 1-.318-.886L14 5.5l7.424 6.114a.5.5 0 0 1-.318.886zM21.106 16.5H6.894a.5.5 0 0 0-.318.886L14 23.5l7.424-6.114a.5.5 0 0 0-.318-.886z"/></svg>'},dDxv:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path stroke="currentColor" d="M5.5 16.5l4.586-4.586a2 2 0 0 1 2.828 0l3.172 3.172a2 2 0 0 0 2.828 0L23.5 10.5"/></svg>'},ffaL:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M4.605 14.089A10.052 10.052 0 0 1 4.56 14l.046-.089a17.18 17.18 0 0 1 2.329-3.327C8.58 8.758 10.954 7 14 7c3.046 0 5.421 1.757 7.066 3.585A17.18 17.18 0 0 1 23.44 14l-.046.089a17.18 17.18 0 0 1-2.329 3.327C19.42 19.242 17.046 21 14 21c-3.046 0-5.421-1.757-7.066-3.584a17.18 17.18 0 0 1-2.329-3.327zm19.848-.3L24 14l.453.212-.001.002-.003.005-.009.02a16.32 16.32 0 0 1-.662 1.195c-.44.72-1.1 1.684-1.969 2.65C20.08 20.008 17.454 22 14 22c-3.454 0-6.079-1.993-7.81-3.916a18.185 18.185 0 0 1-2.469-3.528 10.636 10.636 0 0 1-.161-.318l-.01-.019-.002-.005v-.002L4 14a55.06 55.06 0 0 1-.453-.212l.001-.002.003-.005.009-.02.033-.067a16.293 16.293 0 0 1 .629-1.126c.44-.723 1.1-1.686 1.969-2.652C7.92 7.993 10.546 6 14 6c3.454 0 6.079 1.993 7.81 3.916a18.183 18.183 0 0 1 2.469 3.528 10.588 10.588 0 0 1 .161.318l.01.019.002.005v.002zM24 14l.453-.211.099.211-.099.211L24 14zm-20.453-.211L4 14l-.453.211L3.448 14l.099-.211zM11 14a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-4a4 4 0 1 0 0 8 4 4 0 0 0 0-8zm0 5a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/></svg>'},gSe6:function(e,t,n){e.exports={wrap:"wrap-3Onbn19L",dialog:"dialog-3Onbn19L",offset:"offset-3Onbn19L",title:"title-3Onbn19L",main:"main-3Onbn19L",disabled:"disabled-3Onbn19L",icon:"icon-3Onbn19L",textIcon:"textIcon-3Onbn19L",rightButtons:"rightButtons-3Onbn19L",twoButtons:"twoButtons-3Onbn19L",button:"button-3Onbn19L",viewButton:"viewButton-3Onbn19L",threeButtons:"threeButtons-3Onbn19L",lockButton:"lockButton-3Onbn19L",removeButton:"removeButton-3Onbn19L",warn:"warn-3Onbn19L",hover:"hover-3Onbn19L",expandHandle:"expandHandle-3Onbn19L",selected:"selected-3Onbn19L",childOfSelected:"childOfSelected-3Onbn19L",renameInput:"renameInput-3Onbn19L"}},gla1:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("q1tI");const r=()=>{const[,e]=Object(o.useReducer)((e,t)=>e+1,0);return e}},h5pj:function(e,t,n){e.exports={wrap:"wrap-3jZ5H2Ul",space:"space-3jZ5H2Ul",tree:"tree-3jZ5H2Ul"}},"jaf/":function(e,t,n){"use strict";n.r(t);var o=n("Eyy1"),r=n("aIyQ"),i=n.n(r);function s(e){return e}var c=n("QrSB");class l{constructor(e){
this._onChange=new i.a,this._recalculate=()=>{const e=this._groupModel.groups().map(e=>e.id),t=this._selectionApi.allSources();this._selected=this._selected.filter(n=>e.includes(n)||t.includes(n)),this._onChange.fire(this._selected)},this._model=e,this._selectionApi=new c.SelectionApi(this._model),this._groupModel=this._model.lineToolsGroupModel(),this._selected=this._getSelectedIds(),this._selectionApi.onChanged().subscribe(this,()=>{this._selected=this._getSelectedIds(),this._onChange.fire(this._selected)}),this._groupModel.onChanged().subscribe(this,this._recalculate)}destroy(){this._selectionApi.onChanged().unsubscribeAll(this),this._groupModel.onChanged().unsubscribeAll(this)}set(e){const t=[];let n=e.map(e=>e.id());for(const o of e){const e=o.children(),r=new Set(e.map(e=>e.id()));o.hasChildren()?(t.push(...Array.from(r.values()).map(s)),n=n.filter(e=>!r.has(e))):t.push(o.id())}this._selectionApi.set(t),this._selected=n,this._onChange.fire(this._selected)}canBeAddedToSelection(e){return null!==e&&e.canBeAddedToSelection()}onChange(){return this._onChange}selected(){return this._selected}_getSelectedIds(){return this._selectionApi.allSources().filter(e=>{const t=this._model.dataSourceForId(e);return null!==t&&t.showInObjectTree()})}}var a=n("YFKU"),u=n("nP+q"),d=n("CW80"),h=n("3ClC"),b=n("ihdJ"),_=n("fgLi"),p=n("HZKX"),f=n("Vbka"),g=n("dDxv"),m=n("NhaM");const v=Object(a.t)("Show {sourceTitle}"),S=Object(a.t)("Hide {sourceTitle}"),O=Object(a.t)("Lock {sourceTitle}"),j=Object(a.t)("Unlock {sourceTitle}"),C=Object(a.t)("Change {sourceType} title to {newSourceTitle}");function w(e,t){return t.every(t=>!(t.pane()!==e&&!t.allowsMovingbetweenPanes()))}function T(e){return e instanceof _.DataSource&&e.showInObjectTree()?e.id():null}const y=new i.a;class M{constructor(e,t){this._undoModel=e,this._dataSource=t}destroy(){}id(){return this._dataSource.id()}title(){return Object(d.isLineTool)(this._dataSource)?this._dataSource.properties().title.value()||this._dataSource.translatedType():this._dataSource.title()}gaLabel(){return Object(h.isStudy)(this._dataSource)?"Study":Object(d.isLineTool)(this._dataSource)?"Drawing":"Symbol"}canBeLocked(){return Object(d.isLineTool)(this._dataSource)&&this._dataSource.userEditEnabled()}canBeRemoved(){return this._undoModel.mainSeries()!==this._dataSource&&this._dataSource.isUserDeletable()}canBeHidden(){return this._dataSource.canBeHidden()}canBeRenamed(){return Object(d.isLineTool)(this._dataSource)}isVisible(){return this._dataSource.properties().visible.value()}isActualInterval(){return!Object(d.isLineTool)(this._dataSource)||this._dataSource.isActualInterval()}onIsActualIntervalChange(){return Object(d.isLineTool)(this._dataSource)?this._dataSource.onIsActualIntervalChange():y}isLocked(){return!!Object(d.isLineTool)(this._dataSource)&&this._dataSource.properties().frozen.value()}onVisibilityChanged(){return this._dataSource.properties().visible.listeners()}onLockChanged(){return Object(d.isLineTool)(this._dataSource)?this._dataSource.properties().frozen.listeners():y}getIcon(){
const e=Object(b.a)(),t=this._dataSource.getSourceIcon(),n=Object(h.isStudyStrategy)(this._dataSource);let o={type:u.a.Svg,content:n?f:g};if(e&&t)if("loadSvg"===t.type){const[n,r]=t.svgId.split("."),i="linetool"===n?e.linetool[r]:e.series[Number(r)];o={type:u.a.Svg,content:i||g}}else"text"===t.type&&(o={type:u.a.Text,content:t.text});return o}setVisible(e){const t=(e?v:S).format({sourceTitle:this._dataSource.title()});this._undoModel.setProperty(this._dataSource.properties().visible,e,t)}setLocked(e){if(Object(d.isLineTool)(this._dataSource)){const t=(e?O:j).format({sourceTitle:this._dataSource.translatedType()});this._undoModel.setProperty(this._dataSource.properties().frozen,e,t)}}setName(e){if(Object(d.isLineTool)(this._dataSource)){const t=C.format({sourceType:this._dataSource.properties().title.value()||this._dataSource.title(),newSourceTitle:e});this._undoModel.setProperty(this._dataSource.properties().title,e,t)}}isCopiable(){return this._dataSource.copiable()}isClonable(){return this._dataSource.cloneable()}zOrder(){return this._dataSource.zorder()}remove(){this._undoModel.removeSource(this._dataSource,!1)}canBeAddedToSelection(){return this._undoModel.selection().canBeAddedToSelection(this._dataSource)}setAsSelection(){this._undoModel.model().selectionMacro(e=>{e.clearSelection(),e.addSourceToSelection(this._dataSource)})}addToSelection(){this._undoModel.model().selectionMacro(e=>{e.addSourceToSelection(this._dataSource)})}addSourcesToArray(e){return e.push(this._dataSource),e}insertSourcesBeforeThis(e){this._insertSources(e,e=>this._undoModel.insertBefore(e,this._dataSource))}insertSourcesAfterThis(e){this._insertSources(e,e=>this._undoModel.insertAfter(e,this._dataSource))}children(){return[]}hasChildren(){return!1}pane(){return Object(o.ensureNotNull)(this._undoModel.model().paneForSource(this._dataSource))}allowsMovingbetweenPanes(){return!Object(d.isLineTool)(this._dataSource)}canBeAddedToGroup(){return Object(d.isLineTool)(this._dataSource)}canInsertBeforeThis(e){return this._canInsertBeforeOrAfter(e)}canInsertAfterThis(e){return this._canInsertBeforeOrAfter(e)}detachFromParent(){if(Object(d.isLineTool)(this._dataSource)){const e=this._undoModel.model(),t=this._undoModel.lineToolsGroupController(),n=e.lineToolsGroupModel().groupForLineTool(this._dataSource);null!==n&&t.excludeLineToolFromGroup(n,this._dataSource)}}onTitleChanged(){const e=this._dataSource.properties().title;return e?e.listeners():void 0}_canInsertBeforeOrAfter(e){const t=this._undoModel.model();if(!w(this.pane(),e))return!1;if(Object(d.isLineTool)(this._dataSource)){if(null!==t.lineToolsGroupModel().groupForLineTool(this._dataSource)&&e.some(e=>!e.canBeAddedToGroup()))return!1}return!0}_insertSources(e,t){const n=this._undoModel.model(),r=this._undoModel.lineToolsGroupController();this._undoModel.beginUndoMacro("Insert source(s) after");const i=()=>{e.forEach(e=>e.detachFromParent())},s=e.reduce((e,t)=>t.addSourcesToArray(e),[]);if(Object(d.isLineTool)(this._dataSource)){
const t=n.lineToolsGroupModel().groupForLineTool(this._dataSource);null!==t?(Object(o.assert)(!e.some(e=>e.hasChildren())),s.forEach(e=>{Object(d.isLineTool)(e)&&(t.containsLineTool(e)||r.addLineToolToGroup(t,e))})):i()}else i();t(s),this._undoModel.endUndoMacro()}}class I{constructor(e,t){this._onTitleChanged=new i.a,this._onVisibilityChanged=new i.a,this._onLockChanged=new i.a,this._onIsActualIntervalChanged=new i.a,this._undoModel=e,this._group=t,this._lineTools=t.lineTools();const n=()=>{this._lineTools.forEach(e=>{e.properties().visible.listeners().subscribe(this,()=>this._onVisibilityChanged.fire()),e.properties().frozen.listeners().subscribe(this,()=>this._onLockChanged.fire()),e.onIsActualIntervalChange().subscribe(this,()=>this._onIsActualIntervalChanged.fire())})};this._group.onChanged().subscribe(this,e=>{this._unsubscribeFromAllLineTools(),this._lineTools=this._group.lineTools(),n(),e.lockedChanged&&this._onLockChanged.fire(),e.visibilityChanged&&this._onVisibilityChanged.fire(),e.titleChanged&&this._onTitleChanged.fire(),e.isActualIntervalChanged&&this._onIsActualIntervalChanged.fire()}),n()}destroy(){this._unsubscribeFromAllLineTools(),this._group.onChanged().unsubscribeAll(this)}id(){return this._group.id}title(){return this._group.name()}gaLabel(){return"Group"}getIcon(){return{type:u.a.Svg,content:m}}canBeRemoved(){return!0}canBeHidden(){return!0}canBeLocked(){return!0}canBeRenamed(){return!0}isVisible(){return"Invisible"!==this._group.visibility()}isActualInterval(){return this._group.lineTools().some(e=>e.isActualInterval())}onIsActualIntervalChange(){return this._onIsActualIntervalChanged}isLocked(){return"Locked"===this._group.locked()}onTitleChanged(){return this._onTitleChanged}onVisibilityChanged(){return this._onVisibilityChanged}onLockChanged(){return this._onLockChanged}setVisible(e){this._undoModel.lineToolsGroupController().setGroupVisibility(this._group,e)}setLocked(e){this._undoModel.lineToolsGroupController().setGroupLock(this._group,e)}setName(e){this._undoModel.lineToolsGroupController().setGroupName(this._group,e)}isCopiable(){return!1}isClonable(){return!1}zOrder(){return 0===this._group.lineTools().length?null:this._group.lineTools()[0].zorder()}remove(){this._undoModel.lineToolsGroupController().removeGroup(this._group)}canBeAddedToSelection(){const e=this._undoModel.model();return this._group.lineTools().every(t=>e.selection().canBeAddedToSelection(t))}setAsSelection(){this._undoModel.model().selectionMacro(e=>{e.clearSelection(),this._group.lineTools().forEach(t=>e.addSourceToSelection(t))})}addToSelection(){this._undoModel.model().selectionMacro(e=>{this._group.lineTools().forEach(t=>e.addSourceToSelection(t))})}addSourcesToArray(e){return e.push(...this._group.lineTools()),e}detachFromParent(){}insertSourcesBeforeThis(e){const t=this._insertBeforeTarget();this._insertSources(e,e=>this._undoModel.insertBefore(e,t))}insertSourcesAfterThis(e){const t=this._insertAfterTarget();this._insertSources(e,e=>this._undoModel.insertAfter(e,t))}children(){
const e=[...this._group.lineTools()];return e.sort((e,t)=>t.zorder()-e.zorder()),e.map(e=>new M(this._undoModel,e))}hasChildren(){return!0}pane(){return Object(o.ensureNotNull)(this._undoModel.model().paneForSource(this._group.lineTools()[0]))}allowsMovingbetweenPanes(){return!1}canBeAddedToGroup(){return!1}canInsertBeforeThis(e){return this._canInsertBeforeOrAfter(e)}canInsertAfterThis(e){return this._canInsertBeforeOrAfter(e)}_canInsertBeforeOrAfter(e){return w(this.pane(),e)}_insertSources(e,t){this._undoModel.beginUndoMacro("Insert source(s) after");const n=e.reduce((e,t)=>t.addSourcesToArray(e),[]);e.forEach(e=>e.detachFromParent()),t(n),this._undoModel.endUndoMacro()}_insertBeforeTarget(){return Object(o.ensureNotNull)(this._group.lineTools().reduce((e,t)=>null===e?t:e.zorder()<t.zorder()?e:t,null))}_insertAfterTarget(){return Object(o.ensureNotNull)(this._group.lineTools().reduce((e,t)=>null===e?t:e.zorder()>t.zorder()?e:t,null))}_unsubscribeFromAllLineTools(){this._lineTools.forEach(e=>{e.properties().visible.listeners().unsubscribeAll(this),e.properties().frozen.listeners().unsubscribeAll(this),e.onIsActualIntervalChange().unsubscribeAll(this)})}}class A{constructor(e){this._hoveredObjectChanged=new i.a,this._undoModel=e,this._undoModel.model().hoveredSourceChanged().subscribe(this,this._onModelHoveredSourceChanged)}getObjectById(e){const t=this._undoModel.model(),n=t.dataSourceForId(e);if(null!==n)return new M(this._undoModel,n);const o=t.lineToolsGroupModel().groupForId(e);return null!==o?new I(this._undoModel,o):null}canBeGroupped(e){if(0===e.length||1===e.length&&e[0].hasChildren())return!1;const t=[];if(e.forEach(e=>e.addSourcesToArray(t)),t.some(e=>!Object(d.isLineTool)(e)))return!1;const n=this._undoModel.model(),o=t.map(e=>n.paneForSource(e));return new Set(o).size<2}contextMenuActions(e,t,n){const o=new p.ActionsProvider(e,n),r=[];return t.forEach(e=>e.addSourcesToArray(r)),o.contextMenuActionsForSources(r)}insertBefore(e,t){t.insertSourcesAfterThis(e)}insertAfter(e,t){t.insertSourcesBeforeThis(e)}setHoveredObject(e){const t=this._undoModel.model();if(null===e)return void t.setHoveredSource(null,null);const n=t.dataSourceForId(e);null!==n&&t.setHoveredSource(n,null)}hoveredObjectId(){return T(this._undoModel.model().hoveredSource())}hoveredObjectChanged(){return this._hoveredObjectChanged}_onModelHoveredSourceChanged(e){this._hoveredObjectChanged.fire(T(e))}}class L{constructor(e){this._controller=e,this._facade=new A(e),this._groupModel=e.model().lineToolsGroupModel()}buildTree(){const e={},t={};for(const n of this._controller.model().panes()){const r=n.sourcesByGroup().all().filter(e=>e.showInObjectTree());e[n.id()]=E(n.id(),0);for(const i of this._groupModel.groups()){const r=Object(o.ensureNotNull)(this._facade.getObjectById(i.id));if(r.pane()===n){t[r.id()]=r;const s=[...i.lineTools()].sort((e,t)=>e.zorder()>t.zorder()?-1:1).map(e=>e.id());e[r.id()]=E(r.id(),1,n.id(),s),e[n.id()].children.push(r.id());for(const n of s)t[n]=Object(o.ensureNotNull)(this._facade.getObjectById(n)),
e[n]=E(n,2,r.id())}}for(const i of r)e[i.id()]||(e[i.id()]=E(i.id(),1,n.id()),e[n.id()].children.push(i.id()),t[i.id()]=Object(o.ensureNotNull)(this._facade.getObjectById(i.id())));e[n.id()].children.sort((e,n)=>Object(o.ensureNotNull)(t[e].zOrder())>Object(o.ensureNotNull)(t[n].zOrder())?-1:1)}return{nodes:e,entities:t}}}function E(e,t,n,o=[]){return{id:e,level:t,parentId:n,children:o}}n("b5Gw");var B=n("nn46"),N=n("7ktv"),x=n("5VQP"),k=n("7KDR"),z=n("zRdu"),G=n("/3z9"),F=n("txPx"),V=n("hY0g"),P=n.n(V),D=n("fs3R"),H=n("qckB"),R=n("dmHa"),U=n("ffaL"),J=n("GjMU"),Q=n("aVjL"),K=n("B6/a");n.d(t,"logger",(function(){return W})),n.d(t,"ObjectTree",(function(){return q}));const W=Object(F.getLogger)("Platform.GUI.ObjectTree");function Z(e){return e instanceof N.PriceDataSource}class q{constructor(e){this._entitiesCache={},this._nodes={},this._onChange=new i.a,this._onGroupCreated=new i.a,this._subscriptions=[],this._removeSourcesPromise=null,this._timeout=null,this._objects=[],this._options={general:!0,mainSeries:!0,mainSeriesTrade:!0,esdStudies:!0,fundamentals:!0,studies:!0,lineTools:!0,publishedCharts:!0,ordersAndPositions:!0,alerts:!1,chartEvents:!0,objectTree:!1},this._isContextMenuOpened=new P.a(!1),this._getObjectsToModify=e=>{const t=this.selection().selected();return t.find(t=>t===e)?t.map(this._ensuredEntity):[this._ensuredEntity(e)]},this._onActiveChartChanged=()=>{this._cleanup(),this._init()},this._cleanup=()=>{null!==this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this._subscriptions.forEach(e=>{e.unsubscribeAll(this)}),this._selection.destroy(),this._chart.unsubscribe(this._onActiveChartChanged);for(const e of Object.values(this._entitiesCache))e.destroy();null!==this._removeSourcesPromise&&this._removeSourcesPromise.cancel()},this._init=()=>{this._controller=this._chart.value().model(),this._groupController=this._controller.lineToolsGroupController(),this._model=this._controller.model(),this._groupModel=this._model.lineToolsGroupModel(),this._facade=new A(this._controller),this._subscriptions=[this._model.mainSeries().onStyleChanged(),this._model.mainSeries().dataEvents().symbolResolved(),this._model.mainSeries().onIntervalChanged(),this._model.panesCollectionChanged(),this._model.dataSourceCollectionChanged(),this._groupModel.onChanged()],this._subscriptions.forEach(e=>{e.subscribe(this,this._update)}),this._chart.subscribe(this._onActiveChartChanged),this._selection=new l(this._model),this._update()},this._update=()=>{null===this._timeout&&(this._timeout=setTimeout(()=>{this._recalculateTree(),this._onChange.fire(),this._timeout=null}))},this._ensuredEntity=e=>Object(o.ensureNotNull)(this._getEntityById(e)),this._chart=e,this._init()}destroy(){this._cleanup()}getState(){return{nodes:Object.values(this._nodes),selection:this._selection.selected()}}getChartId(){return this._chart.value().id()}insertSelection(e,t){const n=this._facade,o=this.selection().selected().map(this._ensuredEntity),[r,i]=this._normalizeTargetAndDropType(e,t);this._controller.withMacro(Object(a.t)("Move objects"),()=>{
switch(i){case"before":n.insertBefore(o,r);break;case"after":n.insertAfter(o,r)}}),this._update()}entity(e){return this._entitiesCache[e]||null}isMain(e){return e.id()===this._controller.mainSeries().id()}selection(){return this._selection}setIsLocked(e,t){const n=this._getObjectsToModify(e),o=(t?Object(a.t)("Lock"):Object(a.t)("Unlock"))+" "+Object(a.t)("objects");this._controller.withMacro(o,()=>{for(const e of n)e.setLocked(t)}),Object(B.b)("Lock",Object(B.a)(n))}setIsVisible(e,t){const n=this._getObjectsToModify(e),o=(t?Object(a.t)("Show"):Object(a.t)("Hide"))+" "+Object(a.t)("objects");this._controller.withMacro(o,()=>{for(const e of n)e.setVisible(t)}),Object(B.b)("Hide",Object(B.a)(n))}remove(e){const t=()=>{this._controller.withMacro(Object(a.t)("Remove objects"),()=>{for(const e of n)e.remove(),delete this._entitiesCache[e.id()]}),Object(B.b)("Delete",Object(B.a)(n)),this._update()},n=this._getObjectsToModify(e);t()}canSelectionBeGrouped(){const e=this._getSelectedEntities();return this._facade.canBeGroupped(e)}createGroupFromSelection(){const e=this._groupController.createGroupFromSelection();Object(B.b)("Create Group"),this.selection().set([this._ensuredEntity(e.id)]),this._onGroupCreated.fire(e.id),this._update()}isSelectionDropable(e,t){const n=this.selection().selected().map(this._ensuredEntity),[o,r]=this._normalizeTargetAndDropType(e,t);switch(r){case"after":return o.canInsertAfterThis(n);case"before":return o.canInsertBeforeThis(n)}}onChange(){return this._onChange}onGroupCreated(){return this._onGroupCreated}isSelectionCloneable(){const e=this._getSelectedEntities();return e.length>0&&e.every(e=>e.isClonable())}isSelectionCopiable(){const e=this._getSelectedEntities();return e.length>0&&e.every(e=>e.isCopiable())}openProperties(e){const t=this._model.dataSourceForId(e.id());this.selection().set([e]),null!==t&&(this._controller.mainSeries()===t?this._chart.value().showGeneralChartProperties():(Object(d.isLineTool)(t)||Object(h.isStudy)(t))&&this._chart.value().showChartPropertiesForSource(t))}canSelectionBeUnmerged(){const e=this._getSelectedEntities();return 1===e.length&&this.canNodeWithIdBeUnmerged(e[0].id())}canNodeWithIdBeUnmerged(e){const t=this._model.dataSourceForId(e);return null!==t&&Z(t)&&this._model.isUnmergeAvailableForSource(t)}unmergeSelectionUp(){this._unmergeSelection(0)}unmergeSelectionDown(){this._unmergeSelection(1)}copySelection(){const e=this._getSelectedEntities(),t=e.map(e=>Object(o.ensureNotNull)(this._model.dataSourceForId(e.id())));this._chart.value().chartWidgetCollection().clipboard.uiRequestCopy(t),Object(B.b)("Copy",Object(B.a)(e))}cloneSelection(){const e=this._getSelectedEntities(),t=e.map(e=>Object(o.ensureNotNull)(this._model.dataSourceForId(e.id())));t.every(d.isLineTool)&&(this._controller.cloneLineTools([...t],!1),Object(B.b)("Clone",Object(B.a)(e)))}rename(e,t){const n=this._getObjectsToModify(e.id());1===n.length&&n.some(e=>e.canBeRenamed())&&(t(),Object(B.b)("Rename",Object(B.a)(n)))}async openContextMenu(e,t,n){this._objects=this._getObjectsToModify(e.id())
;const o=this._facade.canBeGroupped(this._objects);let r;if(this._objects.some(e=>e.hasChildren()))r=this._getActionsForGroupItem(e,t,o);else{const e=await this._facade.contextMenuActions(this._chart.value(),this._objects,this._options);if(r=Array.from(e).filter((e,t,n)=>e.type!==z.a.Separator||!n[t+1]||n[t+1].type!==z.a.Separator),1===this._objects.length&&this._objects[0].canBeRenamed()){const e=r.findIndex(e=>"Copy"===e.id);r.splice(-1===e?r.length:e+1,0,this._getRenameAction(t))}if(o){const e=r.findIndex(e=>"Clone"===e.id);r.splice(-1===e?0:e,0,this._getGroupAction())}}r.length>0&&x.ContextMenuManager.createMenu(r,{takeFocus:!0,returnFocus:!0},()=>{this._isContextMenuOpened.setValue(!1)}).then(e=>{e.show(n),this._isContextMenuOpened.setValue(!0)})}setHoveredObject(e){this._facade.setHoveredObject(e)}hoveredObjectChanged(){return this._facade.hoveredObjectChanged()}getNextNodeIdAfterRemove(e){var t;const{nodes:n}=this.getState(),r=n.find(t=>t.id===e),i=this.entity(e);if(!(r&&r.parentId&&i&&i.canBeRemoved()))return null;if((null===(t=i.pane().mainDataSource())||void 0===t?void 0:t.id())===e&&!this.canNodeWithIdBeUnmerged(e)){const e=n.filter(e=>0===e.level).map(e=>e.id),t=this._takeNextOrPrevElement(e,r.parentId);return Object(o.ensureDefined)(n.find(e=>e.id===t)).children[0]}const s=Object(o.ensureDefined)(n.find(e=>e.id===r.parentId)).children;return 1===s.length?this.getNextNodeIdAfterRemove(r.parentId):this._takeNextOrPrevElement(s,e)}isContextMenuOpened(){return this._isContextMenuOpened.readonly()}_takeNextOrPrevElement(e,t){const n=e.indexOf(t);return e[n===e.length-1?n-1:n+1]}_getGroupAction(){return new k.Action({label:Object(a.t)("Create a group of drawings"),icon:K,onExecute:()=>{this.createGroupFromSelection()}})}_getRenameAction(e){return new k.Action({label:Object(a.t)("Rename"),icon:J,onExecute:()=>{e(),Object(B.b)("Context menu rename",Object(B.a)(this._objects))}})}_getActionsForGroupItem(e,t,n){const o=[new k.Action({label:e.isLocked()?Object(a.t)("Unlock"):Object(a.t)("Lock"),icon:e.isLocked()?D:H,onExecute:()=>this.setIsLocked(e.id(),!e.isLocked())}),new k.Action({label:e.isVisible()?Object(a.t)("Hide"):Object(a.t)("Show"),icon:e.isVisible()?R:U,onExecute:()=>this.setIsVisible(e.id(),!e.isVisible())}),new k.Action({label:Object(a.t)("Remove"),icon:Q,onExecute:()=>this.remove(e.id()),hotkeyHash:G.isMacKeyboard?8:46})];return 1===this._objects.length&&(o.unshift(new k.Separator),o.unshift(this._getRenameAction(t))),n&&(o.unshift(new k.Separator),o.unshift(this._getGroupAction())),o}_unmergeSelection(e){const t=this._getSelectedEntities();if(1!==t.length)throw new Error("Only one object can be unmerged");const n=t[0],r=Object(o.ensureNotNull)(this._model.dataSourceForId(n.id()));if(!Z(r))throw new Error("Entity is not IPriceDataSource");(0===e?this._controller.unmergeSourceUp:this._controller.unmergeSourceDown).call(this._controller,r);const i=0===e?"New pane above":"New pane below";Object(B.b)(i,Object(B.a)([n]))}_recalculateTree(){const e=new L(this._controller),{nodes:t,entities:n}=e.buildTree()
;this._nodes=t,this._entitiesCache=n}_normalizeTargetAndDropType(e,t){let n=this._ensuredEntity(e);return"inside"===t&&(t="before",n=Object(o.ensureDefined)([...n.children()].shift())),[n,t]}_getSelectedEntities(){const{selected:e,removed:t}=this._selection.selected().reduce((e,t)=>{const n=this._getEntityById(t);return n?(e.selected.push(n),e):(e.removed.push(t),e)},{selected:[],removed:[]});return t.length&&W.logWarn("Detected dangling sources in selection. They will be ignored: "+JSON.stringify(t)),e}_getEntityById(e){return this._entitiesCache[e]||this._facade.getObjectById(e)}}},m2rF:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("q1tI");const r=o.createContext(null)},"nP+q":function(e,t,n){"use strict";var o;n.d(t,"a",(function(){return o})),function(e){e.Svg="svg",e.Text="text"}(o||(o={}))},nkjW:function(e,t,n){e.exports={title:"title-2PJRtZNU",withoutIcon:"withoutIcon-2PJRtZNU",buttons:"buttons-2PJRtZNU",button:"button-2PJRtZNU",disabled:"disabled-2PJRtZNU"}},nn46:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var o=n("JWMC");function r(e,t){Object(o.trackEvent)("Object Tree",e,t)}function i(e){return e.length>1?"Multi select":e[0].gaLabel()}},p17a:function(e,t,n){"use strict";n.r(t),n.d(t,"NodeRenderer",(function(){return w})),n.d(t,"Component",(function(){return T}));var o=n("q1tI"),r=n.n(o),i=n("TSYQ"),s=n("Eyy1"),c=n("Iivm"),l=n("Kxc7"),a=n("YFKU"),u=n("ndO8"),d=n("KCrd"),h=n("nP+q"),b=n("wHCJ"),_=n("XAms"),p=n("/3z9"),f=n("m2rF"),g=n("+wZE"),m=n("To8B"),v=n("tyJc"),S=n("20cQ"),O=n("zn4F"),j=n("U+QY"),C=n("gSe6");function w(e){const{id:t}=e,n=Object(o.useContext)(d.a),{viewModel:i}=Object(s.ensureNotNull)(n),c=i.entity(t);return null===c?null:r.a.createElement(T,Object.assign({},e,{entity:c}))}function T(e){const{id:t,isOffset:n,isDisabled:w,isSelected:T,isChildOfSelected:y,isHovered:M,parentId:I,entity:A,isExpanded:L}=e,E=Object(o.useContext)(d.a),B=Object(o.useContext)(f.a),{size:N}=Object(o.useContext)(u.a),[x,k]=Object(o.useState)(!1),z=Object(o.useRef)(null),[G,F]=Object(o.useState)(A.title()),[V,P]=Object(o.useState)(A.isLocked()),[D,H]=Object(o.useState)(A.isVisible()),[R,U]=Object(o.useState)(A.isActualInterval()),[J,Q]=Object(o.useState)(!1),[K,W]=Object(o.useState)(!1),Z=Object(o.useRef)(null);Object(o.useEffect)(()=>{const e={};A.onLockChanged().subscribe(e,()=>P(A.isLocked())),A.onVisibilityChanged().subscribe(e,()=>H(A.isVisible()));const t=A.onTitleChanged();return t&&t.subscribe(e,()=>F(A.title())),A.onIsActualIntervalChange().subscribe(e,()=>U(A.isActualInterval())),()=>{A.onIsActualIntervalChange().unsubscribeAll(e),A.onLockChanged().unsubscribeAll(e),A.onVisibilityChanged().unsubscribeAll(e),t&&t.unsubscribeAll(e),Z.current&&clearTimeout(Z.current)}},[]),Object(o.useEffect)(()=>{x&&z.current&&(z.current.focus(),z.current.setSelectionRange(0,G.length))},[x]),Object(o.useEffect)(()=>{const e={};return q.hoveredObjectChanged().subscribe(e,ae),()=>{q.hoveredObjectChanged().unsubscribeAll(e)}},[L]),
Object(o.useEffect)(()=>{q.setHoveredObject(M?t:null)},[M]),Object(o.useEffect)(()=>{!T&&Z.current&&(clearTimeout(Z.current),Z.current=null),k(!1)},[T]);const{viewModel:q}=Object(s.ensureNotNull)(E),Y=!D||V,X=A.getIcon(),$={};if(I){const e=q.entity(I);e&&($["data-parent-name"]=e.title()),$["data-type"]=A.hasChildren()?"group":"data-source"}const ee=l.enabled("test_show_object_tree_debug")?`<${A.id()}> (${A.zOrder()})`:A.title(),te=M||J,ne=x&&T,oe=!!B&&B.isTouch,re=!!B&&B.isDialog,ie=R&&D?O:j,se=A.hasChildren()?a.t("Group is hidden on current interval"):a.t("Drawing is hidden on current interval");return r.a.createElement("span",{className:i(C.wrap,Y&&C.modifier,w&&C.disabled,T&&C.selected,n&&C.offset,y&&C.childOfSelected,J&&!w&&!T&&!y&&C.hover,re&&!w&&!T&&!y&&C.dialog),onMouseDown:function(e){x&&!Object(s.ensureNotNull)(z.current).contains(e.target)&&W(!0)},onClick:1===N?ce:function(e){if(e.defaultPrevented)return;if(0!==Object(p.modifiersFromEvent)(e))return;if(Z.current)e.preventDefault(),clearTimeout(Z.current),Z.current=null,q.openProperties(A),W(!1);else{const e=q.selection().selected();Z.current=setTimeout(()=>{Z.current=null,T&&!K&&1===e.length&&q.rename(A,()=>k(!0)),W(!1)},500)}},onContextMenu:oe?void 0:ce},!ne&&r.a.createElement(o.Fragment,null,X&&X.type===h.a.Svg&&r.a.createElement(c.a,{icon:X.content||"",className:C.icon}),X&&X.type===h.a.Text&&r.a.createElement("span",{className:i(C.icon,C.textIcon)},X.content),r.a.createElement("span",Object.assign({className:i(C.title,q.isMain(A)&&C.main,!A.isVisible()&&C.disabled)},$),ee),(te||V||!D||oe||!R)&&r.a.createElement("span",{className:i(C.rightButtons,A.canBeRemoved()&&C.twoButtons,A.canBeLocked()&&(te||V)&&C.threeButtons)},A.canBeLocked()&&(te||V)&&r.a.createElement(g.a,{icon:V?v:S,className:i(C.button,C.lockButton),onClick:function(e){if(e.defaultPrevented)return;e.preventDefault(),q.setIsLocked(t,!A.isLocked())},"data-role":"button","data-name":"lock","data-active":V}),(te||!D||!R)&&r.a.createElement(g.a,{icon:ie,className:i(C.button,C.viewButton,!R&&[C.warn,"apply-common-tooltip"]),onClick:R?function(e){if(e.defaultPrevented)return;e.preventDefault(),q.setIsVisible(t,!A.isVisible())}:void 0,title:R?void 0:se,disabled:!R,"data-role":"button","data-name":"hide","data-active":!D}),A.canBeRemoved()&&(oe||te)&&r.a.createElement(g.a,{icon:m,className:i(C.button,C.removeButton),onClick:function(e){if(e.defaultPrevented)return;e.preventDefault(),q.remove(t)},"data-role":"button","data-name":"remove"}))),ne&&r.a.createElement(b.a,{value:G,onChange:function(e){F(e.currentTarget.value)},onClick:_.a,className:C.renameInput,onKeyDown:function(e){27===Object(p.hashFromEvent)(e)?(e.preventDefault(),F(A.title()),k(!1)):13===Object(p.hashFromEvent)(e)&&(e.preventDefault(),le())},reference:function(e){z.current=e},onBlur:le,onDragStart:function(e){e.preventDefault(),e.stopPropagation()},draggable:!0,stretch:!0}));function ce(e){e.defaultPrevented||x||(e.preventDefault(),e.persist(),q.openContextMenu(A,()=>k(!0),e))}function le(){""!==G&&A.setName(G),F(A.title()),k(!1)}
function ae(e){if(A.hasChildren()&&!L){const t=A.children(),n=Boolean(t.find(t=>t.id()===e));Q(n)}else Q(t===e)}}},tyJc:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M7 5.5a2.5 2.5 0 0 1 5 0V7H7V5.5zM6 7V5.5a3.5 3.5 0 1 1 7 0V7a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2zm8 2a1 1 0 0 0-1-1H6a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V9zm-3 2.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/></svg>'},"uIX/":function(e,t,n){"use strict";n.r(t);var o=n("q1tI"),r=n.n(o),i=n("cvc5"),s=n.n(i),c=n("5rFJ"),l=n("Eyy1"),a=n("TSYQ"),u=n("YFKU"),d=n("Iivm"),h=n("N5tr"),b=n("82wv"),_=n("gla1"),p=n("KCrd"),f=n("p0W+"),g=n("+KIV"),m=n("Z3xJ"),v=n("B6/a"),S=n("nkjW");n("JWMC");function O(e){const{viewModel:t}=Object(l.ensureNotNull)(Object(o.useContext)(p.a)),n=Object(_.a)(),i=t.selection();Object(o.useEffect)(()=>{const e={};return t.onChange().subscribe(e,()=>n()),()=>{t.onChange().unsubscribeAll(e)}},[t]),Object(o.useEffect)(()=>{const e={};return i.onChange().subscribe(e,()=>n()),()=>{i.onChange().unsubscribeAll(e)}},[i]);const s=!t.canSelectionBeUnmerged(),c=t.isSelectionCopiable(),O=t.isSelectionCloneable(),j=!c&&!O,C=t.canSelectionBeGrouped();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:a(S.title,S.withoutIcon)},Object(u.t)("Object tree"),!1),r.a.createElement("div",{className:S.buttons},r.a.createElement(f.a,{className:a(S.button,!C&&S.disabled),icon:v,onClick:function(){t.createGroupFromSelection()},isDisabled:!C,title:Object(u.t)("Create a group of drawings"),"data-name":"group-button"}),r.a.createElement(b.b,{className:a(S.button,j&&S.disabled),isDisabled:j,content:r.a.createElement(d.a,{icon:g}),title:Object(u.t)("Clone, Copy"),arrow:!1,isShowTooltip:!0,"data-name":"copy-clone-button"},c&&r.a.createElement(h.b,{"data-name":"copy",label:Object(u.t)("Copy"),onClick:function(){t.copySelection()}}),O&&r.a.createElement(h.b,{"data-name":"clone",label:Object(u.t)("Clone"),onClick:function(){t.cloneSelection()}})),r.a.createElement(b.b,{className:a(S.button,s&&S.disabled),isDisabled:s,content:r.a.createElement(d.a,{icon:m}),title:Object(u.t)("Move to"),arrow:!1,isShowTooltip:!0,"data-name":"move-to-button"},r.a.createElement(h.b,{"data-name":"new-pane-above",label:Object(u.t)("New pane above"),onClick:function(){t.unmergeSelectionUp()}}),r.a.createElement(h.b,{"data-name":"new-pane-below",label:Object(u.t)("New pane below"),onClick:function(){t.unmergeSelectionDown()}}))))}var j=n("Q+za"),C=n("rRWa"),w=n("dy8f"),T=n("6UvQ"),y=n("ddGQ"),M=n("nn46"),I=n("eT4H");function A(e){return Object(C.c)(t=>{const n={};return e.onChange().subscribe(n,()=>t(Object(w.h)())),e.onGroupCreated().subscribe(n,e=>t(Object(w.n)(e,!0))),e.selection().onChange().subscribe(n,e=>t(Object(w.q)(e))),()=>{e.onChange().unsubscribeAll(n),e.selection().onChange().unsubscribeAll(n),e.onGroupCreated().unsubscribeAll(n)}},C.a.expanding())}function*L(){for(;;)yield Object(c.g)([y.k,y.l]),
Object(M.b)("Select","Arrow")}function*E(){for(;;){const{mode:e}=yield Object(c.g)(y.p);1===e&&Object(M.b)("Multi select","Ctrl"),2===e&&Object(M.b)("Multi select","Shift")}}function*B(e){for(;;){yield Object(c.g)(y.a);const{node:t,dropType:n}=Object(I.a)(yield Object(c.f)());if(t){const o=Object(I.o)(yield Object(c.f)()),r=o.map(t=>Object(l.ensureNotNull)(e.entity(t.id)));let i="Drag";1===t.level&&"inside"!==n&&o.some(e=>2===e.level)?i="From the group":2!==t.level&&"inside"!==n||!o.some(e=>1===e.level)?1===o.length&&o[0].parentId!==t.parentId&&(i="Existing pane"):i="To the group",Object(M.b)(i,Object(M.a)(r))}}}function*N(e){yield Object(c.d)(L),yield Object(c.d)(E),yield Object(c.d)(B,e)}function*x(e){yield Object(c.d)(N,e);const t=yield Object(c.b)(A,e);T.b.logNormal("Opened object tree data source channel");try{for(;;){const e=yield Object(c.g)(t);yield Object(c.e)(e)}}finally{T.b.logNormal("Closed object tree data source channel"),t.close()}}var k=n("5VQP"),z=n("m2rF"),G=n("XAms"),F=n("9S1y"),V=n("h5pj");n.d(t,"ObjectTree",(function(){return D}));const P=Modernizr.mobiletouch?"touch":"native";function D(e){const{viewModel:t,showHeader:n=!0,nodeRenderer:i,isDialog:l=!1}=e,a=Object(o.useRef)(null),u=function(e){const[t,n]=Object(o.useState)(e.getChartId()),r=Object(o.useRef)(t);return r.current=t,Object(o.useEffect)(()=>{return e.onChange().subscribe(null,t),()=>{e.onChange().unsubscribe(null,t)};function t(){const t=e.getChartId();r.current!==t&&n(t)}},[]),t}(t),[d,h]=Object(F.a)(),[b,_]=Object(o.useState)(null),f=Object(o.useMemo)(()=>({isTouch:Modernizr.touch,isDialog:l}),[l]);return r.a.createElement(z.a.Provider,{value:f},r.a.createElement(p.a.Provider,{value:{viewModel:t}},r.a.createElement("div",{className:V.wrap,onContextMenu:G.b},n&&r.a.createElement(O,null),r.a.createElement(s.a,{onMeasure:d},r.a.createElement("div",{className:V.space,onClick:function(e){if(e.defaultPrevented)return;if(!(e.target instanceof Element)||null===a.current)return;e.target===a.current&&t.selection().set([])}},null!==h&&r.a.createElement(j.a,{key:u,height:h.height,width:h.width,canBeAddedToSelection:function(e){const n=t.entity(e);return t.selection().canBeAddedToSelection(n)},nodeRenderer:i,initState:function(){const{nodes:e,selection:n}=t.getState();return{selectedIds:n,nodes:e}},canMove:function(e,n,o){return t.isSelectionDropable(n.id,o)},drag:P,rowHeight:H,onSelect:function(e){const n=e.map(e=>t.entity(e)).filter(e=>null!==e);t.selection().set(n);const o=k.ContextMenuManager.getShown();o&&o.hide()},onDrop:function(e){e.preventDefault();const{detail:{target:n,type:o}}=e;t.insertSelection(n,o)},scrollToId:b,saga:function*(){yield Object(c.d)(x,t)},onKeyboardSelect:function(e){_({id:e})},outerRef:function(e){a.current=e}}))))))}function H(e,t){switch(t.type){case"node":return 38;case"separator":return 13}}},zn4F:function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M2.448 10.124a10.82 10.82 0 0 1-.336-.609L2.105 9.5l.007-.015a12.159 12.159 0 0 1 1.686-2.466C5.002 5.665 6.752 4.373 9.05 4.373c2.297 0 4.047 1.292 5.25 2.646a12.166 12.166 0 0 1 1.687 2.466l.007.015-.007.015a12.163 12.163 0 0 1-1.686 2.466c-1.204 1.354-2.954 2.646-5.251 2.646-2.298 0-4.048-1.292-5.252-2.646a12.16 12.16 0 0 1-1.35-1.857zm14.558-.827l-.456.203.456.203v.002l-.003.005-.006.015-.025.052a11.813 11.813 0 0 1-.461.857 13.163 13.163 0 0 1-1.463 2.011c-1.296 1.46-3.296 2.982-5.998 2.982-2.703 0-4.703-1.522-6-2.982a13.162 13.162 0 0 1-1.83-2.677 7.883 7.883 0 0 1-.118-.243l-.007-.015-.002-.005v-.001l.456-.204-.456-.203v-.002l.002-.005.007-.015a4.66 4.66 0 0 1 .119-.243 13.158 13.158 0 0 1 1.83-2.677c1.296-1.46 3.296-2.982 5.999-2.982 2.702 0 4.702 1.522 5.998 2.981a13.158 13.158 0 0 1 1.83 2.678 8.097 8.097 0 0 1 .119.243l.006.015.003.005v.001zm-.456.203l.456-.203.09.203-.09.203-.456-.203zM1.092 9.297l.457.203-.457.203-.09-.203.09-.203zm9.958.203c0 1.164-.917 2.07-2 2.07-1.084 0-2-.906-2-2.07 0-1.164.916-2.07 2-2.07 1.083 0 2 .906 2 2.07zm1 0c0 1.695-1.344 3.07-3 3.07-1.657 0-3-1.375-3-3.07 0-1.695 1.343-3.07 3-3.07 1.656 0 3 1.375 3 3.07z"/></svg>'}}]);