(window.webpackJsonp=window.webpackJsonp||[]).push([["drawing-toolbar"],{"/KDZ":function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var i=o("q1tI");class n extends i.PureComponent{constructor(e){super(e),this._handleChange=()=>{this.forceUpdate()},this.state={query:window.matchMedia(this.props.rule)}}componentDidMount(){this._subscribe(this.state.query)}componentDidUpdate(e,t){this.state.query!==t.query&&(this._unsubscribe(t.query),this._subscribe(this.state.query))}componentWillUnmount(){this._unsubscribe(this.state.query)}render(){return this.props.children(this.state.query.matches)}static getDerivedStateFromProps(e,t){return e.rule!==t.query.media?{query:window.matchMedia(e.rule)}:null}_subscribe(e){e.addListener(this._handleChange)}_unsubscribe(e){e.removeListener(this._handleChange)}}},"1TxM":function(e,t,o){"use strict";o.d(t,"c",(function(){return l})),o.d(t,"a",(function(){return c})),o.d(t,"b",(function(){return d}));var i=o("q1tI"),n=o.n(i),s=o("17x9"),a=o.n(s);const r=n.a.createContext({});function l(e,t){a.a.checkPropTypes(t,e,"context","RegistryContext")}function c(e){const{validation:t,value:o}=e;return l(o,t),n.a.createElement(r.Provider,{value:o},e.children)}function d(){return r}},"5AaZ":function(e,t,o){"use strict";o.d(t,"a",(function(){return m}));var i=o("q1tI"),n=o.n(i),s=o("TSYQ"),a=o.n(s),r=o("cvc5"),l=o("Iivm"),c=o("//lZ"),d=o("9uLv"),h=o("uJ8n"),u=o("Vike");class m extends n.a.PureComponent{constructor(e){super(e),this._scroll=null,this._handleScrollTop=()=>{this.animateTo(Math.max(0,this.currentPosition()-(this.state.heightWrap-50)))},this._handleScrollBot=()=>{this.animateTo(Math.min((this.state.heightContent||0)-(this.state.heightWrap||0),this.currentPosition()+(this.state.heightWrap-50)))},this._handleResizeWrap=({height:e})=>{this.setState({heightWrap:e})},this._handleResizeContent=({height:e})=>{this.setState({heightContent:e})},this._handleScroll=()=>{const{onScroll:e}=this.props;e&&e(this.currentPosition(),this.isAtTop(),this.isAtBot()),this._checkButtonsVisibility()},this._checkButtonsVisibility=()=>{const{isVisibleTopButton:e,isVisibleBotButton:t}=this.state,o=this.isAtTop(),i=this.isAtBot();o||e?o&&e&&this.setState({isVisibleTopButton:!1}):this.setState({isVisibleTopButton:!0}),i||t?i&&t&&this.setState({isVisibleBotButton:!1}):this.setState({isVisibleBotButton:!0})},this.state={heightContent:0,heightWrap:0,isVisibleBotButton:!1,isVisibleTopButton:!1}}componentDidMount(){this._checkButtonsVisibility()}componentDidUpdate(e,t){t.heightWrap===this.state.heightWrap&&t.heightContent===this.state.heightContent||this._handleScroll()}currentPosition(){return this._scroll?this._scroll.scrollTop:0}isAtTop(){return this.currentPosition()<=1}isAtBot(){return this.currentPosition()+this.state.heightWrap>=this.state.heightContent-1}animateTo(e,t=d.dur){const o=this._scroll;o&&Object(c.doAnimate)({onStep(e,t){o.scrollTop=t},from:o.scrollTop,to:Math.round(e),easing:d.easingFunc.easeInOutCubic,duration:t})}render(){const{children:e,isVisibleScrollbar:t,isVisibleFade:o,isVisibleButtons:i,onMouseOver:s,onMouseOut:c}=this.props,{heightContent:d,heightWrap:m,isVisibleBotButton:b,isVisibleTopButton:p}=this.state;return n.a.createElement(r,{whitelist:["height"],onMeasure:this._handleResizeWrap},n.a.createElement("div",{className:h.wrap,onMouseOver:s,onMouseOut:c},n.a.createElement("div",{className:a()(h.scrollWrap,{[h.noScrollBar]:!t}),onScroll:this._handleScroll,ref:e=>this._scroll=e},n.a.createElement(r,{onMeasure:this._handleResizeContent,whitelist:["height"]},n.a.createElement("div",{className:h.content},e))),o&&n.a.createElement("div",{className:a()(h.fadeTop,{[h.isVisible]:p&&d>m})}),o&&n.a.createElement("div",{className:a()(h.fadeBot,{[h.isVisible]:b&&d>m})}),i&&n.a.createElement("div",{className:a()(h.scrollTop,{[h.isVisible]:p&&d>m}),onClick:this._handleScrollTop},n.a.createElement("div",{className:h.iconWrap},n.a.createElement(l.a,{icon:u,className:h.icon}))),i&&n.a.createElement("div",{className:a()(h.scrollBot,{[h.isVisible]:b&&d>m}),onClick:this._handleScrollBot},n.a.createElement("div",{className:h.iconWrap},n.a.createElement(l.a,{icon:u,className:h.icon})))))}}m.defaultProps={isVisibleScrollbar:!0}},"5f7t":function(e,t,o){"use strict";o.r(t);var i=o("q1tI"),n=o.n(i),s=o("i8i4"),a=o("Eyy1"),r=o("YFKU"),l=(o("EsMY"),o("TSYQ")),c=o.n(l),d=o("Vdly"),h=o("Kxc7"),u=o("mMWL"),m=o("zL3Q"),b=o("FQhm"),p=o("aIyQ"),g=o.n(p),v=o("qFKp"),w=o("mNbo"),f=o("MP+M");class _{constructor(e){this._drawingsAccess=e||{tools:[],type:"black"}}isToolEnabled(e){const t=this._findTool(e);return!(!t||!t.grayed)||("black"===this._drawingsAccess.type?!t:!!t)}isToolGrayed(e){const t=this._findTool(e);return Boolean(t&&t.grayed)}_findTool(e){return this._drawingsAccess.tools.find((t=>t.name===e))}}var T=o("/3z9"),C=o("+GxX");const y=[{id:"linetool-group-cursors",title:window.t("Cursors"),items:[{name:"cursor"},{name:"dot"},{name:"arrow"},{name:"eraser"}]},{id:"linetool-group-trend-line",title:window.t("Trend Line Tools"),items:[{name:"LineToolTrendLine",hotkeyHash:T.Modifiers.Alt+84},{name:"LineToolInfoLine"},{name:"LineToolTrendAngle"},null,{name:"LineToolHorzLine",hotkeyHash:T.Modifiers.Alt+72},{name:"LineToolHorzRay"},{name:"LineToolVertLine",hotkeyHash:T.Modifiers.Alt+86},{name:"LineToolCrossLine",hotkeyHash:T.Modifiers.Alt+67},{name:"LineToolArrow"},{name:"LineToolRay"},{name:"LineToolExtended"},{name:"LineToolParallelChannel"},{name:"LineToolDisjointAngle"},{name:"LineToolFlatBottom"},null].filter(Boolean)},{id:"linetool-group-gann-and-fibonacci",title:window.t("Gann and Fibonacci Tools"),items:[{name:"LineToolPitchfork"},{name:"LineToolSchiffPitchfork2"},{name:"LineToolSchiffPitchfork"},{name:"LineToolInsidePitchfork"},{name:"LineToolPitchfan"},{name:"LineToolGannSquare"},{name:"LineToolGannComplex"},{name:"LineToolGannFixed"},{name:"LineToolGannFan"},{name:"LineToolFibRetracement",hotkeyHash:T.Modifiers.Alt+70},{name:"LineToolTrendBasedFibExtension"},{name:"LineToolFibSpeedResistanceFan"},{name:"LineToolFibTimeZone"},{name:"LineToolTrendBasedFibTime"},{name:"LineToolFibCircles"},{name:"LineToolFibSpiral"},{name:"LineToolFibSpeedResistanceArcs"},{name:"LineToolFibWedge"},{name:"LineToolFibChannel"}]},{id:"linetool-group-geometric-shapes",title:window.t("Geometric Shapes"),items:[{name:"LineToolBrush"},{name:"LineToolHighlighter"},{name:"LineToolPath"},{name:"LineToolRectangle"},{name:"LineToolRotatedRectangle"},{name:"LineToolEllipse"},{name:"LineToolTriangle"},{name:"LineToolPolyline"},{name:"LineToolBezierQuadro"},{name:"LineToolBezierCubic"},{name:"LineToolArc"}]},{id:"linetool-group-annotation",title:window.t("Annotation Tools"),items:[{name:"LineToolText"},{name:"LineToolTextAbsolute"},{name:"LineToolNote"},{name:"LineToolNoteAbsolute"},{name:"LineToolSignpost"},{name:"LineToolCallout"},{name:"LineToolBalloon"},{name:"LineToolPriceLabel"},{name:"LineToolPriceNote"},{name:"LineToolArrowMarker"},{name:"LineToolArrowMarkLeft"},{name:"LineToolArrowMarkRight"},{name:"LineToolArrowMarkUp"},{name:"LineToolArrowMarkDown"},{name:"LineToolFlagMark"}].filter(Boolean)},{id:"linetool-group-patterns",title:window.t("Patterns"),items:[{name:"LineTool5PointsPattern"},{name:"LineToolCypherPattern"},{name:"LineToolABCD"},{name:"LineToolTrianglePattern"},{name:"LineToolThreeDrivers"},{name:"LineToolHeadAndShoulders"},{name:"LineToolElliottImpulse"},{name:"LineToolElliottTriangle"},{name:"LineToolElliottTripleCombo"},{name:"LineToolElliottCorrection"},{name:"LineToolElliottDoubleCombo"},{name:"LineToolCircleLines"},{name:"LineToolTimeCycles"},{name:"LineToolSineLine"}]},{id:"linetool-group-prediction-and-measurement",title:window.t("Prediction and Measurement Tools"),items:[{name:"LineToolRiskRewardLong"},{name:"LineToolRiskRewardShort"},{name:"LineToolPrediction"},{name:"LineToolDateRange"},{name:"LineToolPriceRange"},{name:"LineToolDateAndPriceRange"},{name:"LineToolBarsPattern"},Object(C.isFeatureEnabled)("remove-line-tool-ghost-feed")?null:{name:"LineToolGhostFeed"},{name:"LineToolProjection"},null].filter(Boolean)}];var S=o("OiSa"),k=o("5AaZ"),O=o("lxNp"),E=o("tWVy"),D=o("4rU7");function L(e){const{id:t,action:o,isActive:n,isHidden:s,isTransparent:a,toolName:r}=e;return i.createElement(D.a,{id:t,icon:f.a[r].icon,isActive:n,isHidden:s,isTransparent:a,onClick:o,title:f.a[r].localizedName,"data-name":r})}var M=o("wZIs");const N=[61536,61537,61538,61539,61725,61726,61575,61576,61796,61797,61779,61780,61781,61782,61783,61784,61785,61786,61440,61441,61442,61444,61445,61446,61447,61448,61452,61453,61454,61456,61457,61458,61459,61460,61461,61463,61464,61466,61467,61469,61470,61473,61475,61476,61488,61502,61504,61505,61507,61510,61523,61524,61525,61526,61527,61528,61529,61530,61531,61532,61533,61534,61540,61541,61542,61543,61544,61545,61546,61547,61548,61550,61552,61553,61554,61555,61557,61558,61559,61560,61565,61566,61568,61572,61574,61578,61588,61597,61601,61602,61603,61604,61605,61606,61607,61608,61609,61610,61611,61616,61617,61635,61648,61649,61654,61655,61656,61657,61658,61659,61666,61667,61669,61670,61671,61672,61673,61675,61681,61682,61683,61684,61696,61697,61698,61699,61700,61701,61702,61703,61704,61705,61706,61707,61708,61712,61713,61714,61715,61720,61721,61722,61731,61732,61736,61737,61738,61746,61747,61748,61749,61751,61752,61753,61754,61757,61758,61760,61764,61768,61769,61770,61771,61772,61773,61774,61776,61777,61778,61799,61811,61812,61813,61814,61815,61816,61817,61818,61819,61820,61821,61826,61827,61828,61829,61830,61831,61832,61836,61838,61840,61842,61845];var A=o("Iivm"),j=o("9dlw"),x=o("ijHL"),B=o("Sn4D"),V=o("hn2c"),P=o("KmEK");class I extends i.PureComponent{constructor(e){super(e),this._toggleDropdown=e=>{this.setState({isOpened:void 0!==e?e:!this.state.isOpened})},this._handleClose=()=>{this._toggleDropdown(!1)},this._getDropdownPosition=()=>{if(!this._control)return{x:0,y:0};const e=this._control.getBoundingClientRect();return{x:e.left+e.width+1,y:e.top-6}},this._handleClickArrow=()=>{this._toggleDropdown()},this._handleTouchStart=()=>{this.props.onClickButton(),this._toggleDropdown()},this._handlePressStart=()=>{if(Modernizr.mobiletouch&&!this.props.checkable)this._longPressDelay||this.props.onClickButton();else{if(this._doubleClickDelay)return clearTimeout(this._doubleClickDelay),delete this._doubleClickDelay,void this._toggleDropdown(!0);this._doubleClickDelay=setTimeout((()=>{delete this._doubleClickDelay,this._longPressDelay||this.props.onClickButton()}),175)}this._longPressDelay=setTimeout((()=>{delete this._longPressDelay,this._toggleDropdown(!0)}),300)},this._cancelAllTimeouts=()=>{clearTimeout(this._longPressDelay),delete this._longPressDelay,clearTimeout(this._doubleClickDelay),delete this._doubleClickDelay},this._handleTouchPressEnd=e=>{e.cancelable&&e.preventDefault(),this._handlePressEnd()},this._handlePressEnd=()=>{this._longPressDelay&&(clearTimeout(this._longPressDelay),delete this._longPressDelay,this.state.isOpened?this._toggleDropdown(!1):this.props.checkable||this.state.isOpened||!this.props.isActive||Modernizr.mobiletouch?this._doubleClickDelay||this.props.onClickButton():this._toggleDropdown(!0))},this.state={isOpened:!1}}render(){const{buttonActiveClass:e,buttonClass:t,buttonIcon:o,buttonTitle:n,buttonHotKey:s,dropdownTooltip:a,children:r,isActive:c,isGrayed:d,onClickWhenGrayed:h,checkable:u,isSmallTablet:m}=this.props,{isOpened:b}=this.state,p=Object(x.b)(this.props);return i.createElement("div",{className:l(P.dropdown,{[P.isGrayed]:d,[P.isActive]:c,[P.isOpened]:b}),onClick:d?h:void 0},i.createElement("div",Object.assign({},p,{ref:e=>this._control=e,className:P.control}),i.createElement("div",Object.assign({},this._getButtonHandlers(),{className:l(P.buttonWrap,{"apply-common-tooltip common-tooltip-vertical":Boolean(n||s)}),"data-tooltip-hotkey":s,"data-tooltip-delay":1500,"data-role":"button",title:n}),i.createElement(D.a,{activeClass:e,className:t,icon:o,isActive:c,isGrayed:d,isTransparent:!u})),!d&&!Modernizr.mobiletouch&&i.createElement("div",{className:l(P.arrow,a&&"apply-common-tooltip common-tooltip-vertical"),title:a,onClick:this._handleClickArrow,"data-role":"menu-handle"},i.createElement(A.a,{className:P.arrowIcon,icon:V}))),!d&&(m?b&&i.createElement(B.a,{onClose:this._handleClose,position:"Bottom"},r):i.createElement(j.a,{doNotCloseOn:this,isOpened:b,onClose:this._handleClose,position:this._getDropdownPosition},r)))}_getButtonHandlers(){const{isGrayed:e,checkable:t}=this.props;return e?{}:Modernizr.mobiletouch?t?{onTouchStart:this._handlePressStart,onTouchEnd:this._handleTouchPressEnd,onTouchMove:this._cancelAllTimeouts}:{onClick:this._handleTouchStart}:{onMouseDown:this._handlePressStart,onMouseUp:this._handlePressEnd}}}var W=o("KKsp"),U=o("EA32");const F={icon:window.t("Icon"),dropdownTooltip:window.t("Icons")};class R extends i.Component{constructor(e){super(e),this._renderItem=(e,t)=>{const{isSmallTablet:o}=this.props,n=c()(U.item,o&&U.smallTablet,t&&o&&this.state.isActive&&e===this.state.current&&U.active);return i.createElement("div",{className:n,key:e,onClick:()=>{this._handleSelect(e),Object(E.b)()}},String.fromCharCode(e))},this._onChangeDrawingState=()=>{this.setState({isActive:this._isActive()})},this._handleSelect=e=>{Object(M.saveDefaults)("linetoolicon",Object.assign(Object.assign({},Object(M.defaults)("linetoolicon")),{icon:e})),u.iconTool.setValue(e),u.tool.setValue("LineToolIcon");let{recents:t}=this.state;const o=t.indexOf(e);-1!==o&&t.splice(o,1),t=[e,...t.slice(0,9)],Object(d.setJSON)("linetoolicon.recenticons",t),this.setState({current:e,recents:t})},this.state={current:Object(M.defaults)("linetoolicon").icon,recents:Object(d.getJSON)("linetoolicon.recenticons")||[]}}componentDidMount(){u.tool.subscribe(this._onChangeDrawingState),d.onSync.subscribe(this,this._onSyncSettings)}componentWillUnmount(){u.tool.unsubscribe(this._onChangeDrawingState),d.onSync.unsubscribe(this,this._onSyncSettings)}render(){const{isGrayed:e,toolName:t,isSmallTablet:o}=this.props,{current:n,isActive:s,recents:a}=this.state,r=Object(x.b)(this.props),l=c()(U.wrap,o&&U.smallTablet);return i.createElement(I,Object.assign({buttonClass:U.button,buttonIcon:i.createElement("div",{className:U.buttonIcon},String.fromCharCode(n||N[0])),buttonTitle:F.icon,dropdownTooltip:F.dropdownTooltip,isActive:s,isGrayed:e,isSmallTablet:o,onClickButton:()=>this._handleSelect(n||N[0]),onClickWhenGrayed:()=>Object(b.emit)("onGrayedObjectClicked",{type:"drawing",name:f.a[t].localizedName})},r),a&&i.createElement(i.Fragment,null,o&&i.createElement("div",{className:U.title},window.t("Recently used")),i.createElement("div",{className:l},a.map((e=>this._renderItem(e,!0)))),i.createElement(W.a,{className:c()(o&&U.separator)})),i.createElement("div",{key:"all",className:l},N.map((e=>this._renderItem(e)))))}_isActive(){return u.tool.value()===this.props.toolName}_onSyncSettings(){this.setState({recents:Object(d.getJSON)("linetoolicon.recenticons")})}}var z=o("Ocx9");class H extends i.PureComponent{constructor(e){super(e),this._handleClick=()=>{this.props.saveDefaultOnChange&&Object(z.saveDefaultProperties)(!0);const e=!this.props.property.value();this.props.property.setValue(e),this.props.saveDefaultOnChange&&Object(z.saveDefaultProperties)(!1),this.props.onClick&&this.props.onClick(e)},this.state={isActive:this.props.property.value()}}componentDidMount(){this.props.property.subscribe(this,this._onChange)}componentWillUnmount(){this.props.property.unsubscribe(this,this._onChange)}render(){const{toolName:e}=this.props,{isActive:t}=this.state,o=f.a[e];return i.createElement(D.a,{icon:t&&o.iconActive?o.iconActive:o.icon,isActive:t,onClick:this._handleClick,title:o.localizedName,buttonHotKey:o.hotKey,"data-name":e})}_onChange(e){this.setState({isActive:e.value()})}}class G extends i.PureComponent{constructor(e){super(e),this._handleClick=()=>{u.tool.setValue(this.props.toolName)},this._onChange=()=>{this.setState({isActive:u.tool.value()===this.props.toolName})},this.state={isActive:u.tool.value()===this.props.toolName}}componentDidMount(){u.tool.subscribe(this._onChange)}componentWillUnmount(){u.tool.unsubscribe(this._onChange)}render(){const{toolName:e}=this.props,{isActive:t}=this.state,o=f.a[e];return i.createElement(D.a,{icon:f.a[e].icon,isActive:t,isTransparent:!0,onClick:this._handleClick,title:o.localizedName,buttonHotKey:o.hotKey,"data-name":e})}}class q extends i.PureComponent{constructor(e){super(e),this._boundUndoModel=null,this._handleClick=()=>{const e=this._activeChartWidget().model();e&&e.zoomFromViewport()},this._syncUnzoomButton=()=>{const e=this._activeChartWidget(),t=e.model();let o=!1;t?(this._boundUndoModel!==t&&(this._boundUndoModel&&this._boundUndoModel.zoomStack().onChange().unsubscribe(null,this._syncUnzoomButton),t.zoomStack().onChange().subscribe(null,this._syncUnzoomButton),this._boundUndoModel=t),o=!t.zoomStack().isEmpty()):e.withModel(null,this._syncUnzoomButton),this.setState({isVisible:o})},this.state={isVisible:!1}}componentDidMount(){this.props.chartWidgetCollection.activeChartWidget.subscribe(this._syncUnzoomButton,{callWithLast:!0})}componentWillUnmount(){this.props.chartWidgetCollection.activeChartWidget.unsubscribe(this._syncUnzoomButton)}render(){return this.state.isVisible?i.createElement(L,{action:this._handleClick,isTransparent:!0,toolName:"zoom-out"}):i.createElement("div",null)}_activeChartWidget(){return this.props.chartWidgetCollection.activeChartWidget.value()}}var K=o("b2d7"),Y=o("pr86"),Q=o("N5tr"),J=o("dhVi");class X extends i.PureComponent{constructor(e){super(e),this._onChangeDrawingState=()=>{const e=this._getActiveToolIndex();this.setState({current:-1!==e?e:this.state.current,isActive:-1!==e})},this._handleClickButton=()=>{if(v.CheckMobile.any())return;const e=this._getCurrentToolName();this._selectTool(e)},this._handleClickItem=e=>{this._selectTool(e)},this._handleGrayedClick=e=>{Object(b.emit)("onGrayedObjectClicked",{type:"drawing",name:f.a[e].localizedName})},this._handleClickFavorite=e=>{this.state.favState&&this.state.favState[e]?K.a.removeFavorite(e):K.a.addFavorite(e)},this._onAddFavorite=e=>{this.setState({favState:Object.assign(Object.assign({},this.state.favState),{[e]:!0})})},this._onRemoveFavorite=e=>{this.setState({favState:Object.assign(Object.assign({},this.state.favState),{[e]:!1})})},this._onSyncFavorites=()=>{this.setState({favState:this._composeFavState()})};const t=this._getActiveToolIndex();this.state={current:-1===t?this._firstNonGrayedTool():t,favState:this._composeFavState(),isActive:-1!==t}}componentDidMount(){u.tool.subscribe(this._onChangeDrawingState),K.a.favoriteAdded.subscribe(null,this._onAddFavorite),K.a.favoriteRemoved.subscribe(null,this._onRemoveFavorite),K.a.favoritesSynced.subscribe(null,this._onSyncFavorites)}componentWillUnmount(){u.tool.unsubscribe(this._onChangeDrawingState),K.a.favoriteAdded.unsubscribe(null,this._onAddFavorite),K.a.favoriteRemoved.unsubscribe(null,this._onRemoveFavorite),K.a.favoritesSynced.unsubscribe(null,this._onSyncFavorites)}componentDidUpdate(e,t){e.lineTools!==this.props.lineTools&&this.setState({favState:this._composeFavState()})}render(){const{favoriting:e,grayedTools:t,lineTools:o,dropdownTooltip:n,isSmallTablet:s}=this.props,{current:a,favState:r,isActive:l}=this.state,c=this._getCurrentToolName(),d=f.a[c],h=this._showShortcuts(),u=Object(x.b)(this.props);return i.createElement("span",null,i.createElement(I,Object.assign({buttonIcon:d.icon,buttonTitle:d.localizedName,buttonHotKey:d.hotKey,dropdownTooltip:n,isActive:l,onClickButton:this._handleClickButton,isSmallTablet:s},u),o.map(((o,n)=>{const c=o.name,d=f.a[c],u=t[c];return i.createElement(Q.b,{key:c,"data-name":o.name,theme:s?J.a:void 0,dontClosePopup:u,forceShowShortcuts:h,shortcut:!s&&o.hotkeyHash?Object(T.humanReadableHash)(o.hotkeyHash):void 0,icon:d.icon,isActive:l&&a===n,appearAsDisabled:u,label:d.localizedName,onClick:u?this._handleGrayedClick:this._handleClickItem,onClickArg:c,showToolboxOnHover:!r[c],toolbox:e&&!u?i.createElement(Y.a,{isActive:l&&a===n,isFilled:r[c],onClick:()=>this._handleClickFavorite(c)}):void 0})}))))}_getCurrentToolName(){const{current:e}=this.state,{lineTools:t}=this.props;return t[e||0].name}_firstNonGrayedTool(){const{grayedTools:e,lineTools:t}=this.props;return t.findIndex((t=>!e[t.name]))}_getActiveToolIndex(){return this.props.lineTools.findIndex((e=>e.name===u.tool.value()))}_showShortcuts(){return this.props.lineTools.some((e=>"shortcut"in e))}_selectTool(e){u.tool.setValue(e)}_composeFavState(){const e={};return this.props.lineTools.forEach((t=>{e[t.name]=K.a.isFavorite(t.name)})),e}}var Z=o("JWMC"),$=o("nPPD"),ee=o("FTBN");const te=Object($.a)(Q.a,ee),oe={all:window.t("Remove Drawings & Indicators"),drawings:window.t("Remove Drawings"),studies:window.t("Remove Indicators")};class ie extends i.PureComponent{constructor(){super(...arguments),this._handleRemoveToolClick=()=>{Modernizr.mobiletouch||this._handleRemoveDrawings()},this._handleRemoveDrawings=()=>{Object(Z.trackEvent)("GUI","Chart Left Toolbar","remove drawing"),this.props.chartWidgetCollection.activeChartWidget.value().removeAllDrawingTools()},this._handleRemoveStudies=()=>{Object(Z.trackEvent)("GUI","Chart Left Toolbar","remove indicator"),this.props.chartWidgetCollection.activeChartWidget.value().removeAllStudies()},this._handleRemoveAll=()=>{Object(Z.trackEvent)("GUI","Chart Left Toolbar","remove all"),this.props.chartWidgetCollection.activeChartWidget.value().removeAllStudiesDrawingTools()}}render(){const e=this.props.isSmallTablet?te:void 0;return i.createElement(I,{buttonIcon:f.a[this.props.toolName].icon,buttonTitle:oe.drawings,onClickButton:this._handleRemoveToolClick,isSmallTablet:this.props.isSmallTablet,"data-name":this.props.toolName},i.createElement(Q.b,{"data-name":"remove-drawing-tools",label:oe.drawings,onClick:this._handleRemoveDrawings,theme:e}),i.createElement(Q.b,{"data-name":"remove-studies",label:oe.studies,onClick:this._handleRemoveStudies,theme:e}),i.createElement(Q.b,{"data-name":"remove-all",label:oe.all,onClick:this._handleRemoveAll,theme:e}))}}var ne=o("Ijvb");function se(e){const{hideDrawingsProperty:t,hideIndicatorsProperty:o,isSmallTablet:s}=e,[a,l]=Object(i.useState)((()=>d.getValue("ChartToolsHideMode","drawings"))),[c,h]=Object(i.useState)((()=>t.value())),[u,m]=Object(i.useState)((()=>o.value()));Object(i.useEffect)((()=>{const e=v("drawings",h),i=v("indicators",m);return t.subscribe(null,e),o.subscribe(null,i),()=>{t.unsubscribe(null,e),o.unsubscribe(null,i)}}),[]);const b=f.a.hideAllDrawings,p=c||u,g=s?te:void 0;return n.a.createElement(I,{buttonIcon:function(){switch(a){case"drawings":return c?ne.a.hideAllDrawingToolsActive:ne.a.hideAllDrawingTools;case"indicators":return u?ne.a.hideAllIndicatorsActive:ne.a.hideAllIndicators;default:return c&&u?ne.a.hideAllDrawingsActive:ne.a.hideAllDrawings}}(),buttonTitle:function(){switch(a){case"drawings":return p?Object(r.t)("Show all drawings"):Object(r.t)("Hide all drawings");case"indicators":return p?Object(r.t)("Show all indicators"):Object(r.t)("Hide all indicators");default:return p?Object(r.t)("Show all drawings and indicators"):Object(r.t)("Hide all drawings and indicators")}}(),buttonHotKey:b.hotKey,onClickButton:function(){switch(a){case"drawings":ae(t);break;case"indicators":ae(o);break;default:ae(t),ae(o)}},isSmallTablet:s,isActive:p,checkable:!0,"data-name":"hide-all","data-type":{drawings:"hide-drawing-tools",indicators:"hide-indicators",all:"hide-drawings-and-indicators"}[a]},n.a.createElement(Q.b,{label:Object(r.t)("Hide drawings"),isActive:c&&!u,onClick:function(){const e="all"===a||!c;o.setValue(!1),t.setValue(e),w("drawings"),re("hide drawings",e)},"data-name":"hide-drawing-tools",theme:g}),n.a.createElement(Q.b,{label:Object(r.t)("Hide indicators"),isActive:!c&&u,onClick:function(){const e="all"===a||!u;t.setValue(!1),o.setValue(e),w("indicators"),re("hide indicators",e)},"data-name":"hide-indicators",theme:g}),n.a.createElement(Q.b,{label:Object(r.t)("Hide drawings & indicators"),isActive:c&&u,onClick:function(){const e=!(c&&u);t.setValue(e),o.setValue(e),w("all"),re("hide drawings and indicators",e)},"data-name":"hide-drawings-and-indicators",theme:g}));function v(e,t){return e=>t(e.value())}function w(e){l(e),d.setValue("ChartToolsHideMode",e)}}function ae(e){e.setValue(!e.value())}function re(e,t){Object(Z.trackEvent)("GUI","Chart Left Toolbar",`${e} ${t?"on":"off"}`)}var le=o("g5Qf"),ce=o("85c9");const de=window.t("Show Favorite Drawing Tools Toolbar");class he extends i.PureComponent{constructor(){super(...arguments),this._instance=null,this._promise=null,this._bindedForceUpdate=()=>this.forceUpdate(),this._handleClick=()=>{null!==this._instance&&(this._instance.isVisible()?this._instance.hide():this._instance.show())}}componentDidMount(){const e=this._promise=Object(a.ensureNotNull)(Object(le.getFavoriteDrawingToolbarPromise)());e.then((t=>{this._promise===e&&(this._instance=t,this._instance.canBeShown().subscribe(this._bindedForceUpdate),this._instance.visibility().subscribe(this._bindedForceUpdate),this.forceUpdate())}))}componentWillUnmount(){this._promise=null,null!==this._instance&&(this._instance.canBeShown().unsubscribe(this._bindedForceUpdate),this._instance.visibility().unsubscribe(this._bindedForceUpdate),this._instance=null)}render(){return null!==this._instance&&this._instance.canBeShown().value()?i.createElement(D.a,{id:this.props.id,icon:ce,isActive:this._instance.isVisible(),onClick:this._handleClick,title:de}):null}}var ue,me=o("4o++");!function(e){e.Screenshot="drawing-toolbar-screenshot",e.FavoriteDrawings="drawing-toolbar-favorite-drawings",e.ObjectTree="drawing-toolbar-object-tree"}(ue||(ue={}));var be=o("8d0Q"),pe=o("XAms"),ge=o("7RN7"),ve=o("X0gx"),we=o("VNzU");class fe extends i.PureComponent{constructor(e){super(e),this._syncVisibleState=()=>{this.setState({isVisible:this._isMultipleLayout()})},this.state={isVisible:this._isMultipleLayout()}}componentDidMount(){this.props.layout.subscribe(this._syncVisibleState)}componentWillUnmount(){this.props.layout.unsubscribe(this._syncVisibleState)}render(){return this.state.isVisible?this.props.children:i.createElement("div",null)}_isMultipleLayout(){return Object(we.isMultipleLayout)(this.props.layout.value())}}var _e=o("EKk7"),Te=o("ybOa");const Ce=Object($.a)(_e.a,Te),ye={hide:window.t("Hide Drawings Toolbar"),show:window.t("Show Drawings Toolbar")};class Se extends i.PureComponent{constructor(){super(...arguments),this._toggleVisibility=()=>{S.isDrawingToolbarVisible.setValue(!S.isDrawingToolbarVisible.value())}}render(){const{toolbarVisible:e}=this.props;return i.createElement("div",{className:l(Ce.toggleButton,"apply-common-tooltip common-tooltip-vertical",!e&&Ce.collapsed),onClick:this._toggleVisibility,title:e?ye.hide:ye.show},i.createElement(_e.b,{direction:e?"left":"right",theme:e?void 0:Ce}))}}var ke=o("mkWe"),Oe=o("uhCe"),Ee=o("/KDZ");const De={chartWidgetCollection:o("17x9").any.isRequired};var Le=o("1TxM"),Me=o("JQKp");const Ne={weakMagnet:window.t("Weak Magnet"),strongMagnet:window.t("Strong Magnet")},Ae=Object(v.onWidget)(),je=new g.a,xe=Z.trackEvent.bind(null,"GUI","Chart Left Toolbar"),Be=(e,t)=>xe(`${e} ${t?"on":"off"}`);function Ve(){const e=!u.properties().childs().magnet.value();Be("magnet mode",e),Object(z.saveDefaultProperties)(!0),u.properties().childs().magnet.setValue(e),Object(z.saveDefaultProperties)(!1)}function Pe(){Object(Z.trackEvent)("GUI","Magnet mode","Weak"),Object(z.saveDefaultProperties)(!0),u.properties().childs().magnetMode.setValue(me.MagnetMode.WeakMagnet),u.properties().childs().magnet.setValue(!0),Object(z.saveDefaultProperties)(!1)}function Ie(){Object(Z.trackEvent)("GUI","Magnet mode","Strong"),Object(z.saveDefaultProperties)(!0),u.properties().childs().magnetMode.setValue(me.MagnetMode.StrongMagnet),u.properties().childs().magnet.setValue(!0),Object(z.saveDefaultProperties)(!1)}class We extends i.PureComponent{constructor(e){var t;super(e),this._grayedTools={},this._handleDrawingClick=e=>{Be("drawing mode",e)},this._handleLockClick=e=>{Be("lock all drawing",e)},this._handleSyncClick=e=>{Be("sync",e)},this._handleMouseOver=e=>{Object(be.a)(e)&&this.setState({isHovered:!0})},this._handleMouseOut=e=>{Object(be.a)(e)&&this.setState({isHovered:!1})},this._handleChangeVisibility=e=>{this.setState({isVisible:e})},this._handleEsc=()=>{u.resetToCursor(!0)},this._updateMagnetEnabled=()=>{const e={magnet:Object(m.a)().value()};this.setState(e)},this._updateMagnetMode=()=>{const e={magnetMode:Object(m.b)().value()};this.setState(e)},this._handleWidgetbarSettled=e=>{var t;this.setState({isWidgetbarVisible:null===(t=window.widgetbar)||void 0===t?void 0:t.visible().value(),widgetbarSettled:e})},this._handleWidgetbarVisible=e=>{this.setState({isWidgetbarVisible:e})},u.init(),this._toolsFilter=new _(this.props.drawingsAccess),this._filteredLineTools=y.map((e=>({id:e.id,title:e.title,items:e.items.filter((e=>this._toolsFilter.isToolEnabled(f.a[e.name].localizedName)))}))).filter((e=>0!==e.items.length)),this._filteredLineTools.forEach((e=>e.items.forEach((e=>{this._grayedTools[e.name]=this._toolsFilter.isToolGrayed(f.a[e.name].localizedName)})))),this.state={isHovered:!1,isVisible:S.isDrawingToolbarVisible.value(),isWidgetbarVisible:Boolean(null===(t=window.widgetbar)||void 0===t?void 0:t.visible().value()),widgetbarSettled:void 0!==window.widgetbar,magnet:u.properties().childs().magnet.value(),magnetMode:u.properties().childs().magnetMode.value()},this._features={favoriting:!Ae&&h.enabled("items_favoriting"),multicharts:h.enabled("support_multicharts"),tools:!Ae||h.enabled("charting_library_base")},this._registry={chartWidgetCollection:this.props.chartWidgetCollection},this._negotiateResizer()}componentDidMount(){var e;S.isDrawingToolbarVisible.subscribe(this._handleChangeVisibility),E.a.subscribe(this,this._handleGlobalClose),Object(m.a)().subscribe(this._updateMagnetEnabled),Object(m.b)().subscribe(this._updateMagnetMode),this._tool=u.tool.spawn(),this._tool.subscribe(this._updateHotkeys.bind(this)),this._initHotkeys(),this.props.widgetbarSettled&&(this.props.widgetbarSettled.subscribe(this,this._handleWidgetbarSettled),v.CheckMobile.any()&&(null===(e=window.widgetbar)||void 0===e||e.visible().subscribe(this._handleWidgetbarVisible)))}componentWillUnmount(){var e;null===(e=window.widgetbar)||void 0===e||e.visible().unsubscribe(this._handleWidgetbarVisible),S.isDrawingToolbarVisible.unsubscribe(this._handleChangeVisibility),E.a.unsubscribe(this,this._handleGlobalClose),Object(m.a)().unsubscribe(this._updateMagnetEnabled),Object(m.b)().unsubscribe(this._updateMagnetMode),this._tool.destroy(),this._hotkeys.destroy()}componentDidUpdate(e,t){var o;const{isVisible:i,widgetbarSettled:n}=this.state;i!==t.isVisible&&(b.emit("toggle_sidebar",!i),d.setValue("ChartDrawingToolbarWidget.visible",i),this._negotiateResizer()),t.widgetbarSettled!==n&&n&&v.CheckMobile.any()&&(null===(o=window.widgetbar)||void 0===o||o.visible().subscribe(this._handleWidgetbarVisible))}render(){const{bgColor:e,chartWidgetCollection:t,readOnly:o}=this.props,{isHovered:n,isVisible:s,magnet:a,magnetMode:r}=this.state,c={backgroundColor:e&&"#"+e};let d;d=i.createElement(Se,{toolbarVisible:s});const m=()=>!!this._features.tools&&!!h.enabled("show_object_tree")&&(!h.enabled("right_toolbar")||!this.state.isWidgetbarVisible&&v.CheckMobile.any()||Object(w.a)("new"));return i.createElement(Le.a,{validation:De,value:this._registry},i.createElement(ve.a.Provider,{value:je},i.createElement(ke.b,null,i.createElement(Ee.a,{rule:Oe.a.TabletSmall},(e=>i.createElement("div",{id:"drawing-toolbar",className:l(Me.drawingToolbar,{[Me.isHidden]:!s}),style:c,onClick:this.props.onClick,onContextMenu:pe.b},i.createElement(k.a,{onScroll:this._handleGlobalClose,isVisibleFade:Modernizr.mobiletouch,isVisibleButtons:!Modernizr.mobiletouch&&n,isVisibleScrollbar:!1,onMouseOver:this._handleMouseOver,onMouseOut:this._handleMouseOut},i.createElement("div",{className:Me.inner},!o&&i.createElement("div",{className:Me.group,style:c},this._filteredLineTools.map(((o,n)=>i.createElement(X,{"data-name":o.id,chartWidgetCollection:t,favoriting:this._features.favoriting,grayedTools:this._grayedTools,key:n,dropdownTooltip:o.title,lineTools:o.items,isSmallTablet:e}))),this._toolsFilter.isToolEnabled("Font Icons")&&i.createElement(R,{"data-name":"linetool-group-font-icons",isGrayed:this._grayedTools["Font Icons"],toolName:"LineToolIcon",isSmallTablet:e})),!o&&i.createElement("div",{className:Me.group,style:c},i.createElement(G,{toolName:"measure"}),i.createElement(G,{toolName:"zoom"}),i.createElement(q,{chartWidgetCollection:t})),!o&&i.createElement("div",{className:Me.group,style:c},i.createElement(I,{"data-name":"magnet-button",buttonIcon:r===me.MagnetMode.StrongMagnet?ne.a.strongMagnet:ne.a.magnet,buttonTitle:f.a.magnet.localizedName,isActive:a,onClickButton:Ve,buttonHotKey:f.a.magnet.hotKey,checkable:!0,isSmallTablet:e},i.createElement(Q.b,{key:"weakMagnet",className:e?Me.popupMenuItem:void 0,"data-name":"weakMagnet",icon:ne.a.magnet,isActive:a&&r!==me.MagnetMode.StrongMagnet,label:Ne.weakMagnet,onClick:Pe}),i.createElement(Q.b,{key:"strongMagnet",className:e?Me.popupMenuItem:void 0,"data-name":"strongMagnet",icon:ne.a.strongMagnet,isActive:a&&r===me.MagnetMode.StrongMagnet,label:Ne.strongMagnet,onClick:Ie})),this._features.tools&&i.createElement(H,{property:u.properties().childs().stayInDrawingMode,saveDefaultOnChange:!0,toolName:"drawginmode",onClick:this._handleDrawingClick}),this._features.tools&&i.createElement(H,{property:u.lockDrawings(),toolName:"lockAllDrawings",onClick:this._handleLockClick}),this._features.tools&&i.createElement(se,{isSmallTablet:e,hideDrawingsProperty:u.hideAllDrawings(),hideIndicatorsProperty:u.hideAllIndicators()}),this._features.tools&&this._features.multicharts&&i.createElement(fe,{layout:t.layout},i.createElement(H,{property:u.drawOnAllCharts(),saveDefaultOnChange:!0,toolName:"SyncDrawing",onClick:this._handleSyncClick}))),!o&&this._features.tools&&i.createElement("div",{className:Me.group,style:c},i.createElement(ie,{chartWidgetCollection:t,isSmallTablet:e,toolName:"removeAllDrawingTools"})),i.createElement("div",{className:Me.fill,style:c}),!o&&(this._features.tools||!1)&&i.createElement("div",{className:l(Me.group,Me.lastGroup),style:c},!1,this._features.tools&&this._features.favoriting&&i.createElement(he,{id:ue.FavoriteDrawings}),m()&&i.createElement(L,{id:ue.ObjectTree,action:()=>this._activeChartWidget().showObjectsTreeDialog(),toolName:"showObjectsTree"})))),d))))))}_activeChartWidget(){return this.props.chartWidgetCollection.activeChartWidget.value()}_negotiateResizer(){const e=ge.a;this.props.resizerBridge.negotiateWidth(this.state.isVisible?ge.b:e)}_handleGlobalClose(){je.fire()}_updateHotkeys(){this._hotkeys.promote()}_initHotkeys(){this._hotkeys=O.createGroup({desc:"Drawing Toolbar"}),this._hotkeys.add({desc:"Reset",hotkey:27,handler:()=>this._handleEsc(),isDisabled:()=>u.toolIsCursor(u.tool.value())})}}o.d(t,"DrawingToolbarRenderer",(function(){return Ue}));class Ue{constructor(e,t){this._component=null,this._handleRef=e=>{this._component=e},this._container=e,s.render(i.createElement(We,Object.assign({},t,{ref:this._handleRef})),this._container)}destroy(){s.unmountComponentAtNode(this._container)}getComponent(){return Object(a.ensureNotNull)(this._component)}}},"85c9":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="19" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.103.687a1 1 0 0 1 1.794 0l2.374 4.81 5.309.772a1 1 0 0 1 .554 1.706l-3.841 3.745.906 5.287a1 1 0 0 1-1.45 1.054L10 15.565 5.252 18.06A1 1 0 0 1 3.8 17.007l.907-5.287L.866 7.975a1 1 0 0 1 .554-1.706l5.31-.771L9.102.688zM10 1.13L7.393 6.412l-5.829.847 4.218 4.111-.996 5.806L10 14.436l5.214 2.74-.996-5.805 4.218-4.112-5.83-.847L10 1.13z"/></svg>'},"8d0Q":function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"a",(function(){return s}));var i=o("q1tI");function n(){const[e,t]=Object(i.useState)(!1);return[e,{onMouseOver:function(e){s(e)&&t(!0)},onMouseOut:function(e){s(e)&&t(!1)}}]}function s(e){return!e.currentTarget.contains(e.relatedTarget)}},"9dlw":function(e,t,o){"use strict";o.d(t,"a",(function(){return u}));var i=o("mrSG"),n=o("q1tI"),s=o.n(n),a=o("i8i4"),r=o.n(a),l=(o("EsMY"),o("AiMB")),c=o("DTHj"),d=o("X0gx"),h=o("8Rai");function u(e){const{controller:t,children:o,isOpened:a,closeOnClickOutside:u=!0,doNotCloseOn:m,onClickOutside:b,onClose:p}=e,g=Object(i.a)(e,["controller","children","isOpened","closeOnClickOutside","doNotCloseOn","onClickOutside","onClose"]),v=Object(n.useContext)(d.a),w=Object(h.a)({handler:function(e){if(b&&b(e),u){if(m&&e.target instanceof Node){const t=r.a.findDOMNode(m);if(t instanceof Node&&t.contains(e.target))return}p()}},mouseDown:!0,touchStart:!0});return a?s.a.createElement(l.a,{top:"0",left:"0",right:"0",bottom:"0",pointerEvents:"none"},s.a.createElement("span",{ref:w,style:{pointerEvents:"auto"}},s.a.createElement(c.b,Object.assign({},g,{isOpened:a,onClose:p,onScroll:function(t){const{onScroll:o}=e;o&&o(t),t.stopPropagation()},customCloseDelegate:v,ref:t}),o))):null}},ASyk:function(e,t,o){e.exports={"tablet-normal-breakpoint":"screen and (max-width: 768px)","small-height-breakpoint":"screen and (max-height: 360px)","tablet-small-breakpoint":"screen and (max-width: 428px)"}},EA32:function(e,t,o){e.exports={wrap:"wrap-2qy9YC6D",smallTablet:"smallTablet-2qy9YC6D",buttonIcon:"buttonIcon-2qy9YC6D",item:"item-2qy9YC6D",hovered:"hovered-2qy9YC6D",active:"active-2qy9YC6D",title:"title-2qy9YC6D",separator:"separator-2qy9YC6D",button:"button-2qy9YC6D"}},EKk7:function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return l}));var i=o("q1tI"),n=o("TSYQ"),s=o("XAms"),a=o("Wz44");const r=a;function l(e){const{direction:t,theme:o=a}=e;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"9",height:"27",viewBox:"0 0 9 27",className:n(o.container,"right"===t?o.mirror:null),onContextMenu:s.a},i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("path",{className:o.background,d:"M4.5.5a4 4 0 0 1 4 4v18a4 4 0 1 1-8 0v-18a4 4 0 0 1 4-4z"}),i.createElement("path",{className:o.arrow,d:"M5.5 10l-2 3.5 2 3.5"})))}},FTBN:function(e,t,o){e.exports={item:"item-3NgvBqLJ",label:"label-3NgvBqLJ"}},HD8h:function(e,t,o){e.exports={item:"item-21ifTYt7",label:"label-21ifTYt7",labelRow:"labelRow-21ifTYt7",toolbox:"toolbox-21ifTYt7"}},JQKp:function(e,t,o){e.exports={drawingToolbar:"drawingToolbar-2_so5thS",isHidden:"isHidden-2_so5thS",inner:"inner-2_so5thS",popupMenuItem:"popupMenuItem-2_so5thS",group:"group-2_so5thS",noGroupPadding:"noGroupPadding-2_so5thS",lastGroup:"lastGroup-2_so5thS",fill:"fill-2_so5thS",separator:"separator-2_so5thS"}},KKsp:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var i=o("q1tI"),n=o("TSYQ"),s=o.n(n),a=o("NOPy");function r(e){const{size:t="normal",className:o}=e;return i.createElement("div",{className:s()(a.separator,"small"===t&&a.small,"normal"===t&&a.normal,"large"===t&&a.large,o)})}},KmEK:function(e,t,o){e.exports={dropdown:"dropdown-191zO2Od",buttonWrap:"buttonWrap-191zO2Od",control:"control-191zO2Od",arrow:"arrow-191zO2Od",arrowIcon:"arrowIcon-191zO2Od",isOpened:"isOpened-191zO2Od",hover:"hover-191zO2Od",isGrayed:"isGrayed-191zO2Od"}},N5tr:function(e,t,o){"use strict";o.d(t,"a",(function(){return h})),o.d(t,"b",(function(){return b}));var i=o("mrSG"),n=o("q1tI"),s=o.n(n),a=o("TSYQ"),r=o("tWVy"),l=o("JWMC"),c=o("ijHL"),d=o("v1bN");const h=d;function u(e){const{reference:t}=e,o=Object(i.a)(e,["reference"]),n=Object.assign(Object.assign({},o),{ref:t});return s.a.createElement(e.href?"a":"div",n)}function m(e){e.stopPropagation()}function b(e){const{id:t,role:o,"aria-selected":i,className:h,title:b,labelRowClassName:p,labelClassName:g,shortcut:v,forceShowShortcuts:w,icon:f,isActive:_,isDisabled:T,isHovered:C,appearAsDisabled:y,label:S,link:k,showToolboxOnHover:O,target:E,toolbox:D,reference:L,onMouseOut:M,onMouseOver:N,theme:A=d}=e,j=Object(c.b)(e),x=Object(n.useRef)(null);return s.a.createElement(u,Object.assign({},j,{id:t,role:o,"aria-selected":i,className:a(h,A.item,f&&A.withIcon,{[A.isActive]:_,[A.isDisabled]:T||y,[A.hovered]:C}),title:b,href:k,target:E,reference:function(e){x.current=e,"function"==typeof L&&L(e),"object"==typeof L&&(L.current=e)},onClick:function(t){const{dontClosePopup:o,onClick:i,onClickArg:n,trackEventObject:s}=e;T||(s&&Object(l.trackEvent)(s.category,s.event,s.label),i&&i(n,t),o||Object(r.b)())},onContextMenu:function(t){const{trackEventObject:o,trackRightClick:i}=e;o&&i&&Object(l.trackEvent)(o.category,o.event,o.label+"_rightClick")},onMouseUp:function(t){const{trackEventObject:o,trackMouseWheelClick:i}=e;if(1===t.button&&k&&o){let e=o.label;i&&(e+="_mouseWheelClick"),Object(l.trackEvent)(o.category,o.event,e)}},onMouseOver:N,onMouseOut:M}),void 0!==f&&s.a.createElement("div",{className:A.icon,dangerouslySetInnerHTML:{__html:f}}),s.a.createElement("div",{className:a(A.labelRow,p)},s.a.createElement("div",{className:a(A.label,g)},S)),(void 0!==v||w)&&s.a.createElement("div",{className:A.shortcut},(B=v)&&B.split("+").join(" + ")),void 0!==D&&s.a.createElement("div",{onClick:m,className:a(A.toolbox,{[A.showOnHover]:O})},D));var B}},NOPy:function(e,t,o){e.exports={separator:"separator-eqcGT_ow",small:"small-eqcGT_ow",normal:"normal-eqcGT_ow",large:"large-eqcGT_ow"}},R5JZ:function(e,t,o){"use strict";function i(e,t,o,i,n){function s(n){if(e>n.timeStamp)return;const s=n.target;void 0!==o&&null!==t&&null!==s&&s.ownerDocument===i&&(t.contains(s)||o(n))}return n.click&&i.addEventListener("click",s,!1),n.mouseDown&&i.addEventListener("mousedown",s,!1),n.touchEnd&&i.addEventListener("touchend",s,!1),n.touchStart&&i.addEventListener("touchstart",s,!1),()=>{i.removeEventListener("click",s,!1),i.removeEventListener("mousedown",s,!1),i.removeEventListener("touchend",s,!1),i.removeEventListener("touchstart",s,!1)}}o.d(t,"a",(function(){return i}))},Sn4D:function(e,t,o){"use strict";o.d(t,"a",(function(){return b}));var i=o("q1tI"),n=o.n(i),s=o("Eyy1"),a=o("TSYQ"),r=o("x0D+"),l=o("Nkvk"),c=o("AiMB"),d=o("mkWe"),h=o("qFKp"),u=o("X0gx"),m=o("sHQ4");function b(e){const{position:t,onClose:o,children:b,className:p,theme:g=m}=e,v=Object(s.ensureNotNull)(Object(i.useContext)(d.a)),[w,f]=Object(i.useState)(0),_=Object(i.useRef)(null),T=Object(i.useContext)(u.a);return Object(i.useEffect)((()=>{var e;return null===(e=_.current)||void 0===e||e.focus({preventScroll:!0}),T.subscribe(v,o),Object(l.setFixedBodyState)(!0),h.CheckMobile.iOS()&&Object(r.disableBodyScroll)(Object(s.ensureNotNull)(_.current)),f(v.addDrawer()),()=>{T.unsubscribe(v,o);const e=v.removeDrawer();h.CheckMobile.iOS()&&Object(r.enableBodyScroll)(Object(s.ensureNotNull)(_.current)),0===e&&Object(l.setFixedBodyState)(!1)}}),[]),n.a.createElement(c.a,null,n.a.createElement("div",{className:a(m.wrap,m["position"+t])},w===v.currentDrawer&&n.a.createElement("div",{className:m.backdrop,onClick:o}),n.a.createElement("div",{className:a(m.drawer,g.drawer,m["position"+t],p),ref:function(e){_.current=e},tabIndex:-1,onScroll:function(e){e.stopPropagation()},"data-name":e["data-name"]},b)))}},Vike:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 10" width="20" height="10"><path fill="none" stroke="currentColor" stroke-width="1.5" d="M2 1l8 8 8-8"/></svg>'},Wz44:function(e,t,o){e.exports={container:"container-3CL4Geq2",mirror:"mirror-3CL4Geq2",background:"background-3CL4Geq2",arrow:"arrow-3CL4Geq2"}},XfUw:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path stroke="currentColor" d="M9 2.13l1.903 3.855.116.236.26.038 4.255.618-3.079 3.001-.188.184.044.259.727 4.237-3.805-2L9 12.434l-.233.122-3.805 2.001.727-4.237.044-.26-.188-.183-3.079-3.001 4.255-.618.26-.038.116-.236L9 2.13z"/></svg>'},dhVi:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var i=o("nPPD"),n=o("v1bN"),s=o("HD8h");const a=Object(i.a)(n,s)},fEjm:function(e,t,o){e.exports={favorite:"favorite-I_fAY9V2",disabled:"disabled-I_fAY9V2",active:"active-I_fAY9V2",checked:"checked-I_fAY9V2"}},ijHL:function(e,t,o){"use strict";function i(e){return s(e,a)}function n(e){return s(e,r)}function s(e,t){const o=Object.entries(e).filter(t),i={};for(const[e,t]of o)i[e]=t;return i}function a(e){const[t,o]=e;return 0===t.indexOf("data-")&&"string"==typeof o}function r(e){return 0===e[0].indexOf("aria-")}o.d(t,"b",(function(){return i})),o.d(t,"a",(function(){return n}))},mkWe:function(e,t,o){"use strict";o.d(t,"b",(function(){return s})),o.d(t,"a",(function(){return a}));var i=o("q1tI"),n=o.n(i);class s extends n.a.PureComponent{constructor(e){super(e),this._addDrawer=()=>{const e=this.state.currentDrawer+1;return this.setState({currentDrawer:e}),e},this._removeDrawer=()=>{const e=this.state.currentDrawer-1;return this.setState({currentDrawer:e}),e},this.state={currentDrawer:0}}render(){return n.a.createElement(a.Provider,{value:{addDrawer:this._addDrawer,removeDrawer:this._removeDrawer,currentDrawer:this.state.currentDrawer}},this.props.children)}}const a=n.a.createContext(null)},pr86:function(e,t,o){"use strict";o.d(t,"a",(function(){return h}));var i=o("mrSG"),n=(o("YFKU"),o("q1tI")),s=o("TSYQ"),a=o("Iivm"),r=o("sg5d"),l=o("XfUw"),c=o("fEjm");const d={add:window.t("Add to favorites"),remove:window.t("Remove from favorites")};function h(e){const{className:t,isFilled:o,isActive:h,onClick:u}=e,m=Object(i.a)(e,["className","isFilled","isActive","onClick"]);return n.createElement(a.a,Object.assign({},m,{className:s(c.favorite,"apply-common-tooltip",o&&c.checked,h&&c.active,t),icon:o?r:l,onClick:u,title:o?d.remove:d.add}))}},sHQ4:function(e,t,o){e.exports={wrap:"wrap-164vy-kj",positionBottom:"positionBottom-164vy-kj",backdrop:"backdrop-164vy-kj",drawer:"drawer-164vy-kj",positionLeft:"positionLeft-164vy-kj"}},sg5d:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path fill="currentColor" d="M9 1l2.35 4.76 5.26.77-3.8 3.7.9 5.24L9 13l-4.7 2.47.9-5.23-3.8-3.71 5.25-.77L9 1z"/></svg>'},uJ8n:function(e,t,o){e.exports={wrap:"wrap-379NmUSU",scrollWrap:"scrollWrap-379NmUSU",noScrollBar:"noScrollBar-379NmUSU",content:"content-379NmUSU",icon:"icon-379NmUSU",scrollBot:"scrollBot-379NmUSU",scrollTop:"scrollTop-379NmUSU",isVisible:"isVisible-379NmUSU",iconWrap:"iconWrap-379NmUSU",fadeBot:"fadeBot-379NmUSU",fadeTop:"fadeTop-379NmUSU"}},uhCe:function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var i=o("ASyk");const n={SmallHeight:i["small-height-breakpoint"],TabletSmall:i["tablet-small-breakpoint"],TabletNormal:i["tablet-normal-breakpoint"]}},v1bN:function(e,t,o){e.exports={"tablet-small-breakpoint":"screen and (max-width: 428px)",item:"item-2IihgTnv",hovered:"hovered-2IihgTnv",isDisabled:"isDisabled-2IihgTnv",isActive:"isActive-2IihgTnv",shortcut:"shortcut-2IihgTnv",toolbox:"toolbox-2IihgTnv",withIcon:"withIcon-2IihgTnv",icon:"icon-2IihgTnv",labelRow:"labelRow-2IihgTnv",label:"label-2IihgTnv",showOnHover:"showOnHover-2IihgTnv"}},"x0D+":function(e,t,o){var i,n;void 0===(n="function"==typeof(i=function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var o=!1;if("undefined"!=typeof window){var i={get passive(){o=!0}};window.addEventListener("testPassive",null,i),window.removeEventListener("testPassive",null,i)}var n="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),s=[],a=!1,r=-1,l=void 0,c=void 0,d=function(e){return s.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},h=function(e){var t=e||window.event;return!!d(t.target)||1<t.touches.length||(t.preventDefault&&t.preventDefault(),!1)},u=function(){setTimeout((function(){void 0!==c&&(document.body.style.paddingRight=c,c=void 0),void 0!==l&&(document.body.style.overflow=l,l=void 0)}))};e.disableBodyScroll=function(e,i){if(n){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!s.some((function(t){return t.targetElement===e}))){var u={targetElement:e,options:i||{}};s=[].concat(t(s),[u]),e.ontouchstart=function(e){1===e.targetTouches.length&&(r=e.targetTouches[0].clientY)},e.ontouchmove=function(t){var o,i,n,s;1===t.targetTouches.length&&(i=e,s=(o=t).targetTouches[0].clientY-r,!d(o.target)&&(i&&0===i.scrollTop&&0<s||(n=i)&&n.scrollHeight-n.scrollTop<=n.clientHeight&&s<0?h(o):o.stopPropagation()))},a||(document.addEventListener("touchmove",h,o?{passive:!1}:void 0),a=!0)}}else{b=i,setTimeout((function(){if(void 0===c){var e=!!b&&!0===b.reserveScrollBarGap,t=window.innerWidth-document.documentElement.clientWidth;e&&0<t&&(c=document.body.style.paddingRight,document.body.style.paddingRight=t+"px")}void 0===l&&(l=document.body.style.overflow,document.body.style.overflow="hidden")}));var m={targetElement:e,options:i||{}};s=[].concat(t(s),[m])}var b},e.clearAllBodyScrollLocks=function(){n?(s.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),a&&(document.removeEventListener("touchmove",h,o?{passive:!1}:void 0),a=!1),s=[],r=-1):(u(),s=[])},e.enableBodyScroll=function(e){if(n){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,s=s.filter((function(t){return t.targetElement!==e})),a&&0===s.length&&(document.removeEventListener("touchmove",h,o?{passive:!1}:void 0),a=!1)}else 1===s.length&&s[0].targetElement===e?(u(),s=[]):s=s.filter((function(t){return t.targetElement!==e}))}})?i.apply(t,[t]):i)||(e.exports=n)},ybOa:function(e,t,o){e.exports={toggleButton:"toggleButton-3zv4iS2j",collapsed:"collapsed-3zv4iS2j",background:"background-3zv4iS2j",arrow:"arrow-3zv4iS2j"}}}]);