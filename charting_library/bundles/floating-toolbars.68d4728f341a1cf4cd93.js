(window.webpackJsonp=window.webpackJsonp||[]).push([["floating-toolbars"],{"+KIV":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path stroke="currentColor" d="M8 9.5H6.5a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1V20m-8-1.5h11a1 1 0 0 0 1-1v-11a1 1 0 0 0-1-1h-11a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1z"/></svg>'},"+l/S":function(t,e,o){},"/yp2":function(t,e,o){"use strict";o.r(e),o.d(e,"getTemplates",(function(){return n})),o.d(e,"setTemplates",(function(){return s})),o.d(e,"addTemplate",(function(){return r})),o.d(e,"startRemoveTemplate",(function(){return a})),o.d(e,"removeTemplate",(function(){return l})),o.d(e,"saveTemplate",(function(){return c})),o.d(e,"loadTemplate",(function(){return d})),o.d(e,"applyDefaults",(function(){return u}));var i=o("7/Mh");function n(t,e){return{type:i.c,toolName:t,callback:e}}function s(t,e){return{type:i.g,templates:e,toolName:t}}function r(t,e){return{type:i.a,templateName:e,toolName:t}}function a(t,e){return{type:i.h,templateName:e,toolName:t}}function l(t,e){return{type:i.e,templateName:e,toolName:t}}function c(t,e,o){return{type:i.f,templateName:e,toolName:t,content:o}}function d(t,e,o){return{type:i.d,toolName:t,templateName:e,callback:o}}function u(t,e){return{type:i.b,model:t,source:e}}},"0ZwQ":function(t,e,o){"use strict";var i=o("P5fv"),n=o.n(i),s=(o("EsMY"),o("Eyy1"),o("9uLv")),r=o("Vdly"),a=o("aIyQ"),l=o.n(a),c=o("hY0g"),d=o.n(c),u=o("A6WY"),h=o("cZRT");class p extends h.a{_startLoading(){return o.e("hammerjs").then(o.bind(null,"be1f")).then(t=>t.HammerJS)}}o("qFKp");var g=o("VVxS"),m=o("qAO1");o("PwLo");o.d(e,"a",(function(){return v})),o.d(e,"b",(function(){return w}));function _(){return window.innerWidth}function b(){return window.innerHeight}const v="floating-toolbar-react-widgets",f='<div class="tv-floating-toolbar i-closed i-hidden">'+(Modernizr.mobiletouch?'<div class="tv-floating-toolbar__drag-ext js-drag"></div>':"")+'<div class="tv-floating-toolbar__widget-wrapper">'+`<div class="tv-floating-toolbar__drag js-drag">${m}</div><div class="tv-floating-toolbar__content js-content"></div>`+`<div class="${v}"></div></div></div>`;class w{constructor(t){this._widget=document.createElement("div"),this._isVertical=!1,this._hiddingTimeoutId=null,this._visibility=new d.a(!1),this._windowResizeListener=this._onWindowResize.bind(this),this._reorderedDelegate=new l.a,this._responsiveResizeFunction=null,this._showTimeStamp=null,this._preventClickUntilAnimation=t=>{null!==this._showTimeStamp&&performance.now()-this._showTimeStamp<this.hideDuration()&&t.stopPropagation()},w._toolbars.push(this),this._options=t,this._widget=n()(f).get(0),this._content=this._widget.getElementsByClassName("js-content").item(0),this._reactWidgetsContainer=this._widget.getElementsByClassName(v).item(0),this._setZIndex(w._startZIndex+w._toolbars.length-1),this._options.addClass&&(this._widget.className+=" "+this._options.addClass),this._options["data-name"]&&(this._widget.dataset.name=this._options["data-name"]),
this._options.layout&&"auto"!==this._options.layout&&(this._isVertical="vertical"===this._options.layout,this._updateLayoutType(),this._updateAxisOption()),this._widget.addEventListener("click",this._preventClickUntilAnimation,!0)}destroy(){this.hide(!0),w._toolbars.splice(w._toolbars.indexOf(this),1),this._widget.removeEventListener("click",this._preventClickUntilAnimation,!0),document.body.contains(this._widget)&&document.body.removeChild(this._widget),this._widget.innerHTML="",this._responsiveResizeFunction=null}setResponsiveResizeFunc(t){this._responsiveResizeFunction=t}isVisible(){return this._visibility.value()}visibility(){return this._visibility.readonly()}isVertical(){return this._isVertical}show(){this.isVisible()||(document.body.contains(this._widget)||(this._init(),document.body.appendChild(this._widget)),this._setHiddingTimeout(null),window.addEventListener("resize",this._windowResizeListener),this.raise(),this._visibility.setValue(!0),this._showTimeStamp=performance.now(),this._widget.classList.contains("i-hidden")?(this._widget.classList.remove("i-hidden"),setTimeout(()=>{this.isVisible()&&this._widget.classList.remove("i-closed")})):this._widget.classList.remove("i-closed"),this._onWindowResize())}hide(t=!1){if(!this.isVisible())return;const e=this._widget.classList.contains("i-closed");if(this._widget.classList.add("i-closed"),this._visibility.setValue(!1),t||e)this._setHiddingTimeout(null),this._widget.classList.add("i-hidden");else{const t=setTimeout(()=>{this._setHiddingTimeout(null),this._widget.classList.add("i-hidden")},this.hideDuration());this._setHiddingTimeout(t)}window.removeEventListener("resize",this._windowResizeListener)}raise(){w._toolbars.length+w._startZIndex!==this._zIndex()&&(w._toolbars.splice(w._toolbars.indexOf(this),1),w._toolbars.push(this),w._updateAllZIndexes())}hideDuration(){return.75*s.dur}addWidget(t,e={}){const o=this.widgetsCount();if(void 0===e.index&&(e.index=o),e.index<0||e.index>o)throw new Error(`Index must be in [0, ${o}]`);const i=document.createElement("div");i.className="tv-floating-toolbar__widget js-widget",i.appendChild(t);const n=e.index===o?null:this._content.childNodes.item(e.index);this._content.insertBefore(i,n),this._onWindowResize()}getReactWidgetContainer(){return this._reactWidgetsContainer}removeWidget(t){const e=this._findWrapperForWidget(t);e&&(this._content.removeChild(e),this._onWindowResize())}widgetsCount(){return this._content.childNodes.length}showWidget(t){const e=this._findWrapperForWidget(t);e&&e.classList.remove("i-hidden")}hideWidget(t){const e=this._findWrapperForWidget(t);e&&e.classList.add("i-hidden")}removeWidgets(){for(;this._content.firstChild;)this._content.removeChild(this._content.firstChild);this._onWindowResize()}onWidgetsReordered(){return this._reorderedDelegate}onContextMenu(t){if(Modernizr.mobiletouch){(new p).load().then(e=>{const o=new e(this._widget);o.get("press").set({time:500}),o.on("press",e=>{this._preventWidgetTouchEndEvent(),t(e.srcEvent)})})}else this._widget.addEventListener("contextmenu",t)}
checkPosition(){const t=this._getCorrectedWidgetRect(),e={left:t.left,top:t.top};this._correctPosition(e),t.left===e.left&&t.top===e.top||(this._widget.style.left=e.left+"px",this._widget.style.top=e.top+"px")}_determineCurrentLayoutVertical(t){const e=this._isVertical?t.height:t.width;return _()<e}_getWidget(){return this._widget}_findWrapperForWidget(t){const e=this._content.getElementsByClassName("js-widget");for(let o=0;o<e.length;++o){const i=e.item(o);if(i.contains(t))return i}return null}_onVerticalChanged(t,e){}_setHiddingTimeout(t){null!==this._hiddingTimeoutId&&clearTimeout(this._hiddingTimeoutId),this._hiddingTimeoutId=t}_preventWidgetTouchEndEvent(){const t=e=>{e.preventDefault(),this._widget.removeEventListener("touchend",t)};this._widget.addEventListener("touchend",t)}_updateLayoutType(){this._widget.classList.toggle("i-vertical",this._isVertical)}_updateAxisOption(){if(this._options.dragOnlyInsideToolbar){const t=this._isVertical?"y":"x";Object(u.lazyJqueryUI)(n()(this._content)).sortable("option","axis",t)}}_onWindowResize(){if("auto"===(this._options.layout||"auto")){const t=this._isVertical,e=this._getCorrectedWidgetRect();this._isVertical=this._determineCurrentLayoutVertical(e),this._updateLayoutType(),t!==this._isVertical&&(this._onVerticalChanged(this._isVertical,t),this._updateAxisOption())}this.checkPosition(),this._resizeResponsive()}_resizeResponsive(){if(null===this._responsiveResizeFunction)return;let t=this._options.layout||"auto";"auto"===t&&(t=this._isVertical?"vertical":"horizontal");const e="vertical"===t?this._widget.clientHeight:this._widget.clientWidth,o=("vertical"===t?b():_())-e;this._responsiveResizeFunction(e,o,t)}_correctPosition(t){const e=this._getCorrectedWidgetRect();t.left+e.width>_()&&(t.left=Math.max(0,_()-e.width)),t.top+e.height>b()&&(t.top=Math.max(0,b()-e.height)),t.left=Math.max(0,t.left),t.top=Math.max(0,t.top)}_setZIndex(t){this._widget.style.zIndex=String(t)}_zIndex(){return Number(this._widget.style.zIndex)}_loadPosition(){let t;if("device"===this._options.positionStorageType){const e=g.TVLocalStorage.getItem(this._options.positionSettingsKey);t=null!==e?JSON.parse(e):this._options.defaultPosition}else t=Object(r.getJSON)(this._options.positionSettingsKey,this._options.defaultPosition);this._widget.style.left=Math.round(t.left)+"px",this._widget.style.top=Math.round(t.top)+"px",this._onWindowResize()}_savePosition(){const t=this._widget.getBoundingClientRect();if("device"===this._options.positionStorageType)try{g.TVLocalStorage.setItem(this._options.positionSettingsKey,JSON.stringify({left:t.left,top:t.top}))}catch(e){}else Object(r.setJSON)(this._options.positionSettingsKey,{left:t.left,top:t.top})}_init(){this._loadPosition(),Object(u.lazyJqueryUI)(n()(this._widget)).draggable({containment:"window",drag:this._onDragEvent.bind(this),handle:".js-drag",stop:this._savePosition.bind(this)}),this._options.allowSortable&&this._initSortable(),this._widget.addEventListener(Modernizr.mobiletouch?"touchstart":"mousedown",this.raise.bind(this))}_onDragEvent(t,e){
this._correctPosition(e.position)}_initSortable(){let t=-1;Object(u.lazyJqueryUI)(n()(this._content)).sortable({start:(e,o)=>{t=o.item.index()},stop:(e,o)=>{const i=o.item.index();t!==i&&this._reorderedDelegate.fire(t,i)},tolerance:"pointer",distance:5,containment:!!this._options.dragOnlyInsideToolbar&&"parent",scroll:!1,placeholder:"sortable-placeholder",forcePlaceholderSize:!0}),this._updateAxisOption()}_getCorrectedWidgetRect(){const t=this._widget.getBoundingClientRect();if(this._widget.classList.contains("i-closed")){const e=1/.925-1,o=t.width*e,i=t.height*e;return{bottom:t.bottom+i/2,height:t.height+i,left:t.left-o/2,right:t.right+o/2,top:t.top-i/2,width:t.width+o}}return t}static _updateAllZIndexes(){w._toolbars.forEach((t,e)=>{t._setZIndex(w._startZIndex+e)})}}w._startZIndex=20,w._toolbars=[]},"0fuu":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" fill="none"><path stroke="currentColor" d="M13.5 6.5l-3-3-7 7 7.59 7.59a2 2 0 0 0 2.82 0l4.18-4.18a2 2 0 0 0 0-2.82L13.5 6.5zm0 0v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v6"/><path fill="currentColor" d="M0 16.5C0 15 2.5 12 2.5 12S5 15 5 16.5 4 19 2.5 19 0 18 0 16.5z"/><circle fill="currentColor" cx="9.5" cy="9.5" r="1.5"/></svg>'},"2A9e":function(t){t.exports=JSON.parse('{"button":"button-1iktpaT1","content":"content-2PGssb8d","noOutline":"noOutline-d9Yp4qvi","appearance-default":"appearance-default-dMjF_2Hu","intent-primary":"intent-primary-1-IOYcbg","intent-success":"intent-success-25a4XZXM","intent-default":"intent-default-2ZbSqQDs","intent-warning":"intent-warning-24j5HMi0","intent-danger":"intent-danger-1EETHCla","appearance-stroke":"appearance-stroke-12lxiUSM","appearance-text":"appearance-text-DqKJVT3U","appearance-inverse":"appearance-inverse-r1Y2JQg_","size-s":"size-s-3mait84m","size-m":"size-m-2G7L7Qat","size-l":"size-l-2NEs9_xt","size-p":"size-p-3D4rn3v0","full-width":"full-width-1wU8ljjC","with-icon":"with-icon-yumghDr-","icon":"icon-1grlgNdV"}')},"2F1E":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 4" width="18" height="4"><rect width="18" height="4" fill="currentColor" rx="2"/></svg>'},"39J6":function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));var i=o("q1tI"),n=o("6KyJ"),s=o("Oy6E");function r(t){return i.createElement("div",{className:s.spinnerWrap},i.createElement(n.a,null))}},"5hRh":function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));var i=o("q1tI");const n=t=>{const[e,o]=Object(i.useState)(t.value());return Object(i.useEffect)(()=>{const e=t=>{o(t.value())};e(t);const i={};return t.subscribe(i,e),()=>t.unsubscribe(i,e)},[t]),e}},"7/Mh":function(t,e,o){"use strict";function i(t){return"LINE_TOOL_TEMPLATE__"+t}o.d(e,"c",(function(){return n})),o.d(e,"g",(function(){return s})),o.d(e,"h",(function(){return r})),o.d(e,"e",(function(){return a})),o.d(e,"f",(function(){return l})),o.d(e,"a",(function(){return c})),o.d(e,"d",(function(){return d})),o.d(e,"b",(function(){return u}))
;const n=i("GET_TEMPLATES"),s=i("SET_TEMPLATES"),r=i("START_REMOVE_TEMPLATE"),a=i("REMOVE_TEMPLATE"),l=i("SAVE_TEMPLATE"),c=i("ADD_TEMPLATE"),d=i("LOAD_TEMPLATE"),u=i("APPLY_DEFAULTS")},ADFN:function(t,e,o){},C7ts:function(t,e,o){"use strict";o.r(e),o.d(e,"TemplateButton",(function(){return _}));var i=o("mrSG"),n=o("q1tI"),s=o.n(n),r=o("Iivm"),a=o("YFKU"),l=o("JWMC"),c=o("2uTr"),d=o("82wv"),u=o("IAAr"),h=o("7KDR"),p=o("L/Ed"),g=o("39J6"),m=o("R1RK");function _(t){const{model:e,onRestore:o,onSave:_,isDrawingFinished:b,className:v}=t,f=Object(i.a)(t,["model","onRestore","onSave","isDrawingFinished","className"]),[w,y]=Object(n.useState)(!1),[C,x]=Object(n.useState)(null),W=Object(n.useCallback)(()=>{const t=JSON.stringify(_());e.showSaveDialog((function(o){e.saveTemplate(o,t)}))},[e,_]),T=Object(n.useMemo)(()=>{const t=[];return b&&t.push(new h.Action({label:Object(c.appendEllipsis)(Object(a.t)("Save Drawing Template As")),onExecute:W})),t.push(new h.Action({label:Object(a.t)("Apply Default Drawing Template"),onExecute:o})),w?t.push(new h.Action({label:s.a.createElement(g.a,null),fullWidthLabel:!0})):!w&&(null==C?void 0:C.length)&&(t.push(new h.Separator),t.push(...C.map(t=>new h.Action({label:t,onExecute:()=>function(t){void 0!==t&&e.loadTemplate(t)}(t),showToolboxOnHover:!0,toolbox:{type:p.ToolboxType.Delete,action:()=>e.deleteAction(t)}})))),t},[_,o,C,e,b,w]);return s.a.createElement(d.b,Object.assign({title:Object(a.t)("Templates"),content:s.a.createElement(r.a,{icon:m}),onOpen:function(){y(!0),e.templatesLoaded().then(()=>{const t=e.getData();x(t),y(!1)}),Object(l.trackEvent)("GUI","Context action on drawings","Templates")},arrow:!1,className:v,"data-name":"templates",menuDataName:"templates-menu"},f),s.a.createElement(u.a,{items:T}))}},EvtC:function(t,e,o){t.exports={button:"button-2YcRd2gv"}},HWhk:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path fill="currentColor" fillRule="evenodd" clipRule="evenodd" d="M7.5 13a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM5 14.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0zm9.5-1.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM12 14.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0zm9.5-1.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM19 14.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0z"/></svg>'},IhRv:function(t,e,o){"use strict";o.r(e),o.d(e,"ColorPickerButton",(function(){return b}));var i=o("q1tI"),n=o.n(i),s=o("TSYQ"),r=o.n(s),a=o("Eyy1"),l=o("Iivm"),c=o("eJTA"),d=o("Tmoa"),u=o("V3OP"),h=o("htM8"),p=o("wLjq"),g=o("82wv"),m=o("5hRh"),_=o("X1vi");function b(t){const{property:e,icon:o,model:s,title:b,className:v}=t,f=Object(m.a)(e),w=Object(i.useRef)(null),y=f?Object(c.parseRgba)(f)[3]:void 0,C=""===f,x=String(S()).toLowerCase()===p.c,[W,T,P]=Object(u.a)();return n.a.createElement(g.b,{className:v,content:n.a.createElement("div",{className:_.wrap},n.a.createElement(l.a,{className:_.icon,icon:o}),n.a.createElement("div",{className:_.colorBg},n.a.createElement("div",{className:r()(_.color,C&&_.multicolor,x&&_.white),style:C?void 0:{backgroundColor:f}}))),arrow:!1,title:b,
ref:w,"data-name":t["data-name"],menuDataName:t["data-name"]+"-menu"},n.a.createElement(h.a,{color:S(),opacity:y,onColorChange:function(t,e){const o=f?Object(d.alphaToTransparency)(Object(c.parseRgba)(f)[3]):0;E(Object(d["generateColor"])(String(t),o,true)),e||Object(a.ensureNotNull)(w.current).close()},onOpacityChange:function(t){E(Object(d.generateColor)(f,Object(d.alphaToTransparency)(t),!0))},selectOpacity:void 0!==y,selectCustom:!0,customColors:W,onAddColor:function(t){T(t),Object(a.ensureNotNull)(w.current).close()},onRemoveCustomColor:P}));function S(){return f?Object(c.rgbToHexString)(Object(c.parseRgb)(f)):null}function E(t){s.setProperty(e,t,b)}}},"LC+v":function(t,e,o){"use strict";o.r(e);var i=o("ANjH"),n=o("rRWa"),s=o("5rFJ"),r=o("7/Mh"),a=o("txPx"),l=o("/yp2");function c(t,e){return e}var d=o("zUrt");const u=Object(a.getLogger)("Chart.LineToolTemplatesList");function h(t,e){return e}function*p(){for(;;){const{toolName:e,templateName:o,content:i}=h(r.f,yield Object(s.g)(r.f));try{yield Object(s.b)(d.backend.saveDrawingTemplate,e,o,i),yield Object(s.e)(Object(l.addTemplate)(e,o))}catch(t){u.logWarn(t)}}}function*g(){for(;;){const{toolName:e,templateName:o}=h(r.h,yield Object(s.g)(r.h));try{yield Object(s.b)(d.backend.removeDrawingTemplate,e,o),yield Object(s.e)(Object(l.removeTemplate)(e,o))}catch(t){u.logWarn(t)}}}function*m(){for(;;){const{toolName:e,callback:o}=h(r.c,yield Object(s.g)(r.c));try{const t=c(d.backend.getDrawingTemplates,yield Object(s.b)(d.backend.getDrawingTemplates,e));yield Object(s.e)(Object(l.setTemplates)(e,t)),o&&o()}catch(t){u.logWarn(t)}}}function*_(){for(;;){const{toolName:e,templateName:o,callback:i}=h(r.d,yield Object(s.g)(r.d));try{const t=c(d.backend.loadDrawingTemplate,yield Object(s.b)(d.backend.loadDrawingTemplate,e,o));i&&i(t)}catch(t){u.logWarn(t)}}}function*b(){for(;;){const{model:e,source:o}=h(r.b,yield Object(s.g)(r.b));try{yield Object(s.b)([e,e.restorePropertiesForSource],o)}catch(t){u.logWarn(t)}}}function*v(){yield Object(s.a)([Object(s.b)(m),Object(s.b)(p),Object(s.b)(g),Object(s.b)(_),Object(s.b)(b)])}const f={templates:{}};function w(t,e){return t.localeCompare(e,void 0,{numeric:!0})}function y(t=f,e){switch(e.type){case r.a:{const{toolName:o,templateName:i}=e;if(!t.templates[o].includes(i)){const e=[...t.templates[o],i].sort(w);return Object.assign(Object.assign({},t),{templates:Object.assign(Object.assign({},t.templates),{[o]:e})})}return t}case r.g:{const{toolName:o,templates:i}=e;return Object.assign(Object.assign({},t),{templates:Object.assign(Object.assign({},t.templates),{[o]:[...i].sort(w)})})}case r.e:{const{toolName:o,templateName:i}=e;return Object.assign(Object.assign({},t),{templates:Object.assign(Object.assign({},t.templates),{[o]:t.templates[o].filter(t=>t!==i)})})}default:return t}}o.d(e,"store",(function(){return C}));const C=function(){const t=Object(n.b)(),e=Object(i.createStore)(y,Object(i.applyMiddleware)(t));return t.run(v),e}()},Lnv9:function(t,e){
t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="currentColor"><rect width="18" height="2" rx="1" x="5" y="14"/><rect width="18" height="1" rx=".5" x="5" y="20"/><rect width="18" height="3" rx="1.5" x="5" y="7"/></svg>'},O5Oz:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 1" width="18" height="1"><rect width="18" height="1" fill="currentColor" rx=".5"/></svg>'},Oy6E:function(t,e,o){t.exports={spinnerWrap:"spinnerWrap-1dkAsm33"}},PwLo:function(t,e,o){},R1RK:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none" stroke="currentColor"><path stroke-linecap="round" d="M15.5 18.5h6m-3 3v-6"/><rect width="6" height="6" rx="1.5" x="6.5" y="6.5"/><rect width="6" height="6" rx="1.5" x="15.5" y="6.5"/><rect width="6" height="6" rx="1.5" x="6.5" y="15.5"/></svg>'},SAe1:function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));var i=o("q1tI"),n=o("rzV7"),s=o.n(n);class r extends i.Component{constructor(t){super(t),this._handleMediaChange=()=>{const t=l(this.state.queries,(t,e)=>e.matches);let e=!1;for(const o in t)if(t.hasOwnProperty(o)&&this.state.matches[o]!==t[o]){e=!0;break}e&&this.setState({matches:t})};const{rules:e}=this.props;this.state=a(e)}shouldComponentUpdate(t,e){return!s()(t,this.props)||(!s()(e.rules,this.state.rules)||!s()(e.matches,this.state.matches))}componentDidMount(){this._migrate(null,this.state.queries)}componentDidUpdate(t,e){s()(t.rules,this.props.rules)||this._migrate(e.queries,this.state.queries)}componentWillUnmount(){this._migrate(this.state.queries,null)}render(){return this.props.children(this.state.matches)}static getDerivedStateFromProps(t,e){if(s()(t.rules,e.rules))return null;const{rules:o}=t;return a(o)}_migrate(t,e){null!==t&&l(t,(t,e)=>{e.removeListener(this._handleMediaChange)}),null!==e&&l(e,(t,e)=>{e.addListener(this._handleMediaChange)})}}function a(t){const e=l(t,(t,e)=>window.matchMedia(e));return{queries:e,matches:l(e,(t,e)=>e.matches),rules:Object.assign({},t)}}function l(t,e){const o={};for(const i in t)t.hasOwnProperty(i)&&(o[i]=e(i,t[i]));return o}},TXAa:function(t,e,o){},UXdH:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path fill="currentColor" d="M4 13h5v1H4v-1zM12 13h5v1h-5v-1zM20 13h5v1h-5v-1z"/></svg>'},Ve4Q:function(t,e,o){"use strict";o.r(e);var i=o("q1tI"),n=o.n(i),s=o("i8i4"),r=o.n(s),a=o("YFKU"),l=o("Kxc7"),c=o("hY0g"),d=o.n(c),u=o("ogJP"),h=o("CW80"),p=o("mMWL"),g=o("j3hX"),m=o("Eyy1"),_=o("tc+8"),b=o.n(_);class v extends b.a{constructor(t,e,o){super(),this._listenersMappers=[],this._isProcess=!1,this._baseProperty=t,this._undoModel=e,this._undoText=o}destroy(){this._baseProperty.destroy()}value(){return this._baseProperty.value()}setValue(t){this._isProcess=!0,this._baseProperty.setValue(t,void 0,{applyValue:(t,e)=>this._undoModel.setProperty(t,e,this._undoText)}),this._isProcess=!1,this._listenersMappers.forEach(t=>{t.method.call(t.obj,this)})}subscribe(t,e){const o=o=>{
this._isProcess||e.call(t,this)},i={obj:t,method:e,callback:o};this._listenersMappers.push(i),this._baseProperty.subscribe(t,o)}unsubscribe(t,e){var o;const i=Object(m.ensureDefined)(null===(o=this._listenersMappers.find(o=>o.obj===t&&o.method===e))||void 0===o?void 0:o.callback);this._baseProperty.unsubscribe(t,i)}unsubscribeAll(t){this._baseProperty.unsubscribeAll(t)}}var f=o("turx"),w=o("SAe1"),y=o("0ZwQ"),C=o("uhCe");const x=y.a+"__button";function W(t){var e;const{templateButton:o,propertyButtons:i,commonButtons:s,isDrawingFinished:r,activeChartWidget:a}=t,l=null===(e=a.model())||void 0===e?void 0:e.selection().dataSources();return l&&l.length?n.a.createElement(w.a,{rules:{isSmallWidth:C.a.TabletSmall,isSmallHeight:"screen and (max-height: 428px)"}},({isSmallWidth:t,isSmallHeight:e})=>n.a.createElement(n.a.Fragment,null,c(),r&&n.a.createElement(n.a.Fragment,null,Boolean(i.length)&&i.map((o,i)=>n.a.createElement(o.component,Object.assign({},o.props,{key:`${o.props.title}_${i}`,className:x,isSmallScreen:t||e}))),Boolean(s.length)&&s.map((o,i)=>{const s=t||e;return s?o.showForSmallScreen?n.a.createElement(o.component,Object.assign({},o.props,{isSmallScreen:s,key:`${o.props.title}_${i}`,className:x})):null:n.a.createElement(o.component,Object.assign({},o.props,{key:`${o.props.title}_${i}`,className:x}))})))):c();function c(){return null===o?null:n.a.createElement(o.component,Object.assign({},o.props,{isDrawingFinished:r,className:x}))}}var T=o("JWMC"),P=o("p0W+"),S=o("Xxuz");function E(t){const{title:e,activeChartWidget:o,className:i}=t;return n.a.createElement(P.a,{className:i,icon:S,title:e,onClick:function(){Object(T.trackEvent)("GUI","Context action on drawings","Settings"),o.showChartPropertiesForSource(o.model().selection().lineDataSources()[0],void 0,{onWidget:o.onWidget()})},"data-name":"settings"})}var O=o("5hRh"),L=o("mrSG"),k=o("TSYQ"),B=o("4rU7"),j=o("ucyy");function N(t){const{className:e}=t,o=Object(L.a)(t,["className"]);return n.a.createElement(B.a,Object.assign({className:k(e,j.button),tooltipPosition:"horizontal"},o))}var M=o("43BO"),V=o("Uh5y");function D(t){const{activeChartWidget:e,className:o}=t,i=e.model().selection().lineDataSources()[0].properties().frozen,s=Object(O.a)(i),r=s?{title:Object(a.t)("Unlock"),icon:M}:{title:Object(a.t)("Lock"),icon:V};return n.a.createElement(N,Object.assign({className:o,isActive:Boolean(s),onClick:function(){Object(T.trackEvent)("GUI","Context action on drawings","Lock"),e.toggleLockSelectedObject()},"data-name":Boolean(s)?"unlock":"lock"},r))}var A=o("aVjL");function I(t){const{title:e,activeChartWidget:o,className:i}=t;return n.a.createElement(P.a,{className:i,icon:A,title:e,"data-name":"remove",onClick:function(){Object(T.trackEvent)("GUI","Context action on drawings","Remove"),o.removeSelectedSources()}})}var R=o("Iivm"),z=o("/3z9"),F=o("lxNp"),H=o("82wv"),$=o("IAAr"),U=o("7KDR"),G=o("ycI/"),Q=o("5VQP"),q=o("HZKX"),K=o("HWhk"),J=o("9dnG"),Z=o("dmHa");function Y(t){
const{title:e,activeChartWidget:s,isSmallScreen:r,className:l}=t,c=s.model(),d=c.selection().lineDataSources(),[u,h]=Object(i.useState)([]),p=Object(i.useRef)(null),g=Object(i.useMemo)(()=>new q.ActionsProvider(s),[s]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(G.a,{keyCode:27,eventType:"keyup",handler:function(){Object(m.ensureNotNull)(p.current).close()}}),n.a.createElement(H.b,{className:l,ref:p,arrow:!1,onOpen:r?void 0:function(){const t=[new U.Action({label:Object(a.t)("Visual order"),icon:J,subItems:_(),name:"visual-order"})],e=function(){const t=[],e=z.isMacKeyboard?" +":"",i=d.filter(t=>t.cloneable());i.length>0&&t.push(new U.Action({name:"clone",icon:o("+KIV"),shortcutHint:z.humanReadableModifiers(F.Modifiers.Mod)+e+" Drag",label:Object(a.t)("Clone"),onExecute:()=>{c.cloneLineTools(i,!1),Object(T.trackEvent)("GUI","Context action on drawings","Clone")}}));const n=d.filter(t=>t.copiable());if(n.length>0){const o={name:"copy",label:Object(a.t)("Copy"),shortcutHint:z.humanReadableModifiers(F.Modifiers.Mod)+e+" C",onExecute:()=>{s.chartWidgetCollection().clipboard.uiRequestCopy(n)}};t.push(new U.Action(o,"Copy"))}if(!function(){if(!(null==s?void 0:s.isMultipleLayout()))return!1;return d.some(t=>t.isSynchronizable())}())return t;d.filter(t=>!!t.linkKey).length?t.push(new U.Action({name:"stop-sync",label:Object(a.t)("Stop syncing"),onExecute:()=>{c.unlinkLines&&c.unlinkLines(d)}})):t.push(new U.Action({name:"sync",label:Object(a.t)("Sync to all charts"),onExecute:()=>{c.copyToOtherCharts(d)}}));return t}();e.length&&t.push(new U.Separator,...e);t.push(new U.Separator,new U.Action({label:Object(a.t)("Hide"),icon:Z,onExecute:()=>{s.hideSelectedObject()},name:"hide"})),h(X(t))},onClick:r?function(t){g.contextMenuActionsForSources(d).then(e=>{window.matchMedia(C.a.TabletSmall).matches?Q.ContextMenuManager.createMenu(X(e),{mode:"drawer","data-name":"more-menu"}).then(e=>e.show(t)):h(X(e))})}:void 0,title:e,content:n.a.createElement(R.a,{icon:K}),"data-name":"more",menuDataName:"more-menu"},n.a.createElement($.a,{parentIsOpened:!0,items:u})));function _(){const t=[],e=c.availableZOrderOperations(d),o=new U.Action({name:"bring-to-front",label:Object(a.t)("Bring to Front"),onExecute:()=>{c.bringToFront(d)},disabled:1===d.length&&!e.bringToFrontEnabled}),i=new U.Action({name:"send-to-back",label:Object(a.t)("Send to Back"),onExecute:()=>{c.sendToBack(d)},disabled:1===d.length&&!e.sendToBackEnabled}),n=new U.Action({name:"bring-forward",label:Object(a.t)("Bring Forward"),onExecute:()=>{c.bringForward(d)},disabled:1===d.length&&!e.bringForwardEnabled}),s=new U.Action({name:"send-backward",label:Object(a.t)("Send Backward"),onExecute:()=>{c.sendBackward(d)},disabled:1===d.length&&!e.sendBackwardEnabled});return t.push(o,i,n,s),t}}function X(t){return Modernizr.touch&&!window.matchMedia("(pointer:fine)").matches?t.filter(t=>"Copy"!==t.id):t}var tt=o("972a"),et=o("bQEj"),ot=o("UXdH"),it=o("ZSM+");function nt(t){
const{property:e,model:o,title:s,className:r}=t,l=Object(O.a)(e),c=Object(i.useMemo)(()=>[new U.Action({icon:et,label:Object(a.t)("Line"),active:tt.LineStyle.Solid===l,onExecute:()=>o.setProperty(e,tt.LineStyle.Solid,s)}),new U.Action({icon:ot,label:Object(a.t)("Dashed line"),active:tt.LineStyle.Dashed===l,onExecute:()=>o.setProperty(e,tt.LineStyle.Dashed,s)}),new U.Action({icon:it,label:Object(a.t)("Dotted line"),active:tt.LineStyle.Dotted===l,onExecute:()=>o.setProperty(e,tt.LineStyle.Dotted,s)})],[o,e,l]);return n.a.createElement(H.b,{className:r,arrow:!1,content:n.a.createElement(R.a,{icon:st(l)}),title:s,"data-name":t["data-name"],menuDataName:t["data-name"]+"-menu"},n.a.createElement($.a,{items:c}))}function st(t){switch(t){case tt.LineStyle.Solid:return et;case tt.LineStyle.Dashed:return ot;case tt.LineStyle.Dotted:return it;default:return""}}const rt=[10,11,12,14,16,20,24,28,32,40];function at(t){const{property:e,model:o,title:i,className:s}=t,r=Object(O.a)(e),a=rt.map(t=>new U.Action({label:t.toString(),onExecute:()=>o.setProperty(e,t,i),active:t===r}));return n.a.createElement(H.b,{arrow:!1,content:r,className:s,title:i,"data-name":t["data-name"],menuDataName:t["data-name"]+"-menu"},n.a.createElement($.a,{items:a}))}var lt=o("aIyQ"),ct=o.n(lt);o("m/4m"),o("ADFN");class dt extends y.b{constructor(t){super(dt._prepareOptions(t)),this._onWidgetStateChangedDelegate=new ct.a,this._statedWidgets=[],this._currentPopup=null,this._onWindowClickedListener=this._onWindowClicked.bind(this)}show(){super.show(),document.addEventListener("mousedown",this._onWindowClickedListener)}hide(t){super.hide(t),document.removeEventListener("mousedown",this._onWindowClickedListener)}destroy(){this._closePopup(),super.destroy()}addGroupedWidget(t,e={}){Object(m.assert)(t.states.length>0&&-1!==dt._getStateIndexById(t,t.currentStateId),`Argument is invalid (count: ${t.states.length}, state: ${t.currentStateId})`);const o=document.createElement("div");o.className="tv-grouped-floating-toolbar__widget-wrapper apply-common-tooltip",t.widgetAddClass&&o.classList.add(t.widgetAddClass),o.setAttribute("title",t.tooltip);const i={isEnabled:!0,statedWidget:t,toolbarWidget:o},n=this._onWidgetClicked.bind(this,i);i.clickListener=n,o.addEventListener("click",n),this._updateWidgetPreview(i),this.addWidget(o,e),this._statedWidgets.push(i)}findGroupedWidget(t){const e=this._statedWidgets.length;for(let o=0;o<e;++o){if(this._statedWidgets[o].statedWidget.id===t)return o}return-1}removeGroupedWidget(t){const e=this._statedWidgets.length;for(let o=0;o<e;++o){const e=this._statedWidgets[o];if(e.statedWidget.id===t)return this._isPopupCreatedForWidget(t)&&this._closePopup(),void 0!==e.clickListener&&e.toolbarWidget.removeEventListener("click",e.clickListener),this.removeWidget(e.toolbarWidget),this._statedWidgets.splice(o,1),void this._updatePopupPosition()}Object(m.assert)(!1,`Unknown groupId(${t})`)}updateGroupedWidget(t,e){this._closePopup();const o=this._ensuredGetWidgetDataForId(t);o.statedWidget.currentStateId=e.currentStateId,
o.statedWidget.states=e.states,this._updateWidgetPreview(o)}setGroupedWidgetEnabled(t,e){const o=this._ensuredGetWidgetDataForId(t);o.isEnabled=e,o.toolbarWidget.classList.toggle("i-disabled",!e)}setGroupedWidgetState(t,e){const o=this._ensuredGetWidgetDataForId(t);Object(m.assert)(-1!==dt._getStateIndexById(o.statedWidget,e),`Unknown stateId (${e})`),o.statedWidget.currentStateId=e,this._updateSubWidgetsState(o.statedWidget),this._updateWidgetPreview(o)}onWidgetStateChanged(){return this._onWidgetStateChangedDelegate}_onVerticalChanged(t,e){this._updatePopupPosition()}_ensuredGetWidgetDataForId(t){for(const e of this._statedWidgets)if(e.statedWidget.id===t)return e;throw new Error(`Unknown groupId(${t})`)}_onWidgetClicked(t,e){const o=this._currentPopup&&this._isPopupCreatedForWidget(t.statedWidget.id);this._closePopup(),!o&&t.isEnabled&&this._createPopup(t)}_createPopup(t){const e={createdFor:t.toolbarWidget,element:document.createElement("div"),stateWidgetId:t.statedWidget.id,widgets:[]};e.element.className+="tv-grouped-floating-toolbar__popup js-popup";const o=t.statedWidget.states.length;t.statedWidget.states.forEach((i,n)=>{const s=this._createSubWidget(t,i),r=this._onSubWidgetClicked.bind(this,t,i.id);s.addEventListener("click",r),e.widgets.push({clickListener:r,stateWidget:i,widget:s}),s.classList.add("tv-grouped-floating-toolbar__sub-widget--slide-right-"+n),s.classList.add("tv-grouped-floating-toolbar__sub-widget--slide-left-"+(o-n+1)),i.readonly||e.element.appendChild(s)}),this._currentPopup=e,this._updateSubWidgetsState(t.statedWidget),t.toolbarWidget.classList.add("i-dropped"),this._getWidget().appendChild(this._currentPopup.element),Promise.resolve().then(()=>{this._currentPopup&&this._currentPopup.element.classList.add("i-opened")}),this._updatePopupPosition()}_closePopup(){if(this._statedWidgets.forEach(t=>{t.toolbarWidget.classList.remove("i-dropped")}),!this._currentPopup)return;const t=this._currentPopup.widgets,e=this._currentPopup.element;this._currentPopup=null,t.forEach(t=>{t.widget.removeEventListener("click",t.clickListener)}),e.classList.remove("i-opened"),e.addEventListener("transitionend",t=>{t.target===e&&this._getWidget().removeChild(e)})}_updateWidgetPreview(t){const e=dt._getStateIndexById(t.statedWidget,t.statedWidget.currentStateId);Object(m.assert)(-1!==e,"Unknown state id: "+t.statedWidget.currentStateId);const o=t.statedWidget.states[e].widget.cloneNode(!0);t.toolbarWidget.firstChild?t.toolbarWidget.replaceChild(o,t.toolbarWidget.firstChild):(t.toolbarWidget.appendChild(o),t.toolbarWidget.appendChild(dt._createCaret()))}_updateSubWidgetsState(t){this._currentPopup&&this._isPopupCreatedForWidget(t.id)&&this._currentPopup.widgets.forEach(e=>{e.widget.classList.toggle(dt._activeSubWidgetClass,e.stateWidget.id===t.currentStateId)})}_updatePopupPosition(){if(!this._currentPopup)return;const t=this._currentPopup.createdFor,e=this._getWidget().getBoundingClientRect(),o=this._findWrapperForWidget(t)
;if(!o||!this._currentPopup)throw new Error("Toolbar has no wrapper for preview's widget or there is no popup");const i=o.getBoundingClientRect(),n=this._currentPopup.element.getBoundingClientRect(),s=this._currentPopup.element;if(this.isVertical())s.classList.remove("tv-grouped-floating-toolbar__popup--at-top"),s.style.top=i.top-e.top+1+"px",s.style.left="",e.left>window.innerWidth-e.right?s.classList.add("tv-grouped-floating-toolbar__popup--at-left"):s.classList.remove("tv-grouped-floating-toolbar__popup--at-left");else{s.classList.remove("tv-grouped-floating-toolbar__popup--at-left");let t=0;i.left+n.width>window.innerWidth?e.left+n.width>window.innerWidth&&(t=e.width-n.width):t=i.left-e.left+1,s.style.left=t+"px",e.bottom+n.height>window.innerHeight?s.classList.add("tv-grouped-floating-toolbar__popup--at-top"):(s.classList.remove("tv-grouped-floating-toolbar__popup--at-top"),s.style.top="")}}_isPopupCreatedForWidget(t){return Boolean(this._currentPopup&&this._currentPopup.stateWidgetId===t)}_createSubWidget(t,e){const o=document.createElement("div");return o.className+="tv-grouped-floating-toolbar__sub-widget",t.statedWidget.stateWidgetAddClass&&o.classList.add(t.statedWidget.stateWidgetAddClass),o.appendChild(e.widget),o}_onSubWidgetClicked(t,e){this._closePopup(),t.statedWidget.currentStateId!==e&&(this.setGroupedWidgetState(t.statedWidget.id,e),this._onWidgetStateChangedDelegate.fire(t.statedWidget.id,e))}_onWindowClicked(t){if(this.isVisible()&&this._currentPopup&&!dt._isEventInElement(t,this._currentPopup.element)){for(let e=0;e<this._statedWidgets.length;++e)if(dt._isEventInElement(t,this._statedWidgets[e].toolbarWidget))return;this._closePopup()}}static _getStateIndexById(t,e){for(let o=0;o<t.states.length;++o)if(t.states[o].id===e)return o;return-1}static _createCaret(){const t=document.createElement("div");return t.className="tv-caret tv-caret--small tv-caret--colored tv-grouped-floating-toolbar__caret",t}static _prepareOptions(t){return t.addClass?t.addClass+=" tv-grouped-floating-toolbar":t.addClass=" tv-grouped-floating-toolbar",t}static _isEventInElement(t,e){return t.target===e||e.contains(t.target)}}dt._activeSubWidgetClass="tv-grouped-floating-toolbar__sub-widget--current";var ut=o("yMne");o.d(e,"LineToolPropertiesWidgetBase",(function(){return ht}));class ht{constructor(t){this._isDrawingFinished=new d.a(!0),this._currentTool=null,this._updateVisibilityTimeout=null,this._lineWidthsProperty=null,this._lineColorsProperty=null,this._currentProperties=null,this._container=null,this._toolbarRendered=!1,this._templatesButton=null,this._propertyButtons=[],this._commonButtons=[],this._handleSourceEdit=t=>{p.isDirectionalMovementActive.value()||(t?this._floatingToolbar.hide(!0):this._toolbarRendered&&this._floatingToolbar.show())},this._chartWidgetCollection=t,this._floatingToolbar=new dt({defaultPosition:{top:ut.b+15,left:window.innerWidth/2},positionSettingsKey:"properties_toolbar.position",positionStorageType:"device",layout:"horizontal","data-name":"drawing-toolbar"}),
this._container=this._floatingToolbar.getReactWidgetContainer(),p.isToolMovingNow.subscribe(this._handleSourceEdit),p.isToolEditingNow.subscribe(this._handleSourceEdit)}activeChartWidget(){return this._chartWidgetCollection.activeChartWidget.value()}selectedSources(){return this._chartWidgetCollection.selectedSources.value()}hide(){this._updateVisibilityTimeout&&clearTimeout(this._updateVisibilityTimeout),this._updateVisibilityTimeout=setTimeout(()=>{Object(h.unsetNewToolProperties)(),this._floatingToolbar.hide(!0),this._isToolbarRendered()&&this._unmountToolbar(),this._clearProperties(),this._clearCommonButtons()},0)}_clearProperties(){this._clearPropertyButtons(),this._lineWidthsProperty&&(this._lineWidthsProperty.destroy(),this._lineWidthsProperty=null),this._lineColorsProperty&&(this._lineColorsProperty.destroy(),this._lineColorsProperty=null),this._currentProperties&&(this._currentProperties=null)}_show(){this._updateVisibilityTimeout&&clearTimeout(this._updateVisibilityTimeout),this._updateVisibilityTimeout=setTimeout(()=>{this._renderToolbar(),this._floatingToolbar.show(),this._floatingToolbar.checkPosition()},0)}_addPropertyButton(t){this._propertyButtons.push(t),this._renderToolbar()}_addCommonButton(t){this._commonButtons.push(t),this._renderToolbar()}_addTemplatesButton(t){this._templatesButton=t}_renderToolbar(){null!==this._container&&this.activeChartWidget()&&this.activeChartWidget().model()&&(r.a.render(n.a.createElement(W,{templateButton:this._templatesButton,propertyButtons:this._propertyButtons,commonButtons:this._commonButtons,isDrawingFinished:this._isDrawingFinished.value(),activeChartWidget:this.activeChartWidget()}),this._container),this._toolbarRendered=!0)}_unmountToolbar(){null!==this._container&&(r.a.unmountComponentAtNode(this._container),this._toolbarRendered=!1)}_clearTemplatesButton(){this._templatesButton=null}_clearPropertyButtons(){this._propertyButtons=[]}_clearCommonButtons(){this._commonButtons=[]}_isToolbarRendered(){return this._toolbarRendered}_createSettingsButton(){if(this.selectedSources().length>1)return;const t={component:E,props:{title:Object(a.t)("Settings"),activeChartWidget:this.activeChartWidget()}};this._addCommonButton(t)}_createLockButton(){const t={component:D,props:{title:"Lock",activeChartWidget:this.activeChartWidget()}};this._addCommonButton(t)}_createRemoveButton(){const t={component:I,props:{title:Object(a.t)("Remove"),activeChartWidget:this.activeChartWidget()},showForSmallScreen:!0};this._addCommonButton(t)}_createDotsButton(){this._addCommonButton({component:Y,props:{title:Object(a.t)("More"),activeChartWidget:this.activeChartWidget()},showForSmallScreen:!0})}_createAlertButton(){}_createSourceActions(){this._createLockButton()}_createLineStyleButton(t){const e=this.selectedSources();if(0===e.length)return!1;const o={component:nt,props:{property:e[0].properties().linestyle||t,title:Object(a.t)("Style"),model:this.activeChartWidget().model(),"data-name":"style"}};return this._addPropertyButton(o),!0}_createFontSizeButton(t){const e=this.selectedSources()
;if(0===e.length)return!1;const o={component:at,props:{property:e[0].properties().fontsize||t,title:Object(a.t)("Font Size"),model:this.activeChartWidget().model(),"data-name":"font-size"}};return this._addPropertyButton(o),!0}_createCommonButtons(){this._commonButtons.length&&this._clearCommonButtons(),l.enabled("property_pages")&&this._createSettingsButton(),this._createSourceActions(),this._createRemoveButton(),this._createDotsButton()}_prepareProperties(t){const e=this.selectedSources().filter(e=>Object(h.isLineTool)(e)&&e.properties()[t]);if(!(e.filter(e=>e.properties()[t].visible()).length<1))return e.map(e=>e.properties()[t]).filter(u.notNull)}_createProperty(t,e,o,i){if(e){const t=this._prepareProperties(o);if(!t)return;const e=this.activeChartWidget().model();return this._isWidthProperty(t[0])?new v(new g.MultipleLineWidthsProperty(t),e,i):new f.b(new g.MultipleLineColorsProperty(t),e,i)}if(t&&t.visible())return this._isWidthProperty(t)?new g.MultipleLineWidthsProperty([t]):new f.a(new g.MultipleLineColorsProperty([t]))}_shouldShowBackgroundProperty(t,e){return!e||!e.fillBackground||!!e.fillBackground.value()}_isDrawingTool(t){return Boolean(null==t?void 0:t.toLowerCase().includes("linetool"))}_isWidthProperty(t){return t instanceof g.LineToolWidthsProperty}}},"W0/v":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17" width="17" height="17" fill="none"><path stroke="currentColor" d="M1.5 11.5l-.7.7a1 1 0 0 0-.3.71v3.59h3.59a1 1 0 0 0 .7-.3l.71-.7m-4-4l9-9m-9 9l2 2m2 2l9-9m-9 9l-2-2m11-7l1.3-1.3a1 1 0 0 0 0-1.4l-2.6-2.6a1 1 0 0 0-1.4 0l-1.3 1.3m4 4l-4-4m-7 11l9-9"/></svg>'},X1vi:function(t,e,o){t.exports={wrap:"wrap-2EG6_6QR",icon:"icon-2EG6_6QR",colorBg:"colorBg-2EG6_6QR",color:"color-2EG6_6QR",multicolor:"multicolor-2EG6_6QR",white:"white-2EG6_6QR"}},Xxuz:function(t,e){
t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path fill="currentcolor" fill-rule="evenodd" clip-rule="evenodd" d="M13 5.5c0-.28.22-.5.5-.5h1c.28 0 .5.22.5.5V7.05l.4.09c.9.18 1.73.53 2.46 1.02l.34.23.29-.3.81-.8c.2-.2.52-.2.71 0l.7.7.36-.35-.35.35c.2.2.2.51 0 .7l-.82.82-.29.29.23.34c.49.73.84 1.57 1.02 2.46l.08.4H22.5c.28 0 .5.22.5.5v1a.5.5 0 0 1-.5.5H20.95l-.09.4c-.18.9-.53 1.73-1.02 2.46l-.23.34.3.29.8.81c.2.2.2.52 0 .71l-.7.7a.5.5 0 0 1-.7 0l-.82-.8-.29-.3-.34.23c-.73.49-1.57.84-2.46 1.02l-.4.08V22.5a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5V20.95l-.4-.09a6.96 6.96 0 0 1-2.46-1.02l-.34-.23-.29.3-.81.8.35.36-.35-.35a.5.5 0 0 1-.71 0l-.7-.71a.5.5 0 0 1 0-.7l-.36-.36.35.35.82-.81.29-.29-.23-.34a6.96 6.96 0 0 1-1.02-2.46l-.08-.4H5.5a.5.5 0 0 1-.5-.5v-1c0-.28.22-.5.5-.5H7.05l.09-.4c.18-.9.53-1.73 1.02-2.46l.23-.34-.3-.29-.8-.81a.5.5 0 0 1 0-.71l.7-.7c.2-.2.51-.2.7 0l.82.8.29.3.34-.23a6.96 6.96 0 0 1 2.46-1.02l.4-.08V5.5zm.5-1.5c-.83 0-1.5.67-1.5 1.5v.75c-.73.2-1.43.48-2.06.86l-.54-.53a1.5 1.5 0 0 0-2.12 0l-.7.7a1.5 1.5 0 0 0 0 2.12l.53.54A7.95 7.95 0 0 0 6.25 12H5.5c-.83 0-1.5.67-1.5 1.5v1c0 .83.67 1.5 1.5 1.5h.75c.2.73.48 1.43.86 2.06l-.53.54a1.5 1.5 0 0 0 0 2.12l.7.7a1.5 1.5 0 0 0 2.12 0l.54-.53c.63.38 1.33.67 2.06.86v.75c0 .83.67 1.5 1.5 1.5h1c.83 0 1.5-.67 1.5-1.5v-.75a7.95 7.95 0 0 0 2.06-.86l.54.53a1.5 1.5 0 0 0 2.12 0l.7-.7a1.5 1.5 0 0 0 0-2.12l-.53-.54c.38-.63.67-1.33.86-2.06h.75c.83 0 1.5-.67 1.5-1.5v-1c0-.83-.67-1.5-1.5-1.5h-.75a7.95 7.95 0 0 0-.86-2.06l.53-.54a1.5 1.5 0 0 0 0-2.12l-.7-.7a1.5 1.5 0 0 0-2.12 0l-.54.53A7.95 7.95 0 0 0 16 6.25V5.5c0-.83-.67-1.5-1.5-1.5h-1zM12 14a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm2-3a3 3 0 1 0 0 6 3 3 0 0 0 0-6z"/></svg>'},"ZSM+":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor"><circle cx="9" cy="14" r="1"/><circle cx="4" cy="14" r="1"/><circle cx="14" cy="14" r="1"/><circle cx="19" cy="14" r="1"/><circle cx="24" cy="14" r="1"/></svg>'},bQEj:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path stroke="currentColor" d="M4 13.5h20"/></svg>'},dRg2:function(t,e,o){t.exports={item:"item-3Te2Sp8a",withIcon:"withIcon-3Te2Sp8a",icon:"icon-3Te2Sp8a",labelRow:"labelRow-3Te2Sp8a",multiWidth:"multiWidth-3Te2Sp8a",buttonWrap:"buttonWrap-3Te2Sp8a",buttonLabel:"buttonLabel-3Te2Sp8a"}},gmn6:function(t,e,o){"use strict";o.r(e),function(t){o.d(e,"FavoriteDrawingToolbar",(function(){return h}));o("P5fv"),o("nbsC"),o("EsMY"),o("YFKU");var i=o("0ZwQ"),n=o("b2d7"),s=o("7KDR"),r=o("5VQP"),a=o("mMWL"),l=o("MP+M"),c=o("Vdly"),d=o("hY0g"),u=o.n(d);o("TXAa");class h extends i.b{constructor(t){super({allowSortable:!Modernizr.mobiletouch,dragOnlyInsideToolbar:!0,defaultPosition:t,positionSettingsKey:"chart.favoriteDrawingsPosition",positionStorageType:"device"}),this._linetoolsWidgets={},this._canBeShownValue=new u.a(!1),this._attachHandlers(),this._loadVisibilityState()}show(){
this._canBeShownValue.value()&&(c.setValue("ChartFavoriteDrawingToolbarWidget.visible",!0),this.isVisible()||this._renderAllLinetools(),super.show())}hide(){c.setValue("ChartFavoriteDrawingToolbarWidget.visible",!1),super.hide()}canBeShown(){return this._canBeShownValue.readonly()}_onFavoriteAdded(t){this._canBeShownValue.setValue(!0),this.addWidget(this._createLinetoolWidget(t)),this.show()}_onFavoriteRemoved(t){this.removeWidget(this._linetoolsWidgets[t]),delete this._linetoolsWidgets[t],0===n.a.favoritesCount()&&(this._canBeShownValue.setValue(!1),this.hide())}_onFavoriteMoved(){this._renderAllLinetools()}_onSelectedLinetoolChanged(t){Object.keys(this._linetoolsWidgets).forEach(e=>{this._linetoolsWidgets[e].classList.toggle("i-active",t===e)})}_createLinetoolWidget(e){const o=$(t.render('<span class="tv-favorited-drawings-toolbar__widget {{#isActive}}i-active{{/isActive}} apply-common-tooltip" title="{{title}}">{{{icon}}}</span>',{icon:l.a[e].icon,isActive:e===a.tool.value(),title:l.a[e].localizedName}))[0];return o.addEventListener("click",t=>{t.preventDefault(),a.tool.value()!==e&&a.tool.setValue(e)}),this._linetoolsWidgets[e]=o,o}_renderAllLinetools(){this._linetoolsWidgets={},this.removeWidgets(),n.a.favorites().filter(t=>l.a[t]).forEach(t=>{this.addWidget(this._createLinetoolWidget(t))})}_attachHandlers(){n.a.favoriteAdded.subscribe(this,this._onFavoriteAdded),n.a.favoriteRemoved.subscribe(this,this._onFavoriteRemoved),n.a.favoriteMoved.subscribe(this,this._onFavoriteMoved),n.a.favoritesSynced.subscribe(null,()=>{this._loadVisibilityState(),this._renderAllLinetools()}),this.onWidgetsReordered().subscribe(this,(t,e)=>{if(n.a.favoriteMoved.unsubscribe(this,this._onFavoriteMoved),!n.a.moveFavorite(n.a.favorite(t),e))throw new Error("Something went wrong");n.a.favoriteMoved.subscribe(this,this._onFavoriteMoved)}),this.onContextMenu(t=>{t.preventDefault();const e=new s.Action({label:window.t("Hide Favorite Drawing Tools Toolbar"),onExecute:()=>{this.hide()}});r.ContextMenuManager.createMenu([e]).then(e=>{e.show(t)})}),a.tool.subscribe(this._onSelectedLinetoolChanged.bind(this))}_loadVisibilityState(){const t=n.a.favoritesCount()>0;this._canBeShownValue.setValue(t);c.getBool("ChartFavoriteDrawingToolbarWidget.visible",!0)&&t?this.show():this.hide()}}}.call(this,o("nbsC"))},guTw:function(t,e,o){"use strict";var i=o("fZEr"),n=o("LC+v").store,s=o("/yp2");function r(t,e){this._toolName=t,this._applyTemplate=e,this.templatesDeferred=this.loadData()}r.prototype.getData=function(){return n.getState().templates[this._toolName]},r.prototype.loadData=function(){var t=$.Deferred();return this.getData()?t.resolve():(n.dispatch(s.getTemplates(this._toolName,(function(){t.resolve()}))),t)},r.prototype.templatesLoaded=function(){return this.templatesDeferred},r.prototype.loadTemplate=function(t,e){var o=this;n.dispatch(s.loadTemplate(this._toolName,t,(function(t){o._applyTemplate(t),e&&e()})))},r.prototype.removeTemplate=function(t){t&&n.dispatch(s.startRemoveTemplate(this._toolName,t))},r.prototype.saveTemplate=function(t,e){
if(t&&e){t=TradingView.clean(t);n.dispatch(s.saveTemplate(this._toolName,t,e))}},r.prototype.deleteAction=function(t){var e=t,o=this;runOrSignIn((function(){var n=$.t("Do you really want to delete Drawing Template '{name}' ?").format({name:t});i.showConfirm({text:n,onConfirm:function(t){o.removeTemplate(e),t.dialogClose()}})}),{source:"Delete line tool template"})},r.prototype.showSaveDialog=function(t){var e=this;runOrSignIn((function(){i.showRename({title:$.t("Save Drawing Template As"),text:$.t("Template name")+":",maxLength:64,onRename:function(o){if(-1!==e.getData().indexOf(o.newValue)){var n=$.t("Drawing Template '{name}' already exists. Do you really want to replace it?").format({name:o.newValue});i.showConfirm({text:n,onConfirm:function(e){t(o.newValue),e.dialogClose(),o.dialogClose()},onClose:o.focusInput},o.innerManager)}else t(o.newValue),o.dialogClose()}})}),{source:"Save line tool template",sourceMeta:"Chart"})},t.exports=r},"m/4m":function(t,e,o){},mQbF:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 15" width="13" height="15" fill="none"><path stroke="currentColor" d="M4 14.5h2.5m2.5 0H6.5m0 0V.5m0 0h-5a1 1 0 0 0-1 1V4m6-3.5h5a1 1 0 0 1 1 1V4"/></svg>'},mwqF:function(t,e,o){"use strict";var i=o("mrSG"),n=o("q1tI"),s=o("TSYQ");function r(t,e){const{intent:o="primary",size:i="m",appearance:n="default",useFullWidth:r=!1,tabIndex:a=0,icon:l,className:c}=e;return s(c,t.button,t["size-"+i],t["intent-"+o],t["appearance-"+n],r&&t["full-width"],-1===a&&t.noOutline,l&&"s"!==i&&t["with-icon"])}var a=o("2A9e");o("+l/S");function l(t){const{className:e,intent:o,size:l,appearance:c,disabled:d,useFullWidth:u,reference:h,icon:p,children:g,tabIndex:m}=t,_=Object(i.a)(t,["className","intent","size","appearance","disabled","useFullWidth","reference","icon","children","tabIndex"]),b=r(a,{intent:o,size:l,appearance:c,disabled:d,useFullWidth:u,tabIndex:m,icon:p});return n.createElement("button",Object.assign({className:s(b,e),disabled:d,ref:h,tabIndex:m},_),p&&"s"!==l&&n.createElement("span",{className:a.icon},p),n.createElement("span",{className:a.content},g))}o.d(e,"a",(function(){return l}))},myiL:function(t,e,o){"use strict";o.r(e),o.d(e,"LineWidthButton",(function(){return w}));var i=o("q1tI"),n=o.n(i),s=o("TSYQ"),r=o("Eyy1"),a=o("Iivm"),l=o("82wv"),c=o("5hRh"),d=o("N5tr"),u=o("nPPD"),h=o("O5Oz"),p=o("xnr+"),g=o("n3oB"),m=o("2F1E"),_=o("Lnv9"),b=o("dRg2");const v=Object(u.a)(d.a,b),f=[{value:1,icon:h},{value:2,icon:p},{value:3,icon:g},{value:4,icon:m}];function w(t){const{multipleProperty:e,title:o,model:i,className:u,isSmallScreen:h}=t,p=Object(c.a)(Object(r.ensureDefined)(e)),g="mixed"===p||!p,m=function(t){const e=f.find(e=>e.value===t);if(!e)return _;return e.icon}(p);return n.a.createElement(l.b,{className:u,arrow:!1,title:o,"data-name":t["data-name"],menuDataName:t["data-name"]+"-menu",content:n.a.createElement("div",null,g?n.a.createElement("div",{className:b.multiWidth},n.a.createElement(a.a,{icon:_})):n.a.createElement("div",{className:b.buttonWrap},!h&&n.a.createElement(a.a,{
icon:m}),n.a.createElement("div",{className:s(!h&&b.buttonLabel)},p+"px")))},f.map(({value:t,icon:e})=>n.a.createElement(d.b,{key:t,theme:v,label:t+"px",icon:e,isActive:t===p,onClick:w,onClickArg:t})));function w(t){t&&e&&(i.beginUndoMacro(o),e.setValue(t,void 0,{applyValue:(t,e)=>{i.setProperty(t,e,o)}}),i.endUndoMacro())}}},n3oB:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 3" width="18" height="3"><rect width="18" height="3" fill="currentColor" rx="1.5"/></svg>'},"p0W+":function(t,e,o){"use strict";o.d(e,"a",(function(){return l}));var i=o("mrSG"),n=o("q1tI"),s=o("TSYQ"),r=o("tU7i"),a=o("EvtC");const l=n.forwardRef((t,e)=>{const{className:o}=t,l=Object(i.a)(t,["className"]);return n.createElement(r.b,Object.assign({},l,{ref:e,className:s(o,a.button)}))})},qAO1:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 12" width="8" height="12" fill="currentColor"><rect width="2" height="2" rx="1"/><rect width="2" height="2" rx="1" y="5"/><rect width="2" height="2" rx="1" y="10"/><rect width="2" height="2" rx="1" x="6"/><rect width="2" height="2" rx="1" x="6" y="5"/><rect width="2" height="2" rx="1" x="6" y="10"/></svg>'},rzV7:function(t,e,o){"use strict";var i=Object.prototype.hasOwnProperty;function n(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}t.exports=function(t,e){if(n(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var o=Object.keys(t),s=Object.keys(e);if(o.length!==s.length)return!1;for(var r=0;r<o.length;r++)if(!i.call(e,o[r])||!n(t[o[r]],e[o[r]]))return!1;return!0}},tPkB:function(t,e,o){"use strict";(function(e){var i=o("mMWL"),n=o("guTw"),s=o("C7ts").TemplateButton,r=o("Ocx9").DefaultProperty,a=o("Ve4Q").LineToolPropertiesWidgetBase,l=o("e92V").isLineDrawnWithPressedButton,c=o("CW80").isLineTool;const d=o("IhRv").ColorPickerButton,u=o("myiL").LineWidthButton;var h=o("CW80").setNewToolProperties,p=(!e.enabled("widget")||window.is_authenticated)&&e.enabled("linetoolpropertieswidget_template_button"),g=o("W0/v"),m=o("0fuu"),_=o("mQbF"),b=window.t("Color");class v extends a{constructor(t){super(t),this._hasAlertWathcedValue=null,this._templatesButton=null,this.attachHandlers()}attachHandlers(){i.tool.subscribe(this.onToolChanged.bind(this),{callWithLast:!0}),i.iconTool.subscribe(this.onIconToolChanged.bind(this)),this._chartWidgetCollection.selectedSources.subscribe(this.onSourceChanged.bind(this))}onIconToolChanged(){this.onToolChanged(i.tool.value())}onToolChanged(t,e){this._currentTool=t;const o=this.selectedSources();if(this._isDrawingTool(t)){if(this._isDrawingFinished.setValue(!1),p){var n=e instanceof r;e=n?e:h(t,"LineToolIcon"===t?i.iconTool.value():void 0),this.showPropertiesOf(t,e,n),this.showTemplatesOf({tool:t,properties:e}),this._toolbarVisible=!0}this._updateVisibility()}else o&&o.length?(o.length>1&&this._isDrawingFinished.setValue(!0),this.onSourceChanged(this.selectedSources())):this.hide()}findSourceOnWidget(t){
for(var e=0;e<this.activeChartWidget().model().panes().length;e++)for(var o=this.activeChartWidget().model().panes()[e].sourcesByGroup().all(),i=0;i<o.length;i++)if(o[i]===t)return o[i]}onSourceChanged(t){if(this._hasAlertWathcedValue&&(this._hasAlertWathcedValue.destroy(),this._hasAlertWathcedValue=null),t&&t.length&&(1!==t.length||c(t[0])))if(this._createCommonButtons(),1===t.length){var e=t[0];e.isAvailableInFloatingWidget()&&this.findSourceOnWidget(e)?(!e.userEditEnabled()||!l(e.toolname)&&this.activeChartWidget().model().lineBeingCreated()||(this._isDrawingFinished.setValue(!0),e.canHasAlert()&&(this._hasAlertWathcedValue=e.hasAlert.spawn())),this.showPropertiesOf(e.toolname,e.properties(),!0),this.showTemplatesOf({source:e}),this._toolbarVisible=!0,this._updateVisibility()):this.hide()}else this._clearProperties(),this._templatesButton&&(this._clearTemplatesButton(),this._templatesButton=null),this._updateVisibility(),this._createWidthsButton(void 0,!0),this._createColorsButton(void 0,!0),this._createBackgroundsButton(void 0,!0),this._createTextColorsButton(void 0,!0);else this.hide()}_createWidthsButton(t,e){if(this._lineWidthsProperty&&(this._lineWidthsProperty.destroy(),this._lineWidthsProperty=null),this._lineWidthsProperty=this._createProperty(t,e,"linesWidths","Set Line tool(s) line width"),!this._lineWidthsProperty)return!0;var o=window.t("Line tool width");e&&(1!==this.selectedSources().filter((function(t){return c(t)&&t.properties().linesWidths})).length&&(o=window.t("Line tool widths")));return this._addPropertyButton({component:u,props:{title:o,multipleProperty:this._lineWidthsProperty,model:this.activeChartWidget().model(),"data-name":"line-tool-width"}}),!0}_createColorsButton(t,e){return this._lineColorsProperty&&(this._lineColorsProperty.destroy(),this._lineColorsProperty=null),this._lineColorsProperty=this._createProperty(t,e,"linesColors","Set Line tool(s) color"),!this._lineColorsProperty||(this._addPropertyButton({component:d,props:{icon:g,title:window.t("Line tool colors"),property:this._lineColorsProperty,model:this.activeChartWidget().model(),"data-name":"line-tool-color"}}),!0)}_createBackgroundsButton(t,e){return this._backgroundsProperty&&(this._backgroundsProperty.destroy(),this._backgroundsProperty=null),this._backgroundsProperty=this._createProperty(t,e,"backgroundsColors","Set Line background(s) color"),!this._backgroundsProperty||(this._addPropertyButton({component:d,props:{icon:m,title:window.t("Line tool backgrounds"),property:this._backgroundsProperty,model:this.activeChartWidget().model(),"data-name":"background-color"}}),!0)}_createTextColorsButton(t,e){return this._textColorsProperty&&(this._textColorsProperty.destroy(),this._textColorsProperty=null),this._textColorsProperty=this._createProperty(t,e,"textsColors","Set Line tool(s) text color"),!this._textColorsProperty||(this._addPropertyButton({component:d,props:{icon:_,title:window.t("Line tool text colors"),property:this._textColorsProperty,model:this.activeChartWidget().model(),"data-name":"text-color"}}),!0)}
showTemplatesOf(t){if(e.enabled("drawing_templates")){var o,i,r=t.source;r?(o=r.toolname,i=r.properties()):(o=t.tool,i=t.properties),this._templatesButton&&(this._clearTemplatesButton(),this._templatesButton=null);var a=this;p&&(this._templatesList=new n(o,(function(t){r?(a.activeChartWidget().model().applyLineToolTemplate(r,t,"Apply Drawing Template"),a.onSourceChanged([r])):(i.mergeAndFire(t),i.saveDefaults(),a.onToolChanged(o,i))})),this._templatesButton={component:s,props:{key:"Templates",model:this._templatesList,onSave:r?()=>r.template():void 0,onRestore:()=>{void 0!==r?this.activeChartWidget().model().restorePropertiesForSource(r):i.restoreFactoryDefaults(),this.showPropertiesOf(o,i)}}},this._addTemplatesButton(this._templatesButton))}}templatesList(){return this._templatesList}_getPossibleProperty(t){for(var e=[],o=this._defaultToolProperties(),i=0;i<o.length;i++){var n=o[i];n.name in t&&e.push(n)}return e}showPropertiesOf(t,e,o){this._toolExceptionCases||(this._toolExceptionCases=this._createToolExceptionCases());var i=this._toolExceptionCases[t]||this._getPossibleProperty(e);if(this._clearProperties(),this._propertiesVisible=!1,i.length){for(var n={},s=0;s<i.length;s++){for(var r=i[s],a=e,l=r.name.split("."),c=0;c<l.length;++c)a=a&&a[l[c]];var u=r.showIf;if("function"!=typeof u||u(a,e)){var h=r.factory;if(h&&h.call(this,a,o))continue;if(!a)continue;if(this._propertiesVisible=!0,"combobox"!==r.inputType){const t={component:d,props:{icon:r.iconSvgCode,title:r.title,"data-name":r.dataName,property:a,model:this.activeChartWidget().model()}};this._addPropertyButton(t);continue}n[r.name]=a}}this._currentProperties=n}}_updateVisibility(){(p||this._isDrawingFinished.value())&&(this._toolbarVisible||this._propertiesVisible)?this._show():this.hide()}refresh(){this.onSourceChanged(this.selectedSources())}_defaultToolProperties(){return[{name:"linesColors",inputType:"colorPicker",iconSvgCode:g,title:b,factory:v.prototype._createColorsButton,dataName:"line-tool-color"},{name:"backgroundsColors",inputType:"colorPicker",iconSvgCode:m,title:$.t("Background Color"),factory:v.prototype._createBackgroundsButton,dataName:"background-color",showIf:this._shouldShowBackgroundProperty},{name:"textsColors",title:$.t("Text color"),inputType:"colorPicker",iconSvgCode:_,factory:v.prototype._createTextColorsButton,dataName:"text-color"},{name:"linesWidths",inputType:"combobox",factory:v.prototype._createWidthsButton},{name:"linestyle",title:$.t("Style"),inputType:"combobox",factory:v.prototype._createLineStyleButton}]}_riskPropertiesExceptionCases(){return[{name:"textcolor",title:$.t("Text color"),inputType:"colorPicker",iconSvgCode:_,dataName:"text-color"},{name:"profitBackground",title:$.t("Profit Background Color"),inputType:"colorPicker",iconSvgCode:m,dataName:"background-color"},{name:"stopBackground",title:$.t("Stop Background Color"),inputType:"colorPicker",iconSvgCode:m,dataName:"background-color"}]}_rangeExceptionCases(){return[{name:"linecolor",inputType:"colorPicker",iconSvgCode:g,title:b,dataName:"line-tool-color"},{
name:"backgroundColor",inputType:"colorPicker",iconSvgCode:m,title:$.t("Background Color"),dataName:"background-color",showIf:this._shouldShowBackgroundProperty},{name:"linesWidths",inputType:"combobox",factory:v.prototype._createWidthsButton}]}_brushPropertiesExceptionCase(){return[{name:"linesColors",inputType:"colorPicker",iconSvgCode:g,title:$.t("Color"),factory:v.prototype._createColorsButton,dataName:"line-tool-color"},{name:"backgroundsColors",inputType:"colorPicker",iconSvgCode:m,title:$.t("Background Color"),dataName:"background-color",factory:v.prototype._createBackgroundsButton},{name:"linesWidths",inputType:"combobox",factory:v.prototype._createWidthsButton}]}_bezierPropertiesExceptionCases(){return[{name:"linesColors",inputType:"colorPicker",iconSvgCode:g,title:$.t("Color"),factory:v.prototype._createColorsButton,dataName:"line-tool-color"},{name:"backgroundsColors",inputType:"colorPicker",iconSvgCode:m,dataName:"background-color",title:$.t("Background Color"),factory:v.prototype._createBackgroundsButton,showIf:this._shouldShowBackgroundProperty},{name:"linesWidths",inputType:"combobox",factory:v.prototype._createWidthsButton},{name:"linestyle",title:$.t("Style"),inputType:"combobox",factory:v.prototype._createLineStyleButton}]}_textPropertiesExceptionCases(){return[{name:"color",title:$.t("Text color"),inputType:"colorPicker",iconSvgCode:_,dataName:"text-color"},{name:"backgroundColor",title:$.t("Background Color"),inputType:"colorPicker",iconSvgCode:m,dataName:"background-color",showIf:this._shouldShowBackgroundProperty},{name:"fontsize",title:$.t("Font Size"),inputType:"combobox",factory:v.prototype._createFontSizeButton}]}_notePropertiesExceptionCases(){return[{name:"markerColor",title:$.t("Marker Color"),inputType:"colorPicker",iconSvgCode:g,dataName:"line-tool-color"},{name:"textColor",title:$.t("Text color"),inputType:"colorPicker",iconSvgCode:_,dataName:"text-color"},{name:"fontSize",title:$.t("Font Size"),inputType:"combobox",factory:v.prototype._createFontSizeButton}]}_createToolExceptionCases(){return{LineToolRegressionTrend:[],LineToolBrush:v.prototype._brushPropertiesExceptionCase(),LineToolBezierQuadro:v.prototype._bezierPropertiesExceptionCases(),LineToolBezierCubic:v.prototype._bezierPropertiesExceptionCases(),LineToolText:v.prototype._textPropertiesExceptionCases(),LineToolTextAbsolute:v.prototype._textPropertiesExceptionCases(),LineToolBalloon:v.prototype._textPropertiesExceptionCases(),LineToolCallout:v.prototype._textPropertiesExceptionCases(),LineToolPriceLabel:v.prototype._textPropertiesExceptionCases(),LineToolDateRange:v.prototype._rangeExceptionCases(),LineToolPriceRange:v.prototype._rangeExceptionCases(),LineToolDateAndPriceRange:v.prototype._rangeExceptionCases(),LineToolNote:v.prototype._notePropertiesExceptionCases(),LineToolNoteAbsolute:v.prototype._notePropertiesExceptionCases(),LineToolRiskRewardLong:v.prototype._riskPropertiesExceptionCases(),LineToolRiskRewardShort:v.prototype._riskPropertiesExceptionCases(),LineToolBarsPattern:[{name:"color",title:b,
inputType:"colorPicker",iconSvgCode:m,dataName:"background-color"}],LineToolProjection:[{name:"color1",title:$.t("Background color 1"),inputType:"colorPicker",iconSvgCode:m,dataName:"background-color"},{name:"color2",title:$.t("Background color 2"),inputType:"colorPicker",iconSvgCode:m,dataName:"background-color"},{name:"linesWidths",inputType:"combobox",factory:v.prototype._createWidthsButton}],LineToolSignpost:[{name:"fontSize",title:$.t("Font Size"),inputType:"combobox"},{name:"linesColors",inputType:"colorPicker",iconSvgCode:m,dataName:"background-color",title:b,factory:v.prototype._createBackgroundsButton,showIf:function(t,e){return e&&e.showImage.value()}}]}}}t.exports=v}).call(this,o("Kxc7"))},turx:function(t,e,o){"use strict";o.d(e,"b",(function(){return a})),o.d(e,"a",(function(){return l}));var i=o("Eyy1"),n=o("tc+8"),s=o.n(n);class r extends s.a{constructor(t){super(),this._listenersMappers=[],this._isProcess=!1,this._baseProperty=t}destroy(){this._baseProperty.destroy()}value(){const t=this._baseProperty.value();return"mixed"===t?"":t}visible(){return this._baseProperty.visible()}setValue(t){this._isProcess=!0,this._baseProperty.setValue(""===t?"mixed":t,void 0,{applyValue:this._applyValue.bind(this)}),this._isProcess=!1,this._listenersMappers.forEach(t=>{t.method.call(t.obj,this)})}subscribe(t,e){const o=o=>{this._isProcess||e.call(t,this)},i={obj:t,method:e,callback:o};this._listenersMappers.push(i),this._baseProperty.subscribe(t,o)}unsubscribe(t,e){var o;const n=Object(i.ensureDefined)(null===(o=this._listenersMappers.find(o=>o.obj===t&&o.method===e))||void 0===o?void 0:o.callback);this._baseProperty.unsubscribe(t,n)}unsubscribeAll(t){this._baseProperty.unsubscribeAll(t)}}class a extends r{constructor(t,e,o){super(t),this._undoModel=e,this._undoText=o}_applyValue(t,e){this._undoModel.setProperty(t,e,this._undoText)}}class l extends r{_applyValue(t,e){t.setValue(e)}}},ucyy:function(t,e,o){t.exports={button:"button-1gEXpG61"}},"xnr+":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 2" width="18" height="2"><rect width="18" height="2" fill="currentColor" rx="1"/></svg>'}}]);