(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{Oehf:function(e,t,s){e.exports={clock:"clock-SoGgl7MG",header:"header-SoGgl7MG",number:"number-SoGgl7MG",active:"active-SoGgl7MG",body:"body-SoGgl7MG",clockFace:"clockFace-SoGgl7MG",face:"face-SoGgl7MG",inner:"inner-SoGgl7MG",hand:"hand-SoGgl7MG",knob:"knob-SoGgl7MG",centerDot:"centerDot-SoGgl7MG"}},QAe6:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("q1tI");const o=e=>{const[t,s]=Object(n.useState)(e.value());return Object(n.useEffect)(()=>{const t=e=>s(e);return e.subscribe(t),()=>e.unsubscribe(t)},[e]),[t,t=>e.setValue(t)]}},a2Ze:function(e,t,s){"use strict";s("YFKU");var n=s("q1tI"),o=s("ldgD"),i=s("4ko3"),a=s("9c3F"),r=s("yTrw"),c=s("Eyy1"),h=s("Oehf"),p=s("TSYQ");class u extends n.PureComponent{constructor(){super(...arguments),this._renderNumber=(e,t)=>{const s=p(h.number,{[h.active]:e===this.props.activeNumber,[h.inner]:this.props.isInner}),o=this.props.format?this.props.format(e):e.toString();return n.createElement("span",{key:e,className:s,style:this._numberStyle(this.props.radius-this.props.spacing,t),"data-value":o},n.createElement("span",null,o))}}render(){return n.createElement("div",{className:h.face,style:this._faceStyle(),onMouseDown:this.props.onMouseDown,onTouchStart:this.props.onTouchStart},this.props.numbers.map(this._renderNumber))}_faceStyle(){return{height:2*this.props.radius,width:2*this.props.radius}}_numberStyle(e,t){const s=Math.PI/180*360/12*t;return{left:e+e*Math.sin(s)+this.props.spacing,top:e-e*Math.cos(s)+this.props.spacing}}}class l extends n.PureComponent{constructor(e){super(e),this._onMouseMove=e=>{this._move(d(e))},this._onTouchMove=e=>{this._move(m(e))},this._onMouseUp=()=>{document.removeEventListener("mousemove",this._onMouseMove),document.removeEventListener("mouseup",this._onMouseUp),this._endMove()},this._onTouchEnd=e=>{document.removeEventListener("touchmove",this._onTouchMove),document.removeEventListener("touchend",this._onTouchEnd),this._endMove(e)}}componentWillUnmount(){document.removeEventListener("mousemove",this._onMouseMove),document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("touchmove",this._onTouchMove),document.removeEventListener("touchend",this._onTouchEnd)}render(){const e={height:this.props.length,transform:`rotate(${this.props.angle}deg)`};return n.createElement("div",{className:h.hand,style:e},n.createElement("span",{className:h.knob}))}mouseStart(e){document.addEventListener("mousemove",this._onMouseMove),document.addEventListener("mouseup",this._onMouseUp),this._move(d(e.nativeEvent))}touchStart(e){document.addEventListener("touchmove",this._onTouchMove),document.addEventListener("touchend",this._onTouchEnd),this._move(m(e.nativeEvent)),e.stopPropagation()}_endMove(e){this.props.onMoveEnd&&this.props.onMoveEnd(e)}_move(e){const t=this._trimAngleToValue(this._positionToAngle(e)),s=this._getPositionRadius(e);!this.props.onMove||isNaN(t)||isNaN(s)||this.props.onMove(360===t?0:t,s)}_trimAngleToValue(e){
return this.props.step*Math.round(e/this.props.step)}_positionToAngle(e){return function(e,t,s,n){const o=function(e,t,s,n){return 180*(Math.atan2(n-t,s-e)+Math.PI/2)/Math.PI}(e,t,s,n);return o<0?360+o:o}(this.props.center.x,this.props.center.y,e.x,e.y)}_getPositionRadius(e){const t=this.props.center.x-e.x,s=this.props.center.y-e.y;return Math.sqrt(t*t+s*s)}}function d(e){return{x:e.pageX-window.scrollX,y:e.pageY-window.scrollY}}function m(e){return{x:e.touches[0].pageX-window.scrollX,y:e.touches[0].pageY-window.scrollY}}var _=s("rMpF");const v=[0,...Object(_.h)(13,24)],T=[12,...Object(_.h)(1,12)];class E extends n.PureComponent{constructor(e){super(e),this._onMouseDown=e=>{this._hand.mouseStart(e)},this._onTouchStart=e=>{this._hand.touchStart(e)},this._onHandMove=(e,t)=>{const s=t<this.props.radius-this.props.spacing;this.state.isInner!==s?this.setState({isInner:s},()=>{this.props.onChange(this._valueFromDegrees(e))}):this.props.onChange(this._valueFromDegrees(e))},this._onHandMoveEnd=()=>{this.props.onSelect&&this.props.onSelect()},this.state={isInner:this.props.selected>0&&this.props.selected<=12}}render(){const{center:e,radius:t,spacing:s,selected:o}=this.props;return n.createElement("div",null,n.createElement(u,{radius:t,spacing:s,numbers:v,activeNumber:o,format:_.n,onMouseDown:this._onMouseDown,onTouchStart:this._onTouchStart}),this._renderInnerFace(.46*t),n.createElement(l,{ref:e=>this._hand=e,length:t-(this.state.isInner?.46*t:s)-this.props.numberRadius,angle:30*o,step:30,center:e,onMove:this._onHandMove,onMoveEnd:this._onHandMoveEnd}))}_renderInnerFace(e){return n.createElement(u,{radius:this.props.radius,spacing:e,numbers:T,activeNumber:this.props.selected,onMouseDown:this._onMouseDown,onTouchStart:this._onTouchStart,isInner:!0})}_valueFromDegrees(e){return this.state.isInner?T[e/30]:v[e/30]}}const M=Object(_.h)(0,60,5);class S extends n.PureComponent{constructor(){super(...arguments),this._onMouseDown=e=>{this._hand.mouseStart(e)},this._onTouchStart=e=>{this._hand.touchStart(e)},this._onHandMove=e=>{this.props.onChange(e/6)},this._onHandMoveEnd=e=>{this.props.onSelect&&this.props.onSelect(e)}}render(){return n.createElement("div",null,n.createElement(u,{radius:this.props.radius,spacing:this.props.spacing,numbers:M,activeNumber:this.props.selected,format:_.n,onMouseDown:this._onMouseDown,onTouchStart:this._onTouchStart}),n.createElement(l,{ref:e=>this._hand=e,length:this.props.radius-this.props.spacing-this.props.numberRadius,angle:6*this.props.selected,step:6,center:this.props.center,onMove:this._onHandMove,onMoveEnd:this._onHandMoveEnd}))}}var g;!function(e){e[e.Hours=0]="Hours",e[e.Minutes=1]="Minutes"}(g||(g={}));class y extends n.PureComponent{constructor(e){super(e),this._clockFace=null,this._raf=null,this._recalculateTimeout=null,this._calculateShapeBinded=this._calculateShape.bind(this),this._onChangeHours=e=>{this.state.time.hours()!==e&&this._onChange(this.state.time.clone().hours(e))},this._onChangeMinutes=e=>{this.state.time.minutes()!==e&&this._onChange(this.state.time.clone().minutes(e))},
this._onSelectHours=()=>{this._displayMinutes()},this._onSelectMinutes=e=>{e&&e.target instanceof Node&&this._clockFace&&this._clockFace.contains(e.target)&&e.preventDefault(),this.props.onSelect&&this.props.onSelect(this.state.time.clone())},this._displayHours=()=>{this.setState({faceType:g.Hours})},this._displayMinutes=()=>{this.setState({faceType:g.Minutes})},this._setClockFace=e=>{this._clockFace=e},this.state={center:{x:0,y:0},radius:0,time:this.props.selectedTime,faceType:g.Hours}}render(){return n.createElement("div",{className:p(h.clock,this.props.className)},n.createElement("div",{className:h.header},n.createElement("span",{className:p(h.number,{[h.active]:this.state.faceType===g.Hours}),onClick:this._displayHours},this.state.time.format("HH")),n.createElement("span",null,":"),n.createElement("span",{className:p(h.number,{[h.active]:this.state.faceType===g.Minutes}),onClick:this._displayMinutes},this.state.time.format("mm"))),n.createElement("div",{className:h.body},n.createElement("div",{className:h.clockFace,ref:this._setClockFace},this.state.faceType===g.Hours?this._renderHours():null,this.state.faceType===g.Minutes?this._renderMinutes():null,n.createElement("span",{className:h.centerDot}))))}componentDidMount(){this._calculateShape(),this._recalculateTimeout=setTimeout(this._calculateShapeBinded,1),window.addEventListener("resize",this._calculateShapeBinded),window.addEventListener("scroll",this._calculateShapeBinded,!0)}componentWillUnmount(){this._clearTimeout(),window.removeEventListener("resize",this._calculateShapeBinded),window.removeEventListener("scroll",this._calculateShapeBinded,!0),null!==this._raf&&(cancelAnimationFrame(this._raf),this._raf=null)}_clearTimeout(){null!==this._recalculateTimeout&&(clearTimeout(this._recalculateTimeout),this._recalculateTimeout=null)}_renderHours(){return n.createElement(E,{center:this.state.center,radius:this.state.radius,spacing:.18*this.state.radius,selected:this.state.time.hours(),numberRadius:13,onChange:this._onChangeHours,onSelect:this._onSelectHours})}_renderMinutes(){return n.createElement(S,{center:this.state.center,radius:this.state.radius,spacing:.18*this.state.radius,selected:this.state.time.minutes(),numberRadius:13,onChange:this._onChangeMinutes,onSelect:this._onSelectMinutes})}_onChange(e){this.setState({time:e}),this.props.onChange&&this.props.onChange(e.clone())}_calculateShape(){null===this._raf&&(this._raf=requestAnimationFrame(()=>{const{left:e,top:t,width:s}=Object(c.ensureNotNull)(this._clockFace).getBoundingClientRect();this.setState({center:{x:e+s/2,y:t+s/2},radius:s/2}),this._raf=null}))}}var f=s("mwqF"),b=(s("HbRj"),s("xT4p"));const C=window.t("Set {durationType} {datetime}");class k extends n.PureComponent{constructor(e){super(e),this._todayMidnight=o("00:00","HH:mm"),this._onSelect=()=>{this.props.onSelect(this.state.date,this.state.time)},this._onDateSelect=e=>{const t=o(e);this.setState({date:t})},this._onTimeSelect=e=>{this.setState({time:e})},this.state={date:this.props.initTime,time:this.props.initDate}}render(){
const e=this.state.date.format("DD")+" "+this.state.date.format("MMM")+" '"+this.state.date.format("YY"),t=this.state.time.format("HH:mm"),s=C.format({durationType:this.props.durationMetaInfo.name,datetime:e+(this.props.durationMetaInfo.hasTimePicker?", "+t:"")});return n.createElement("div",{className:b.editWrapper},n.createElement("div",{className:b.dateTimeWrapper},this.props.durationMetaInfo.hasDatePicker&&n.createElement(r.a,{selectedDate:this.state.date.toDate(),className:b.calendar,minDate:this._todayMidnight.toDate(),onSelect:this._onDateSelect}),this.props.durationMetaInfo.hasTimePicker&&n.createElement(y,{selectedTime:this.state.time,onSelect:this._onTimeSelect,className:b.clock})),n.createElement("div",{className:b.buttonBlock},n.createElement("div",{className:b.buttonWrapper},n.createElement(f.a,{size:"l",onClick:this._onSelect},s))))}}var D=s("RgaO"),w=s("MiOS"),N=s("Iksw"),O=s("9dlw"),I=s("N5tr");s.d(t,"a",(function(){return P}));const x={attachment:{horizontal:"center",vertical:"bottom"},targetAttachment:{horizontal:"center",vertical:"top"}},H={attachment:{horizontal:"right",vertical:"bottom"},targetAttachment:{horizontal:"right",vertical:"top"}},L=window.t("Time in Force");class P extends n.PureComponent{constructor(e){super(e),this._typeTextElement=null,this._dateTextElement=null,this._timeDropdown=null,this._updateTimeAttachment=()=>{if(this._timeDropdown){const e=Object(c.ensureNotNull)(this._timeDropdown).getBoundingClientRect().right>Object(c.ensureNotNull)(document.documentElement).clientWidth?H:x;this.setState({dateAnchors:e})}},this._setTypeElement=e=>{this._typeTextElement=e},this._setTimeDateRef=e=>{this._dateTextElement=e},this._setTimeDropdownRef=e=>{this._timeDropdown=e},this._onTypeClick=()=>{this.setState(e=>({isTypeOpened:!e.isTypeOpened,isTimeOpened:!1})),this.props.onClick&&this.props.onClick()},this._onTimeClick=()=>{this.setState(e=>({isTypeOpened:!1,isTimeOpened:!e.isTimeOpened,dateAnchors:x})),this.props.onClick&&this.props.onClick()},this._onTypeEscape=e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),27===e.keyCode&&this._close()},this._onTimeEscape=e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),27===e.keyCode&&this._close()},this._onTypeSelect=e=>{const t={type:this.props.durationsMetaInfo[e||0].value},s=Object(w.b)(this.props.durationsMetaInfo,t.type);void 0!==s&&(s.hasDatePicker||s.hasTimePicker)&&(t.datetime=this.props.currentDuration.datetime||Object(w.d)(o().utc().add(1,"days"))),this.props.onDurationChanged(t),this._close()},this._onTimeSelect=(e,t)=>{const s=o({year:e.year(),month:e.month(),day:e.date(),hour:t.hour(),minute:t.minute()}).utc(),n=Object(w.d)(s);this.props.onDurationChanged({type:this.props.currentDuration.type,datetime:n}),this._close()},this._onTimeBlockClickOutside=e=>{this._timeDropdown&&this._timeDropdown.contains(e.target)||!this.state.isTypeOpened&&!this.state.isTimeOpened||(this.setState({isTimeOpened:!1}),this.props.onClose&&this.props.onClose())},this._close=()=>{this.props.onClose&&this.props.onClose(),
this.setState({isTypeOpened:!1,isTimeOpened:!1})},this.state={isTypeOpened:!1,isTimeOpened:!1,dateAnchors:x}}render(){const e=Object(w.b)(this.props.durationsMetaInfo,this.props.currentDuration.type);if(void 0===e)return null;const t=this.props.currentDuration.datetime?o(this.props.currentDuration.datetime):"GTT"===this.props.currentDuration.type||"GTD"===this.props.currentDuration.type?o().utc().add(1,"days"):o(),s=Object(w.c)(t,e),r=this.props.durationsMetaInfo.length>1?n.createElement(i.a,{className:b.typeSelector,reference:this._setTypeElement,text:e.name,tabIndex:-1,onClick:this._onTypeClick,onKeyDown:this._onTypeEscape}):n.createElement("span",{className:b.typeSelector},this.props.durationsMetaInfo[0].name+" "),c=e.hasDatePicker||e.hasTimePicker?n.createElement(i.a,{className:b.timeSelector,reference:this._setTimeDateRef,text:s,tabIndex:-1,onClick:this._onTimeClick,onKeyDown:this._onTimeEscape}):void 0,h=Object.values(this.props.durationsMetaInfo).map((e,t)=>n.createElement(I.b,{label:e.name,key:e.value,onClickArg:t,onClick:this._onTypeSelect}));return n.createElement("div",{className:b.duration},n.createElement("span",null,L),r,n.createElement(O.a,{doNotCloseOn:this,isOpened:this.state.isTypeOpened,position:Object(N.e)(this._typeTextElement,{verticalMargin:0}),onClose:this._close},h),n.createElement(D.a,{mouseDown:!0,touchStart:!0,handler:this._onTimeBlockClickOutside},s=>n.createElement("span",{className:b.container,ref:s},c,n.createElement(a.a,{root:"document",isOpened:this.state.isTimeOpened,target:this._dateTextElement||void 0,targetAttachment:this.state.dateAnchors.targetAttachment,attachment:this.state.dateAnchors.attachment,inheritWidthFromTarget:!1,width:e.hasTimePicker?506:286,reference:this._setTimeDropdownRef,onResize:this._updateTimeAttachment},n.createElement(k,{durationMetaInfo:e,initDate:t,initTime:t,onSelect:this._onTimeSelect})))))}}},xT4p:function(e,t,s){e.exports={duration:"duration-39LCEpoT",container:"container-39LCEpoT",typeSelector:"typeSelector-39LCEpoT",timeSelector:"timeSelector-39LCEpoT",editWrapper:"editWrapper-39LCEpoT",dateTimeWrapper:"dateTimeWrapper-39LCEpoT",buttonBlock:"buttonBlock-39LCEpoT",buttonWrapper:"buttonWrapper-39LCEpoT",calendar:"calendar-39LCEpoT",clock:"clock-39LCEpoT",button:"button-39LCEpoT"}}}]);