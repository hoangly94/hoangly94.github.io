(window.webpackJsonp=window.webpackJsonp||[]).push([["object-tree-dialog"],{"/KDZ":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("q1tI");class n extends s.PureComponent{constructor(e){super(e),this._handleChange=()=>{this.forceUpdate()},this.state={query:window.matchMedia(this.props.rule)}}componentDidMount(){this._subscribe(this.state.query)}componentDidUpdate(e,t){this.state.query!==t.query&&(this._unsubscribe(t.query),this._subscribe(this.state.query))}componentWillUnmount(){this._unsubscribe(this.state.query)}render(){return this.props.children(this.state.query.matches)}static getDerivedStateFromProps(e,t){return e.rule!==t.query.media?{query:window.matchMedia(e.rule)}:null}_subscribe(e){e.addListener(this._handleChange)}_unsubscribe(e){e.removeListener(this._handleChange)}}},"02pg":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("q1tI"),n=i("TSYQ"),a=i("XiJV");function o(e){return s.createElement("div",{className:n(a.separator,e.className)})}},"4/GM":function(e,t,i){e.exports={dialog:"dialog-3q1-PXu-",button:"button-3q1-PXu-"}},ASyk:function(e,t,i){e.exports={"tablet-normal-breakpoint":"screen and (max-width: 768px)","small-height-breakpoint":"screen and (max-height: 360px)","tablet-small-breakpoint":"screen and (max-width: 428px)"}},ItnF:function(e,t,i){e.exports={dialog:"dialog-2cMrvu9r",wrapper:"wrapper-2cMrvu9r",separator:"separator-2cMrvu9r"}},OZBO:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("q1tI");const n=i.n(s).a.createContext({setHideClose:()=>{}})},XfUw:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path stroke="currentColor" d="M9 2.13l1.903 3.855.116.236.26.038 4.255.618-3.079 3.001-.188.184.044.259.727 4.237-3.805-2L9 12.434l-.233.122-3.805 2.001.727-4.237.044-.26-.188-.183-3.079-3.001 4.255-.618.26-.038.116-.236L9 2.13z"/></svg>'},XiJV:function(e,t,i){e.exports={separator:"separator-3No0pWrk"}},b4AZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var s=i("q1tI"),n=i("Eyy1"),a=i("Iivm"),o=i("zM7N"),r=i("oiZD"),l=i("YFKU"),c=i("txPx"),d=i("CW80"),h=i("gM3K"),u=i("ogJP"),m=i("jPOK"),p=i("leHx"),v=i("rlH3"),g=i("x5pF");const b=e=>Object(l.t)("{drawingsCount} drawing",{plural:"{drawingsCount} drawings",count:e}).format({drawingsCount:e.toString()});Object(c.getLogger)("Chart.ManageDrawings");class f extends s.PureComponent{constructor(e){super(e),this._totalCount=0,this._model=null,this._symbolDrawingsMap=null,this._storageContent=null,this._storageContentLoadingPromise=null,this._onItemClick=e=>{this.props.chartWidget.setSymbol(e),null!==this._model&&this.setState({currentSymbol:e}),this.props.onClose&&this.props.onClose()},this._onRemove=async e=>{if(this._model&&this._symbolDrawingsMap){const t=Object(l.t)("Remove all line tools for ")+e,i=this._symbolDrawingsMap.get(e);if(i){const e=Array.from(i).map(e=>Object(n.ensureNotNull)(this._model).model().dataSourceForId(e)).filter(u.notNull);this._model.removeSources(e,!1,t),this._updateItems()}
}},this._updateItems=async()=>{if(null!==this._model){const e=await this._getItems(this._model.model().dataSources());this.setState({items:e})}},this._updateTheme=()=>{const e=r.watchedTheme.value();this.setState({theme:e})},this.state={currentSymbol:null,items:null,theme:r.watchedTheme.value()}}componentDidMount(){this.props.chartWidget.withModel(this,async()=>{this._model=this.props.chartWidget.model(),this._model.model().dataSourceCollectionChanged().subscribe(this,this._updateItems);const e=await this._getItems(this._model.model().dataSources());this.setState({currentSymbol:this._model.mainSeries().symbol(),items:e},()=>{var e,t;return null===(t=(e=this.props).onInitialized)||void 0===t?void 0:t.call(e)})}),r.watchedTheme.subscribe(this._updateTheme)}componentWillUnmount(){r.watchedTheme.unsubscribe(this._updateTheme),null!==this._model&&this._model.model().dataSourceCollectionChanged().unsubscribe(this,this._updateItems)}render(){const{isMobile:e}=this.props,{currentSymbol:t,items:i}=this.state,n=this._symbolDrawingsMap?this._symbolDrawingsMap.size:0,a=`${o=n,Object(l.t)("{symbolsCount} symbol",{plural:"{symbolsCount} symbols",context:"symbols_and_drawings_count",count:o}).format({symbolsCount:o.toString()})} ${(e=>Object(l.t)("with {drawingsCount} drawing",{plural:"with {drawingsCount} drawings",context:"symbols_and_drawings_count",count:e}).format({drawingsCount:e.toString()}))(this._totalCount)}`;var o;return s.createElement(s.Fragment,null,null===this._storageContent?null:s.createElement("div",{className:g.title},a),null===i||0===i.length?this._renderEmptyContent():i.map(i=>s.createElement(h.a,{key:i.symbol,title:i.symbol,subtitle:b(i.drawingsCount),removeBtnLabel:Object(l.t)("Remove all drawings for this symbol"),isActive:i.symbol===t,isMobile:e,onClick:this._onItemClick.bind(this,i.symbol),onClickRemove:this._onRemove.bind(this,i.symbol),showFavorite:!1})))}_renderEmptyContent(){const{theme:e}=this.state,t=e===o.a.Dark?v:p;return null===this._storageContent?s.createElement(m.a,null):s.createElement("div",{className:g.empty},s.createElement(a.a,{className:g.image,icon:t}),s.createElement("span",null,Object(l.t)("No drawings yet")))}async _getStorageContent(){return new Map}async _getItems(e){const t=[],i=this._getSymbolDrawingsMap(e);return(await this._getStorageContent()).forEach((e,t)=>{const s=i.get(t)||new Set;e.forEach(e=>s.add(e)),i.set(t,s)}),this._symbolDrawingsMap=i,this._totalCount=0,this._symbolDrawingsMap.forEach((e,i)=>{t.push({symbol:i,drawingsCount:e.size}),this._totalCount=this._totalCount+e.size}),t.sort((e,t)=>e.drawingsCount===t.drawingsCount?e.symbol.localeCompare(t.symbol):e.drawingsCount>t.drawingsCount?-1:1)}_getSymbolDrawingsMap(e){const t=new Map;return e.forEach(e=>{if(Object(d.isLineTool)(e)&&e.showInObjectTree()){const i=t.get(e.symbol())||new Set;i.add(e.id()),t.set(e.symbol(),i)}}),t}}},fEjm:function(e,t,i){e.exports={favorite:"favorite-I_fAY9V2",disabled:"disabled-I_fAY9V2",active:"active-I_fAY9V2",checked:"checked-I_fAY9V2"}},g89m:function(e,t,i){"use strict"
;var s=i("q1tI"),n=i.n(s),a=i("Eyy1"),o=i("TSYQ"),r=i.n(o),l=i("/3z9"),c=i("d700"),d=i("WXjp"),h=i("02pg"),u=i("uhCe"),m=i("/KDZ"),p=i("pafz"),v=i("ZjKI"),g=i("FQhm"),b=i("Iivm"),f=i("OZBO"),w=i("zztK"),_=i("px1m");function C(e){const{title:t,subtitle:i,showCloseIcon:a=!0,onClose:o,renderBefore:l,renderAfter:c,draggable:d,className:h}=e,[u,m]=Object(s.useState)(!1);return n.a.createElement(f.a.Provider,{value:{setHideClose:m}},n.a.createElement("div",{className:r()(_.container,h,i&&_.unsetAlign)},l,n.a.createElement("div",{"data-dragg-area":d,className:_.title},n.a.createElement("div",{className:_.ellipsis},t),i&&n.a.createElement("div",{className:r()(_.ellipsis,_.subtitle)},i)),c,a&&!u&&n.a.createElement(b.a,{className:_.close,icon:w,onClick:o,"data-name":"close","data-role":"button"})))}var M=i("ItnF");i.d(t,"a",(function(){return S}));const E={vertical:20},y={vertical:0};class S extends n.a.PureComponent{constructor(){super(...arguments),this._controller=null,this._reference=null,this._renderChildren=(e,t)=>(this._controller=e,this.props.render({requestResize:this._requestResize,centerAndFit:this._centerAndFit,isSmallWidth:t})),this._handleReference=e=>this._reference=e,this._handleClose=()=>{this.props.onClose()},this._handleKeyDown=e=>{var t;if(!e.defaultPrevented)switch(this.props.onKeyDown&&this.props.onKeyDown(e),Object(l.hashFromEvent)(e)){case 27:if(e.defaultPrevented)return;if(this.props.forceCloseOnEsc&&this.props.forceCloseOnEsc())return void this._handleClose();const{activeElement:i}=document,s=Object(a.ensureNotNull)(this._reference);if(null!==i){if(e.preventDefault(),"true"===(t=i).getAttribute("data-haspopup")&&"true"!==t.getAttribute("data-expanded"))return void this._handleClose();if(Object(c.b)(i))return void s.focus();if(s.contains(i))return void this._handleClose()}}},this._requestResize=()=>{null!==this._controller&&this._controller.recalculateBounds()},this._centerAndFit=()=>{null!==this._controller&&this._controller.centerAndFit()}}componentDidMount(){g.subscribe(v.CLOSE_POPUPS_AND_DIALOGS_COMMAND,this._handleClose,null)}componentWillUnmount(){g.unsubscribe(v.CLOSE_POPUPS_AND_DIALOGS_COMMAND,this._handleClose,null)}focus(){Object(a.ensureNotNull)(this._reference).focus()}getElement(){return this._reference}contains(e){var t,i;return null!==(i=null===(t=this._reference)||void 0===t?void 0:t.contains(e))&&void 0!==i&&i}render(){const{className:e,headerClassName:t,isOpened:i,title:s,dataName:a,onClickOutside:o,additionalElementPos:l,additionalHeaderElement:c,backdrop:v,shouldForceFocus:g=!0,showSeparator:b,subtitle:f,draggable:w=!0,fullScreen:_=!1,showCloseIcon:S=!0,rounded:k=!0,isAnimationEnabled:O,growPoint:x,dialogTooltip:D}=this.props,N="after"!==l?c:void 0,A="after"===l?c:void 0;return n.a.createElement(m.a,{rule:u.a.SmallHeight},l=>n.a.createElement(m.a,{rule:u.a.TabletSmall},c=>n.a.createElement(d.a,{rounded:!(c||_)&&k,className:r()(M.dialog,e),isOpened:i,reference:this._handleReference,onKeyDown:this._handleKeyDown,onClickOutside:o,onClickBackdrop:o,fullscreen:c||_,guard:l?y:E,
boundByScreen:c||_,shouldForceFocus:g,backdrop:v,draggable:w,isAnimationEnabled:O,growPoint:x,name:this.props.dataName,dialogTooltip:D},n.a.createElement("div",{className:M.wrapper,"data-name":a,"data-dialog-name":"string"==typeof s?s:""},void 0!==s&&n.a.createElement(C,{draggable:w&&!(c||_),onClose:this._handleClose,renderAfter:A,renderBefore:N,subtitle:f,title:s,showCloseIcon:S,className:t}),b&&n.a.createElement(h.a,{className:M.separator}),n.a.createElement(p.a.Consumer,null,e=>this._renderChildren(e,c||_))))))}}},gM3K:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var s=i("mrSG"),n=i("q1tI"),a=i.n(n),o=i("TSYQ"),r=i.n(o),l=i("qFKp"),c=i("pr86"),d=i("i/MG"),h=i("xp8i");function u(e){const{url:t,title:i,subtitle:n,removeBtnLabel:o,onClick:u,onClickFavorite:p,onClickRemove:v,isActive:g,isSelected:b,isFavorite:f,isMobile:w=!1,showFavorite:_=!0}=e,C=Object(s.a)(e,["url","title","subtitle","removeBtnLabel","onClick","onClickFavorite","onClickRemove","isActive","isSelected","isFavorite","isMobile","showFavorite"]);return a.a.createElement("a",Object.assign({},C,{className:r()(h.itemRow,g&&!b&&h.active,w&&h.mobile,b&&h.selected),onClick:m.bind(null,u),href:t,"data-role":"list-item","data-active":g}),_&&p&&a.a.createElement(c.a,{className:r()(h.favoriteButton,f&&h.favorite,l.CheckMobile.any()&&h.mobile),isActive:g&&!b,isFilled:f,onClick:m.bind(null,p),"data-name":"list-item-favorite-button","data-favorite":f}),a.a.createElement("div",{className:r()(h.itemInfo,!_&&h.itemInfoWithPadding)},a.a.createElement("div",{className:r()(h.title,g&&!b&&h.active,w&&h.mobile),"data-name":"list-item-title"},i),a.a.createElement("div",{className:r()(h.details,g&&!b&&h.active,w&&h.mobile)},n)),a.a.createElement(d.a,{className:h.removeButton,isActive:g&&!b,onClick:m.bind(null,v),"data-name":"list-item-remove-button",title:o}))}function m(e,t){t.defaultPrevented||(t.preventDefault(),e(t))}},"i/MG":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var s=i("mrSG"),n=(i("YFKU"),i("q1tI")),a=i("TSYQ"),o=i("Iivm"),r=i("To8B"),l=i("kXJy");const c={remove:window.t("Remove")};function d(e){const{className:t,isActive:i,onClick:d,title:h,hidden:u,"data-name":m="remove-button"}=e,p=Object(s.a)(e,["className","isActive","onClick","title","hidden","data-name"]);return n.createElement(o.a,Object.assign({},p,{"data-name":m,className:a(l.button,"apply-common-tooltip",i&&l.active,u&&l.hidden,t),icon:r,onClick:d,title:h||c.remove}))}},jPOK:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("q1tI"),n=i("TSYQ"),a=i("Owlf");i("SzKR");function o(e){const t=n("tv-spinner","tv-spinner--shown","tv-spinner--size_"+(e.size||a.a));return s.createElement("div",{className:t,style:e.style,role:"progressbar"},s.createElement("div",{className:"tv-spinner__spinner-layer"},s.createElement("div",{className:"tv-spinner__background tv-spinner__width_element"}),s.createElement("div",{className:"tv-spinner__circle-clipper tv-spinner__width_element tv-spinner__circle-clipper--left"}),s.createElement("div",{
className:"tv-spinner__circle-clipper tv-spinner__width_element tv-spinner__circle-clipper--right"})))}},kXJy:function(e,t,i){e.exports={button:"button-3B9fDLtm",disabled:"disabled-3B9fDLtm",active:"active-3B9fDLtm",hidden:"hidden-3B9fDLtm"}},leHx:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-10 -10 120 120" width="120" height="120" fill="none"><g clip-path="url(#avi4cgf11)"><path fill="#F0F3FA" d="M16.01 71.1c10.54 13.42 34.92 11.86 54.46-3.48s26.85-38.65 16.3-52.08C76.25 2.12 51.87 3.68 32.33 19.02c-9.2 7.22-15.68 16.2-18.87 25.09-.68 1.88-2.57 3.05-4.53 3.48a9.7 9.7 0 0 0-3.96 1.85C.5 52.94-.09 59.64 3.64 64.4a11.24 11.24 0 0 0 7.82 4.31 6.2 6.2 0 0 1 4.55 2.4z"/><path fill="url(#bvi4cgf11)" d="M28.3 35.56c1.8 3.42 12.08 10.65 25.62 16.88 6.36 2.93 12.38 5.3 17.37 6.93a172.7 172.7 0 0 0-18-12.68c-14.59-9.1-24.97-12.4-24.97-12.4-.18.3-.19.72-.01 1.27z"/><path stroke="#1E222D" stroke-width="1.5" d="M86.25 71.4c-.19.28-.54.53-1.17.69-.63.15-1.48.19-2.56.08-2.14-.22-5-1-8.4-2.28-6.78-2.57-15.53-7.13-24.64-13.06-9.12-5.93-16.82-12.1-21.92-17.25-2.55-2.59-4.41-4.89-5.48-6.76a7.79 7.79 0 0 1-.96-2.37c-.12-.64-.03-1.06.16-1.35.2-.3.54-.55 1.17-.7a7.8 7.8 0 0 1 2.56-.08c2.14.22 5 1 8.4 2.28 6.78 2.57 15.53 7.12 24.65 13.06 9.1 5.93 16.81 12.1 21.9 17.25 2.56 2.58 4.43 4.89 5.5 6.76.53.94.84 1.73.95 2.37.12.64.03 1.06-.16 1.35z"/><path stroke="#1E222D" stroke-linecap="round" stroke-width="1.5" d="M28.96 34.63c1.99.57 4.47 1.55 7.3 2.86l12.2 6.52a193.2 193.2 0 0 1 6.66 4.15c10.56 6.88 19.12 13.86 22.97 18.45"/><path stroke="#1E222D" stroke-width="1.5" d="M83.79 65.59c6.77-14.14 1.41-32-13.05-41.42-14.46-9.41-32.96-7.09-43.15 4.83M74.96 21.24a6.08 6.08 0 0 1-2.58 2.3c-.9.39-1.69.35-2.23 0-.54-.36-.9-1.05-.9-2.04a6.08 6.08 0 0 1 1.05-3.29 6.07 6.07 0 0 1 2.58-2.29c.9-.4 1.69-.35 2.23 0s.9 1.05.9 2.04c.01.98-.32 2.17-1.05 3.28z"/><path stroke="#1E222D" stroke-linecap="round" stroke-width="1.5" d="M42.7 23.62c1.25-.3 4.56-1.3 8.92-1.3M80.14 84.07C76.5 84.03 64.4 84 50 84s-26.5.03-30.14.07M24.7 59.33l5.77 5.32M32.05 56.05l.84 3.28"/></g><defs><linearGradient gradientUnits="userSpaceOnUse" x1="49.73" x2="49.73" y1="34.29" y2="59.37" id="bvi4cgf11"><stop stop-color="#2196F3"/><stop offset="1" stop-color="#2196F3"/></linearGradient><clipPath id="avi4cgf11"><path fill="#fff" d="M0 0h100v100H0V0z"/></clipPath></defs></svg>'},pr86:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var s=i("mrSG"),n=(i("YFKU"),i("q1tI")),a=i("TSYQ"),o=i("Iivm"),r=i("sg5d"),l=i("XfUw"),c=i("fEjm");const d={add:window.t("Add to favorites"),remove:window.t("Remove from favorites")};function h(e){const{className:t,isFilled:i,isActive:h,onClick:u}=e,m=Object(s.a)(e,["className","isFilled","isActive","onClick"]);return n.createElement(o.a,Object.assign({},m,{className:a(c.favorite,"apply-common-tooltip",i&&c.checked,h&&c.active,t),icon:i?r:l,onClick:u,title:i?d.remove:d.add}))}},px1m:function(e,t,i){e.exports={"small-height-breakpoint":"screen and (max-height: 360px)",container:"container-2sL5JydP",
unsetAlign:"unsetAlign-2sL5JydP",title:"title-2sL5JydP",subtitle:"subtitle-2sL5JydP",ellipsis:"ellipsis-2sL5JydP",close:"close-2sL5JydP"}},rlH3:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-10 -10 120 120" width="120" height="120" fill="none"><g clip-path="url(#a00y35lj1)"><path fill="#2A2E39" d="M16.01 71.1c10.54 13.42 34.92 11.86 54.46-3.48s26.85-38.65 16.3-52.08C76.25 2.12 51.87 3.68 32.33 19.02c-9.2 7.22-15.68 16.2-18.87 25.09-.68 1.88-2.57 3.05-4.53 3.48a9.7 9.7 0 0 0-3.96 1.85C.5 52.94-.09 59.64 3.64 64.4a11.24 11.24 0 0 0 7.82 4.31 6.2 6.2 0 0 1 4.55 2.4z"/><path fill="#1976D2" d="M28.3 35.56c1.8 3.42 12.08 10.65 25.62 16.88 6.36 2.93 12.38 5.3 17.37 6.93a172.7 172.7 0 0 0-18-12.68c-14.59-9.1-24.97-12.4-24.97-12.4-.18.3-.19.72-.01 1.27z"/><path stroke="#B2B5BE" stroke-width="1.5" d="M86.25 71.4c-.19.28-.54.53-1.17.69-.63.15-1.48.19-2.56.08-2.14-.22-5-1-8.4-2.28-6.78-2.57-15.53-7.13-24.64-13.06-9.12-5.93-16.82-12.1-21.92-17.25-2.55-2.59-4.41-4.89-5.48-6.76a7.79 7.79 0 0 1-.96-2.37c-.12-.64-.03-1.06.16-1.35.2-.3.54-.55 1.17-.7a7.8 7.8 0 0 1 2.56-.08c2.14.22 5 1 8.4 2.28 6.78 2.57 15.53 7.12 24.65 13.06 9.1 5.93 16.81 12.1 21.9 17.25 2.56 2.58 4.43 4.89 5.5 6.76.53.94.84 1.73.95 2.37.12.64.03 1.06-.16 1.35z"/><path stroke="#B2B5BE" stroke-linecap="round" stroke-width="1.5" d="M28.96 34.63c1.99.57 4.47 1.55 7.3 2.86l12.2 6.52a193.2 193.2 0 0 1 6.66 4.15c10.56 6.88 19.12 13.86 22.97 18.45"/><path stroke="#B2B5BE" stroke-width="1.5" d="M83.79 65.59c6.77-14.14 1.41-32-13.05-41.42-14.46-9.41-32.96-7.09-43.15 4.83M74.96 21.24a6.08 6.08 0 0 1-2.58 2.3c-.9.39-1.69.35-2.23 0-.54-.36-.9-1.05-.9-2.04a6.08 6.08 0 0 1 1.05-3.29 6.07 6.07 0 0 1 2.58-2.29c.9-.4 1.69-.35 2.23 0s.9 1.05.9 2.04c.01.98-.32 2.17-1.05 3.28z"/><path stroke="#B2B5BE" stroke-linecap="round" stroke-width="1.5" d="M42.7 23.62c1.25-.3 4.56-1.3 8.92-1.3M80.14 84.07C76.5 84.03 64.4 84 50 84s-26.5.03-30.14.07M24.7 59.33l5.77 5.32M32.05 56.05l.84 3.28"/></g><defs><clipPath id="a00y35lj1"><path fill="#fff" d="M0 0h100v100H0V0z"/></clipPath></defs></svg>'},sg5d:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path fill="currentColor" d="M9 1l2.35 4.76 5.26.77-3.8 3.7.9 5.24L9 13l-4.7 2.47.9-5.23-3.8-3.71 5.25-.77L9 1z"/></svg>'},uhCe:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("ASyk");const n={SmallHeight:s["small-height-breakpoint"],TabletSmall:s["tablet-small-breakpoint"],TabletNormal:s["tablet-normal-breakpoint"]}},x5pF:function(e,t,i){e.exports={title:"title-3eZ-_4gp",empty:"empty-3eZ-_4gp",image:"image-3eZ-_4gp",contentList:"contentList-3eZ-_4gp"}},xNz2:function(e,t,i){"use strict";i.r(t);var s=i("q1tI"),n=i.n(s),a=i("i8i4"),o=i("ihdJ"),r=i("Sn4D"),l=i("mkWe"),c=i("/KDZ"),d=i("YFKU"),h=i("g89m"),u=i("uhCe"),m=i("b4AZ");var p=i("uIX/"),v=i("p17a"),g=i("ndO8"),b=i("4/GM");class f extends n.a.PureComponent{constructor(e){super(e),this._isMounted=!1,this._dialogRef=n.a.createRef(),this._renderChildren=e=>n.a.createElement(w,{
isSmallTablet:e,viewModel:this.props.viewModel}),this._handleMediaChange=()=>{this.state.showDrawer&&!window.matchMedia(u.a.TabletSmall).matches&&this.setState({showDrawer:!1})},this._onManageDrawings=e=>{throw new Error("not supported")},this._closeDrawer=()=>{this.setState({showDrawer:!1})},this._handleContextMenuOpened=e=>{this.setState({isContextMenuOpened:e})},this._matchMedia=window.matchMedia(u.a.TabletSmall),this.state={showDrawer:!1,showDialog:!1,isContextMenuOpened:!1}}componentDidMount(){this._isMounted=!0,this._matchMedia.addListener(this._handleMediaChange),this.props.viewModel.isContextMenuOpened().subscribe(this._handleContextMenuOpened)}componentWillUnmount(){this._isMounted=!1,this._matchMedia.removeListener(this._handleMediaChange),this.props.viewModel.isContextMenuOpened().unsubscribe(this._handleContextMenuOpened)}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,{rule:u.a.TabletSmall},e=>n.a.createElement(h.a,{additionalElementPos:"after",additionalHeaderElement:!1,className:b.dialog,dataName:"object-tree-dialog",isOpened:!0,onClickOutside:this.state.showDialog||e||this.state.isContextMenuOpened?()=>{}:this.props.onClose,onClose:this.props.onClose,ref:this._dialogRef,render:()=>this._renderChildren(e),title:Object(d.t)("Object tree"),showSeparator:!0})),n.a.createElement(l.b,null,this.state.showDrawer&&n.a.createElement(r.a,{onClose:this._closeDrawer,position:"Bottom"},n.a.createElement(m.a,{onClose:this._closeDrawer,chartWidget:this.props.activeChartWidget,isMobile:!0}))))}}function w(e){const{isSmallTablet:t,viewModel:i}=e,a=Object(s.useMemo)(()=>({size:t?1:0,smallSizeTreeNodeAction:0}),[t]);return n.a.createElement(g.a.Provider,{value:a},n.a.createElement(p.ObjectTree,{nodeRenderer:v.NodeRenderer,showHeader:!1,viewModel:i,isDialog:!0}))}var _=i("eqEH"),C=i("vPbs"),M=i("jaf/"),E=i("sQaR");i.d(t,"ObjectTreeDialogRenderer",(function(){return y}));class y extends E.a{constructor(){super(),this._handleClose=()=>{a.unmountComponentAtNode(this._container),this._setVisibility(!1),null!==this._viewModel&&(this._viewModel.destroy(),this._viewModel=null)};const e=Object(_.service)(C.CHART_WIDGET_COLLECTION_SERVICE);this._activeChartWidget=e.activeChartWidget.value(),this._viewModel=new M.ObjectTree(e.activeChartWidget)}hide(){this._handleClose()}isVisible(){return this.visible().value()}show(){Object(o.b)().then(()=>{null!==this._viewModel&&(a.render(s.createElement(f,{onClose:this._handleClose,viewModel:this._viewModel,activeChartWidget:this._activeChartWidget}),this._container),this._setVisibility(!0))})}}},xp8i:function(e,t,i){e.exports={itemRow:"itemRow-1SBAfF8E",favoriteButton:"favoriteButton-1SBAfF8E",active:"active-1SBAfF8E",selected:"selected-1SBAfF8E",mobile:"mobile-1SBAfF8E",itemInfo:"itemInfo-1SBAfF8E",title:"title-1SBAfF8E",details:"details-1SBAfF8E",itemInfoWithPadding:"itemInfoWithPadding-1SBAfF8E",favorite:"favorite-1SBAfF8E",removeButton:"removeButton-1SBAfF8E"}},zztK:function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17" width="17" height="17" fill="none"><path stroke="currentColor" stroke-width="1.2" d="M1 1l15 15m0-15L1 16"/></svg>'}}]);